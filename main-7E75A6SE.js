import{$ as Xe,$a as Ht,A as dn,Aa as Pn,Ab as Kl,B as Bl,Ba as St,Bb as _o,C as gh,Ca as Ih,Cb as j,D as mh,Da as Th,Db as U,E as yh,Ea as Rh,Eb as Kh,F as Ct,Fa as Fn,Fb as bo,G as yo,Ga as Ln,Gb as Bi,H as De,Ha as S,Hb as Jh,I as ee,Ia as w,Ib as Yh,J as vh,Ja as ql,Jb as Lr,K as jt,Ka as Nh,Kb as Jl,L,La as ft,Lb as Zh,M as dt,Ma as Pi,Mb as Qh,N as _h,Na as Pr,Nb as At,O as te,Oa as xt,Ob as Xh,P as $l,Pa as Fr,Pb as Yl,Q as H,Qa as Ph,Qb as ef,R as T,Ra as Fh,Rb as fn,S as Nr,Sa as ne,Sb as Vr,T as re,Ta as Lh,Tb as mt,U as ht,Ua as Vh,Ub as tf,V as le,Va as Bh,Vb as nf,W as Ii,Wa as Fi,X as jl,Xa as E,Y as bh,Ya as Wl,Z as vo,Za as Et,_ as zt,_a as Ut,a as lh,aa as Q,ab as $h,b as ch,ba as X,bb as jh,c as uh,ca as Dt,cb as v,d as Nl,da as In,db as _,e as Pl,ea as Tn,eb as O,f as Oe,fa as zl,fb as Li,g as Ze,ga as Ti,gb as Vi,h as un,ha as wh,hb as zh,i as je,ia as ye,ib as Se,j as I,ja as Rn,jb as et,k as Tr,ka as Ul,kb as ue,l as go,la as Ie,lb as R,m as dh,ma as Ch,mb as M,n as Z,na as Hl,nb as Uh,o as Fl,oa as Dh,ob as Hh,p as Qe,pa as Ri,pb as Mt,q as hh,qa as Gl,qb as pt,r as Ll,ra as Nn,rb as gt,s as fh,sa as Ni,sb as k,t as ki,ta as Sh,tb as hn,u as Ai,ua as xh,ub as tt,v as Rr,va as Eh,vb as Gh,w as Vl,wa as Mh,wb as qh,x as Oi,xa as kh,xb as Wh,y as ph,ya as Ah,yb as kt,z as mo,za as Oh,zb as xe}from"./chunk-6JKMOV54.js";import{b as rf,c as sf,f as ov,g as of}from"./chunk-LJ5XHLMQ.js";import{a as D,b as $,d as $t,f as rv,g as sv,h as m}from"./chunk-FK42CRUA.js";var iu=$t(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});var tu=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};nu.default=tu});var su=$t(fs=>{"use strict";var Dp=fs&&fs.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(fs,"__esModule",{value:!0});var Xb=Dp((of(),sv(ov))),ew=Dp(iu()),ru=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Xb.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let i=this.fetch,r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>m(this,null,function*(){var o,a,l;let c=null,u=null,d=null,h=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){let C=yield s.text();C===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=C:u=JSON.parse(C))}let g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{let g=yield s.text();try{c=JSON.parse(g),Array.isArray(c)&&s.status===404&&(u=[],c=null,h=200,f="OK")}catch{s.status===404&&g===""?(h=204,f="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((l=c?.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,f="OK"),c&&this.shouldThrowOnError)throw new ew.default(c)}return{error:c,data:u,count:d,status:h,statusText:f}}));return this.shouldThrowOnError||(r=r.catch(s=>{var o,a,l;return{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:`${(a=s?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(t,e)}};fs.default=ru});var au=$t(ps=>{"use strict";var tw=ps&&ps.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ps,"__esModule",{value:!0});var nw=tw(su()),ou=class extends nw.default{select(t){let e=!1,i=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:i,foreignTable:r,referencedTable:s=r}={}){let o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:i=e}={}){let r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:i,referencedTable:r=i}={}){let s=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:i=!1,buffers:r=!1,wal:s=!1,format:o="text"}={}){var a;let l=[t?"analyze":null,e?"verbose":null,i?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ps.default=ou});var na=$t(gs=>{"use strict";var iw=gs&&gs.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(gs,"__esModule",{value:!0});var rw=iw(au()),lu=class extends rw.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let i=Array.from(new Set(e)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:i,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");let o=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${s}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,i])=>{this.url.searchParams.append(e,`eq.${i}`)}),this}not(t,e,i){return this.url.searchParams.append(t,`not.${e}.${i}`),this}or(t,{foreignTable:e,referencedTable:i=e}={}){let r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,i){return this.url.searchParams.append(t,`${e}.${i}`),this}};gs.default=lu});var uu=$t(ys=>{"use strict";var sw=ys&&ys.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ys,"__esModule",{value:!0});var ms=sw(na()),cu=class{constructor(t,{headers:e={},schema:i,fetch:r}){this.url=t,this.headers=e,this.schema=i,this.fetch=r}select(t,{head:e=!1,count:i}={}){let r=e?"HEAD":"GET",s=!1,o=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),i&&(this.headers.Prefer=`count=${i}`),new ms.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:i=!0}={}){let r="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),e&&s.push(`count=${e}`),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){let o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){let a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ms.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:i=!1,count:r,defaultToNull:s=!0}={}){let o="POST",a=[`resolution=${i?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){let l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){let c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new ms.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let i="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),e&&r.push(`count=${e}`),this.headers.Prefer=r.join(","),new ms.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e="DELETE",i=[];return t&&i.push(`count=${t}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new ms.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ys.default=cu});var Sp=$t(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.version=void 0;ia.version="0.0.0-automated"});var xp=$t(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.DEFAULT_HEADERS=void 0;var ow=Sp();ra.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${ow.version}`}});var Mp=$t(vs=>{"use strict";var Ep=vs&&vs.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(vs,"__esModule",{value:!0});var aw=Ep(uu()),lw=Ep(na()),cw=xp(),du=class n{constructor(t,{headers:e={},schema:i,fetch:r}={}){this.url=t,this.headers=Object.assign(Object.assign({},cw.DEFAULT_HEADERS),e),this.schemaName=i,this.fetch=r}from(t){let e=new URL(`${this.url}/${t}`);return new aw.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:i=!1,get:r=!1,count:s}={}){let o,a=new URL(`${this.url}/rpc/${t}`),l;i||r?(o=i?"HEAD":"GET",Object.entries(e).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",l=e);let c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new lw.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};vs.default=du});var Np=$t(_e=>{"use strict";var Yi=_e&&_e.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(_e,"__esModule",{value:!0});_e.PostgrestError=_e.PostgrestBuilder=_e.PostgrestTransformBuilder=_e.PostgrestFilterBuilder=_e.PostgrestQueryBuilder=_e.PostgrestClient=void 0;var kp=Yi(Mp());_e.PostgrestClient=kp.default;var Ap=Yi(uu());_e.PostgrestQueryBuilder=Ap.default;var Op=Yi(na());_e.PostgrestFilterBuilder=Op.default;var Ip=Yi(au());_e.PostgrestTransformBuilder=Ip.default;var Tp=Yi(su());_e.PostgrestBuilder=Tp.default;var Rp=Yi(iu());_e.PostgrestError=Rp.default;_e.default={PostgrestClient:kp.default,PostgrestQueryBuilder:Ap.default,PostgrestFilterBuilder:Op.default,PostgrestTransformBuilder:Ip.default,PostgrestBuilder:Tp.default,PostgrestError:Rp.default}});var pf=null;function Wt(){return pf}function gf(n){pf??=n}var Ao=class{};var Ue=new te(""),mf=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:()=>T(lv),providedIn:"platform"})}}return n})();var lv=(()=>{class n extends mf{constructor(){super(),this._doc=T(Ue),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wt().getBaseHref(this._doc)}onPopState(e){let i=Wt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=Wt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function yf(n,t){if(n.length==0)return t;if(t.length==0)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,e==2?n+t.substring(1):e==1?n+t:n+"/"+t}function af(n){let t=n.match(/#|\?|$/),e=t&&t.index||n.length,i=e-(n[e-1]==="/"?1:0);return n.slice(0,i)+n.slice(e)}function Vn(n){return n&&n[0]!=="?"?"?"+n:n}var $i=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:()=>T(vf),providedIn:"root"})}}return n})(),cv=new te(""),vf=(()=>{class n extends $i{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??T(Ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return yf(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+Vn(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){let o=this.prepareExternalUrl(r+Vn(s));this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){let o=this.prepareExternalUrl(r+Vn(s));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(H(mf),H(cv,8))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Br=(()=>{class n{constructor(e){this._subject=new ye,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=hv(af(lf(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Vn(i))}normalize(e){return n.stripTrailingSlash(dv(this._basePath,lf(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Vn(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Vn(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static{this.normalizeQueryParams=Vn}static{this.joinWithSlash=yf}static{this.stripTrailingSlash=af}static{this.\u0275fac=function(i){return new(i||n)(H($i))}}static{this.\u0275prov=L({token:n,factory:()=>uv(),providedIn:"root"})}}return n})();function uv(){return new Br(H($i))}function dv(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function lf(n){return n.replace(/\/index.html$/,"")}function hv(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var Te=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Te||{}),ie=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(ie||{}),ze=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(ze||{}),pn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function fv(n){return et(n)[ue.LocaleId]}function pv(n,t,e){let i=et(n),r=[i[ue.DayPeriodsFormat],i[ue.DayPeriodsStandalone]],s=nt(r,t);return nt(s,e)}function gv(n,t,e){let i=et(n),r=[i[ue.DaysFormat],i[ue.DaysStandalone]],s=nt(r,t);return nt(s,e)}function mv(n,t,e){let i=et(n),r=[i[ue.MonthsFormat],i[ue.MonthsStandalone]],s=nt(r,t);return nt(s,e)}function yv(n,t){let i=et(n)[ue.Eras];return nt(i,t)}function wo(n,t){let e=et(n);return nt(e[ue.DateFormat],t)}function Co(n,t){let e=et(n);return nt(e[ue.TimeFormat],t)}function Do(n,t){let i=et(n)[ue.DateTimeFormat];return nt(i,t)}function To(n,t){let e=et(n),i=e[ue.NumberSymbols][t];if(typeof i>"u"){if(t===pn.CurrencyDecimal)return e[ue.NumberSymbols][pn.Decimal];if(t===pn.CurrencyGroup)return e[ue.NumberSymbols][pn.Group]}return i}function _f(n){if(!n[ue.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[ue.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function vv(n){let t=et(n);return _f(t),(t[ue.ExtraData][2]||[]).map(i=>typeof i=="string"?Zl(i):[Zl(i[0]),Zl(i[1])])}function _v(n,t,e){let i=et(n);_f(i);let r=[i[ue.ExtraData][0],i[ue.ExtraData][1]],s=nt(r,t)||[];return nt(s,e)||[]}function nt(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function Zl(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var bv=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,So={},wv=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,qt=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(qt||{}),q=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(q||{}),G=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(G||{});function Cv(n,t,e,i){let r=Iv(n);t=Gt(e,t)||t;let o=[],a;for(;t;)if(a=wv.exec(t),a){o=o.concat(a.slice(1));let u=o.pop();if(!u)break;t=u}else{o.push(t);break}let l=r.getTimezoneOffset();i&&(l=wf(i,l),r=Ov(r,i,!0));let c="";return o.forEach(u=>{let d=kv(u);c+=d?d(r,e,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function Oo(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function Gt(n,t){let e=fv(n);if(So[e]??={},So[e][t])return So[e][t];let i="";switch(t){case"shortDate":i=wo(n,ze.Short);break;case"mediumDate":i=wo(n,ze.Medium);break;case"longDate":i=wo(n,ze.Long);break;case"fullDate":i=wo(n,ze.Full);break;case"shortTime":i=Co(n,ze.Short);break;case"mediumTime":i=Co(n,ze.Medium);break;case"longTime":i=Co(n,ze.Long);break;case"fullTime":i=Co(n,ze.Full);break;case"short":let r=Gt(n,"shortTime"),s=Gt(n,"shortDate");i=xo(Do(n,ze.Short),[r,s]);break;case"medium":let o=Gt(n,"mediumTime"),a=Gt(n,"mediumDate");i=xo(Do(n,ze.Medium),[o,a]);break;case"long":let l=Gt(n,"longTime"),c=Gt(n,"longDate");i=xo(Do(n,ze.Long),[l,c]);break;case"full":let u=Gt(n,"fullTime"),d=Gt(n,"fullDate");i=xo(Do(n,ze.Full),[u,d]);break}return i&&(So[e][t]=i),i}function xo(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function yt(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,s=e));let o=String(n);for(;o.length<t;)o="0"+o;return i&&(o=o.slice(o.length-t)),s+o}function Dv(n,t){return yt(n,3).substring(0,t)}function de(n,t,e=0,i=!1,r=!1){return function(s,o){let a=Sv(n,s);if((e>0||a>-e)&&(a+=e),n===q.Hours)a===0&&e===-12&&(a=12);else if(n===q.FractionalSeconds)return Dv(a,t);let l=To(o,pn.MinusSign);return yt(a,t,l,i,r)}}function Sv(n,t){switch(n){case q.FullYear:return t.getFullYear();case q.Month:return t.getMonth();case q.Date:return t.getDate();case q.Hours:return t.getHours();case q.Minutes:return t.getMinutes();case q.Seconds:return t.getSeconds();case q.FractionalSeconds:return t.getMilliseconds();case q.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function se(n,t,e=Te.Format,i=!1){return function(r,s){return xv(r,s,n,t,e,i)}}function xv(n,t,e,i,r,s){switch(e){case G.Months:return mv(t,r,i)[n.getMonth()];case G.Days:return gv(t,r,i)[n.getDay()];case G.DayPeriods:let o=n.getHours(),a=n.getMinutes();if(s){let c=vv(t),u=_v(t,r,i),d=c.findIndex(h=>{if(Array.isArray(h)){let[f,p]=h,g=o>=f.hours&&a>=f.minutes,y=o<p.hours||o===p.hours&&a<p.minutes;if(f.hours<p.hours){if(g&&y)return!0}else if(g||y)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return pv(t,r,i)[o<12?0:1];case G.Eras:return yv(t,i)[n.getFullYear()<=0?0:1];default:let l=e;throw new Error(`unexpected translation type ${l}`)}}function Eo(n){return function(t,e,i){let r=-1*i,s=To(e,pn.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case qt.Short:return(r>=0?"+":"")+yt(o,2,s)+yt(Math.abs(r%60),2,s);case qt.ShortGMT:return"GMT"+(r>=0?"+":"")+yt(o,1,s);case qt.Long:return"GMT"+(r>=0?"+":"")+yt(o,2,s)+":"+yt(Math.abs(r%60),2,s);case qt.Extended:return i===0?"Z":(r>=0?"+":"")+yt(o,2,s)+":"+yt(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var Ev=0,ko=4;function Mv(n){let t=Oo(n,Ev,1).getDay();return Oo(n,0,1+(t<=ko?ko:ko+7)-t)}function bf(n){let t=n.getDay(),e=t===0?-3:ko-t;return Oo(n.getFullYear(),n.getMonth(),n.getDate()+e)}function Ql(n,t=!1){return function(e,i){let r;if(t){let s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,o=e.getDate();r=1+Math.floor((o+s)/7)}else{let s=bf(e),o=Mv(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return yt(r,n,To(i,pn.MinusSign))}}function Mo(n,t=!1){return function(e,i){let s=bf(e).getFullYear();return yt(s,n,To(i,pn.MinusSign),t)}}var Xl={};function kv(n){if(Xl[n])return Xl[n];let t;switch(n){case"G":case"GG":case"GGG":t=se(G.Eras,ie.Abbreviated);break;case"GGGG":t=se(G.Eras,ie.Wide);break;case"GGGGG":t=se(G.Eras,ie.Narrow);break;case"y":t=de(q.FullYear,1,0,!1,!0);break;case"yy":t=de(q.FullYear,2,0,!0,!0);break;case"yyy":t=de(q.FullYear,3,0,!1,!0);break;case"yyyy":t=de(q.FullYear,4,0,!1,!0);break;case"Y":t=Mo(1);break;case"YY":t=Mo(2,!0);break;case"YYY":t=Mo(3);break;case"YYYY":t=Mo(4);break;case"M":case"L":t=de(q.Month,1,1);break;case"MM":case"LL":t=de(q.Month,2,1);break;case"MMM":t=se(G.Months,ie.Abbreviated);break;case"MMMM":t=se(G.Months,ie.Wide);break;case"MMMMM":t=se(G.Months,ie.Narrow);break;case"LLL":t=se(G.Months,ie.Abbreviated,Te.Standalone);break;case"LLLL":t=se(G.Months,ie.Wide,Te.Standalone);break;case"LLLLL":t=se(G.Months,ie.Narrow,Te.Standalone);break;case"w":t=Ql(1);break;case"ww":t=Ql(2);break;case"W":t=Ql(1,!0);break;case"d":t=de(q.Date,1);break;case"dd":t=de(q.Date,2);break;case"c":case"cc":t=de(q.Day,1);break;case"ccc":t=se(G.Days,ie.Abbreviated,Te.Standalone);break;case"cccc":t=se(G.Days,ie.Wide,Te.Standalone);break;case"ccccc":t=se(G.Days,ie.Narrow,Te.Standalone);break;case"cccccc":t=se(G.Days,ie.Short,Te.Standalone);break;case"E":case"EE":case"EEE":t=se(G.Days,ie.Abbreviated);break;case"EEEE":t=se(G.Days,ie.Wide);break;case"EEEEE":t=se(G.Days,ie.Narrow);break;case"EEEEEE":t=se(G.Days,ie.Short);break;case"a":case"aa":case"aaa":t=se(G.DayPeriods,ie.Abbreviated);break;case"aaaa":t=se(G.DayPeriods,ie.Wide);break;case"aaaaa":t=se(G.DayPeriods,ie.Narrow);break;case"b":case"bb":case"bbb":t=se(G.DayPeriods,ie.Abbreviated,Te.Standalone,!0);break;case"bbbb":t=se(G.DayPeriods,ie.Wide,Te.Standalone,!0);break;case"bbbbb":t=se(G.DayPeriods,ie.Narrow,Te.Standalone,!0);break;case"B":case"BB":case"BBB":t=se(G.DayPeriods,ie.Abbreviated,Te.Format,!0);break;case"BBBB":t=se(G.DayPeriods,ie.Wide,Te.Format,!0);break;case"BBBBB":t=se(G.DayPeriods,ie.Narrow,Te.Format,!0);break;case"h":t=de(q.Hours,1,-12);break;case"hh":t=de(q.Hours,2,-12);break;case"H":t=de(q.Hours,1);break;case"HH":t=de(q.Hours,2);break;case"m":t=de(q.Minutes,1);break;case"mm":t=de(q.Minutes,2);break;case"s":t=de(q.Seconds,1);break;case"ss":t=de(q.Seconds,2);break;case"S":t=de(q.FractionalSeconds,1);break;case"SS":t=de(q.FractionalSeconds,2);break;case"SSS":t=de(q.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Eo(qt.Short);break;case"ZZZZZ":t=Eo(qt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Eo(qt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Eo(qt.Long);break;default:return null}return Xl[n]=t,t}function wf(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function Av(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function Ov(n,t,e){let i=e?-1:1,r=n.getTimezoneOffset(),s=wf(t,r);return Av(n,i*(s-r))}function Iv(n){if(cf(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,s=1,o=1]=n.split("-").map(a=>+a);return Oo(r,s-1,o)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(bv))return Tv(i)}let t=new Date(n);if(!cf(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function Tv(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-e,a=Number(n[5]||0)-i,l=Number(n[6]||0),c=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(t,o,a,l,c),t}function cf(n){return n instanceof Date&&!isNaN(n.valueOf())}function Cf(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,s]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}var ec=/\s+/,uf=[],$r=(()=>{class n{constructor(e,i){this._ngEl=e,this._renderer=i,this.initialClasses=uf,this.stateMap=new Map}set klass(e){this.initialClasses=e!=null?e.trim().split(ec):uf}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(ec):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(ec).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(i){return new(i||n)(w(Ie),w(ft))}}static{this.\u0275dir=le({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var tc=class{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ro=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;if(!this._differ&&e)if(0)try{}catch{}else this._differ=this._differs.find(e).create(this.ngForTrackBy)}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,s,o)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new tc(r.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)i.remove(s===null?void 0:s);else if(s!==null){let a=i.get(s);i.move(a,o),df(a,r)}});for(let r=0,s=i.length;r<s;r++){let a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);df(s,r)})}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(w(Pi),w(ql),w(Xh))}}static{this.\u0275dir=le({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function df(n,t){n.context.$implicit=t.item}var Bn=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new nc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){hf("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){hf("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(w(Pi),w(ql))}}static{this.\u0275dir=le({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),nc=class{constructor(){this.$implicit=null,this.ngIf=null}};function hf(n,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${vh(t)}'.`)}var Df=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){let[r,s]=e.split("."),o=r.indexOf("-")===-1?void 0:Ln.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static{this.\u0275fac=function(i){return new(i||n)(w(Ie),w(Yl),w(ft))}}static{this.\u0275dir=le({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),Sf=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static{this.\u0275fac=function(i){return new(i||n)(w(Pi))}}static{this.\u0275dir=le({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Xe]})}}return n})();function xf(n,t){return new ee(2100,!1)}var ic=class{createSubscription(t,e){return mt(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){mt(()=>t.unsubscribe())}},rc=class{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}},Rv=new rc,Nv=new ic,$n=(()=>{class n{constructor(e){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(Bi(e))return Rv;if(Jh(e))return Nv;throw xf(n,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(i){return new(i||n)(w(At,16))}}static{this.\u0275pipe=Ii({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var Pv="mediumDate",Fv=new te(""),Lv=new te(""),Ef=(()=>{class n{constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,s){if(e==null||e===""||e!==e)return null;try{let o=i??this.defaultOptions?.dateFormat??Pv,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Cv(e,o,s||this.locale,a)}catch(o){throw xf(n,o.message)}}static{this.\u0275fac=function(i){return new(i||n)(w(Qh,16),w(Fv,24),w(Lv,24))}}static{this.\u0275pipe=Ii({name:"date",type:n,pure:!0,standalone:!0})}}return n})();function Vv(n,t){return{key:n,value:t}}var Mf=(()=>{class n{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=ff}transform(e,i=ff){if(!e||!(e instanceof Map)&&typeof e!="object")return null;this.differ??=this.differs.find(e).create();let r=this.differ.diff(e),s=i!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(o=>{this.keyValues.push(Vv(o.key,o.currentValue))})),(r||s)&&(this.keyValues.sort(i),this.compareFn=i),this.keyValues}static{this.\u0275fac=function(i){return new(i||n)(w(Yl,16))}}static{this.\u0275pipe=Ii({name:"keyvalue",type:n,pure:!1,standalone:!0})}}return n})();function ff(n,t){let e=n.key,i=t.key;if(e===i)return 0;if(e===void 0)return 1;if(i===void 0)return-1;if(e===null)return 1;if(i===null)return-1;if(typeof e=="string"&&typeof i=="string")return e<i?-1:1;if(typeof e=="number"&&typeof i=="number")return e-i;if(typeof e=="boolean"&&typeof i=="boolean")return e<i?-1:1;let r=String(e),s=String(i);return r==s?0:r<s?-1:1}var No=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ht({type:n})}static{this.\u0275inj=dt({})}}return n})(),kf="browser",Bv="server";function oc(n){return n===Bv}var Io=class{};var cc=class extends Ao{constructor(){super(...arguments),this.supportsDOMEvents=!0}},uc=class n extends cc{static makeCurrent(){gf(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=zv();return e==null?null:Uv(e)}resetBaseElement(){jr=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Cf(document.cookie,t)}},jr=null;function zv(){return jr=jr||document.querySelector("base"),jr?jr.getAttribute("href"):null}function Uv(n){return new URL(n,document.baseURI).pathname}var Hv=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})(),dc=new te(""),Rf=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new ee(5101,!1);return this._eventNameToPlugin.set(e,i),i}static{this.\u0275fac=function(i){return new(i||n)(H(dc),H(Rn))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})(),Po=class{constructor(t){this._doc=t}},ac="ng-app-id",Nf=(()=>{class n{constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=oc(s),this.resetHostNodes()}addStyles(e){for(let i of e)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(e){for(let i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){let i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${ac}="${this.appId}"]`);if(e?.length){let i=new Map;return e.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){let r=this.styleRef;if(r.has(e)){let s=r.get(e);return s.usage+=i,s.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){let r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===e)return r.delete(i),s.removeAttribute(ac),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(ac,this.appId),e.appendChild(o),o}}addStyleToHost(e,i){let r=this.getStyleElement(e,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(H(Ue),H(Hl),H(Gl,8),H(Ri))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})(),lc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},fc=/%COMP%/g,Pf="%COMP%",Gv=`_nghost-${Pf}`,qv=`_ngcontent-${Pf}`,Wv=!0,Kv=new te("",{providedIn:"root",factory:()=>Wv});function Jv(n){return qv.replace(fc,n)}function Yv(n){return Gv.replace(fc,n)}function Ff(n,t){return t.map(e=>e.replace(fc,n))}var Of=(()=>{class n{constructor(e,i,r,s,o,a,l,c=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=oc(a),this.defaultRenderer=new zr(e,o,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Nr.ShadowDom&&(i=$(D({},i),{encapsulation:Nr.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof Fo?r.applyToHost(e):r instanceof Ur&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Nr.Emulated:s=new Fo(l,c,i,this.appId,u,o,a,d);break;case Nr.ShadowDom:return new hc(l,c,e,i,o,a,this.nonce,d);default:s=new Ur(l,c,i,u,o,a,d);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(H(Rf),H(Nf),H(Hl),H(Kv),H(Ue),H(Ri),H(Rn),H(Gl))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})(),zr=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(lc[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(If(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(If(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new ee(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=lc[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=lc[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(Ln.DashCase|Ln.Important)?t.style.setProperty(e,i,r&Ln.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Ln.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=Wt().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function If(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hc=class extends zr{constructor(t,e,i,r,s,o,a,l){super(t,s,o,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Ff(r.id,r.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ur=class extends zr{constructor(t,e,i,r,s,o,a,l){super(t,s,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?Ff(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Fo=class extends Ur{constructor(t,e,i,r,s,o,a,l){let c=r+"-"+i.id;super(t,e,i,s,o,a,l,c),this.contentAttr=Jv(c),this.hostAttr=Yv(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},Zv=(()=>{class n extends Po{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(H(Ue))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})(),Tf=["alt","control","meta","shift"],Qv={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xv={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},e_=(()=>{class n extends Po{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r){let s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wt().onAndCancel(e,s.domEventName,o))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),Tf.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(e,i){let r=Qv[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),Tf.forEach(o=>{if(o!==r){let a=Xv[o];a(e)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(i){return new(i||n)(H(Ue))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})();function Lf(n,t){return ef(D({rootComponent:n},t_(t)))}function t_(n){return{appProviders:[...o_,...n?.providers??[]],platformProviders:s_}}function n_(){uc.makeCurrent()}function i_(){return new Ul}function r_(){return Ch(document),document}var s_=[{provide:Ri,useValue:kf},{provide:Dh,useValue:n_,multi:!0},{provide:Ue,useFactory:r_,deps:[]}];var o_=[{provide:bh,useValue:"root"},{provide:Ul,useFactory:i_,deps:[]},{provide:dc,useClass:Zv,multi:!0,deps:[Ue,Rn,Ri]},{provide:dc,useClass:e_,multi:!0,deps:[Ue]},Of,Nf,Rf,{provide:Nh,useExisting:Of},{provide:Io,useClass:Hv,deps:[]},[]];var Vf=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(i){return new(i||n)(H(Ue))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Hr=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=H(a_),r},providedIn:"root"})}}return n})(),a_=(()=>{class n extends Hr{constructor(e){super(),this._doc=e}sanitize(e,i){if(i==null)return null;switch(e){case Pn.NONE:return i;case Pn.HTML:return Ni(i,"HTML")?Nn(i):Oh(this._doc,String(i)).toString();case Pn.STYLE:return Ni(i,"Style")?Nn(i):i;case Pn.SCRIPT:if(Ni(i,"Script"))return Nn(i);throw new ee(5200,!1);case Pn.URL:return Ni(i,"URL")?Nn(i):Ah(String(i));case Pn.RESOURCE_URL:if(Ni(i,"ResourceURL"))return Nn(i);throw new ee(5201,!1);default:throw new ee(5202,!1)}}bypassSecurityTrustHtml(e){return Sh(e)}bypassSecurityTrustStyle(e){return xh(e)}bypassSecurityTrustScript(e){return Eh(e)}bypassSecurityTrustUrl(e){return Mh(e)}bypassSecurityTrustResourceUrl(e){return kh(e)}static{this.\u0275fac=function(i){return new(i||n)(H(Ue))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var P="primary",as=Symbol("RouteTitle"),_c=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function qi(n){return new _c(n)}function l_(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function c_(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Ot(n[e],t[e]))return!1;return!0}function Ot(n,t){let e=n?bc(n):void 0,i=t?bc(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!qf(n[r],t[r]))return!1;return!0}function bc(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function qf(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function Wf(n){return n.length>0?n[n.length-1]:null}function mn(n){return go(n)?n:Bi(n)?je(Promise.resolve(n)):I(n)}var u_={exact:Jf,subset:Yf},Kf={exact:d_,subset:h_,ignored:()=>!0};function Bf(n,t,e){return u_[e.paths](n.root,t.root,e.matrixParams)&&Kf[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function d_(n,t){return Ot(n,t)}function Jf(n,t,e){if(!zn(n.segments,t.segments)||!Bo(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!Jf(n.children[i],t.children[i],e))return!1;return!0}function h_(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>qf(n[e],t[e]))}function Yf(n,t,e){return Zf(n,t,t.segments,e)}function Zf(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!zn(r,e)||t.hasChildren()||!Bo(r,e,i))}else if(n.segments.length===e.length){if(!zn(n.segments,e)||!Bo(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!Yf(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!zn(n.segments,r)||!Bo(n.segments,r,i)||!n.children[P]?!1:Zf(n.children[P],t,s,i)}}function Bo(n,t,e){return t.every((i,r)=>Kf[e](n[r].parameters,i.parameters))}var Jt=class{constructor(t=new K([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=qi(this.queryParams),this._queryParamMap}toString(){return g_.serialize(this)}},K=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $o(this)}},jn=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=qi(this.parameters),this._parameterMap}toString(){return Xf(this)}};function f_(n,t){return zn(n,t)&&n.every((e,i)=>Ot(e.parameters,t[i].parameters))}function zn(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function p_(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===P&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==P&&(e=e.concat(t(r,i)))}),e}var qc=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:()=>new Zr,providedIn:"root"})}}return n})(),Zr=class{parse(t){let e=new Cc(t);return new Jt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Gr(t.root,!0)}`,i=v_(t.queryParams),r=typeof t.fragment=="string"?`#${m_(t.fragment)}`:"";return`${e}${i}${r}`}},g_=new Zr;function $o(n){return n.segments.map(t=>Xf(t)).join("/")}function Gr(n,t){if(!n.hasChildren())return $o(n);if(t){let e=n.children[P]?Gr(n.children[P],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==P&&i.push(`${r}:${Gr(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=p_(n,(i,r)=>r===P?[Gr(n.children[P],!1)]:[`${r}:${Gr(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[P]!=null?`${$o(n)}/${e[0]}`:`${$o(n)}/(${e.join("//")})`}}function Qf(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lo(n){return Qf(n).replace(/%3B/gi,";")}function m_(n){return encodeURI(n)}function wc(n){return Qf(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jo(n){return decodeURIComponent(n)}function $f(n){return jo(n.replace(/\+/g,"%20"))}function Xf(n){return`${wc(n.path)}${y_(n.parameters)}`}function y_(n){return Object.entries(n).map(([t,e])=>`;${wc(t)}=${wc(e)}`).join("")}function v_(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${Lo(e)}=${Lo(r)}`).join("&"):`${Lo(e)}=${Lo(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var __=/^[^\/()?;#]+/;function gc(n){let t=n.match(__);return t?t[0]:""}var b_=/^[^\/()?;=#]+/;function w_(n){let t=n.match(b_);return t?t[0]:""}var C_=/^[^=?&#]+/;function D_(n){let t=n.match(C_);return t?t[0]:""}var S_=/^[^&#]+/;function x_(n){let t=n.match(S_);return t?t[0]:""}var Cc=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new K([],{}):new K([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[P]=new K(t,e)),i}parseSegment(){let t=gc(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(t),new jn(jo(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=w_(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=gc(this.remaining);r&&(i=r,this.capture(i))}t[jo(e)]=jo(i)}parseQueryParam(t){let e=D_(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=x_(this.remaining);o&&(i=o,this.capture(i))}let r=$f(e),s=$f(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=gc(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ee(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=P);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[P]:new K([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new ee(4011,!1)}};function ep(n){return n.segments.length>0?new K([],{[P]:n}):n}function tp(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=tp(r);if(i===P&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new K(n.segments,t);return E_(e)}function E_(n){if(n.numberOfChildren===1&&n.children[P]){let t=n.children[P];return new K(n.segments.concat(t.segments),t.children)}return n}function Un(n){return n instanceof Jt}function M_(n,t,e=null,i=null){let r=np(n);return ip(r,t,e,i)}function np(n){let t;function e(s){let o={};for(let l of s.children){let c=e(l);o[l.outlet]=c}let a=new K(s.url,o);return s===n&&(t=a),a}let i=e(n.root),r=ep(i);return t??r}function ip(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return mc(r,r,r,e,i);let s=k_(t);if(s.toRoot())return mc(r,r,new K([],{}),e,i);let o=A_(s,r,n),a=o.processChildren?Kr(o.segmentGroup,o.index,s.commands):sp(o.segmentGroup,o.index,s.commands);return mc(r,o.segmentGroup,a,e,i)}function zo(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Qr(n){return typeof n=="object"&&n!=null&&n.outlets}function mc(n,t,e,i,r){let s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;n===t?o=e:o=rp(n,t,e);let a=ep(tp(o));return new Jt(a,s,r)}function rp(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=rp(s,t,e)}),new K(n.segments,i)}var Uo=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&zo(i[0]))throw new ee(4003,!1);let r=i.find(Qr);if(r&&r!==Wf(i))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function k_(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Uo(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new Uo(e,t,i)}var Ui=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function A_(n,t,e){if(n.isAbsolute)return new Ui(t,!0,0);if(!e)return new Ui(t,!1,NaN);if(e.parent===null)return new Ui(e,!0,0);let i=zo(n.commands[0])?0:1,r=e.segments.length-1+i;return O_(e,r,n.numberOfDoubleDots)}function O_(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new ee(4005,!1);r=i.segments.length}return new Ui(i,!1,r-s)}function I_(n){return Qr(n[0])?n[0].outlets:{[P]:n}}function sp(n,t,e){if(n??=new K([],{}),n.segments.length===0&&n.hasChildren())return Kr(n,t,e);let i=T_(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new K(n.segments.slice(0,i.pathIndex),{});return s.children[P]=new K(n.segments.slice(i.pathIndex),n.children),Kr(s,0,r)}else return i.match&&r.length===0?new K(n.segments,{}):i.match&&!n.hasChildren()?Dc(n,t,e):i.match?Kr(n,0,r):Dc(n,t,e)}function Kr(n,t,e){if(e.length===0)return new K(n.segments,{});{let i=I_(e),r={};if(Object.keys(i).some(s=>s!==P)&&n.children[P]&&n.numberOfChildren===1&&n.children[P].segments.length===0){let s=Kr(n.children[P],t,e);return new K(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=sp(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new K(n.segments,r)}}function T_(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let o=n.segments[r],a=e[i];if(Qr(a))break;let l=`${a}`,c=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!zf(l,c,o))return s;i+=2}else{if(!zf(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Dc(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(Qr(s)){let l=R_(s.outlets);return new K(i,l)}if(r===0&&zo(e[0])){let l=n.segments[t];i.push(new jn(l.path,jf(e[0]))),r++;continue}let o=Qr(s)?s.outlets[P]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&zo(a)?(i.push(new jn(o,jf(a))),r+=2):(i.push(new jn(o,{})),r++)}return new K(i,{})}function R_(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=Dc(new K([],{}),0,i))}),t}function jf(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function zf(n,t,e){return n==e.path&&Ot(t,e.parameters)}var Jr="imperative",ve=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ve||{}),rt=class{constructor(t,e){this.id=t,this.url=e}},Xr=class extends rt{constructor(t,e,i="imperative",r=null){super(t,e),this.type=ve.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},gn=class extends rt{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=ve.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ge=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ge||{}),Sc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Sc||{}),Kt=class extends rt{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=ve.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Hn=class extends rt{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=ve.NavigationSkipped}},es=class extends rt{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=ve.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ho=class extends rt{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=ve.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xc=class extends rt{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=ve.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ec=class extends rt{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=ve.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Mc=class extends rt{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=ve.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kc=class extends rt{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=ve.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ac=class{constructor(t){this.route=t,this.type=ve.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Oc=class{constructor(t){this.route=t,this.type=ve.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ic=class{constructor(t){this.snapshot=t,this.type=ve.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tc=class{constructor(t){this.snapshot=t,this.type=ve.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rc=class{constructor(t){this.snapshot=t,this.type=ve.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nc=class{constructor(t){this.snapshot=t,this.type=ve.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ts=class{},Wi=class{constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function N_(n,t){return n.providers&&!n._injector&&(n._injector=Fh(n.providers,t,`Route: ${n.path}`)),n._injector??t}function vt(n){return n.outlet||P}function P_(n,t){let e=n.filter(i=>vt(i)===t);return e.push(...n.filter(i=>vt(i)!==t)),e}function ls(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Pc=class{get injector(){return ls(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new Zo(this.rootInjector),this.attachRef=null}},Zo=(()=>{class n{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Pc(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(i){return new(i||n)(H(vo))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Go=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Fc(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=Fc(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Lc(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Lc(t,this._root).map(e=>e.value)}};function Fc(n,t){if(n===t.value)return t;for(let e of t.children){let i=Fc(n,e);if(i)return i}return null}function Lc(n,t){if(n===t.value)return[t];for(let e of t.children){let i=Lc(n,e);if(i.length)return i.unshift(t),i}return[]}var He=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function zi(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var qo=class extends Go{constructor(t,e){super(t),this.snapshot=e,Wc(this,t)}toString(){return this.snapshot.toString()}};function op(n){let t=F_(n),e=new Ze([new jn("",{})]),i=new Ze({}),r=new Ze({}),s=new Ze({}),o=new Ze(""),a=new Gn(e,i,s,o,r,P,n,t.root);return a.snapshot=t.root,new qo(new He(a,[]),t)}function F_(n){let t={},e={},i={},r="",s=new Hi([],t,i,r,e,P,n,null,{});return new Ko("",new He(s,[]))}var Gn=class{constructor(t,e,i,r,s,o,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Z(c=>c[as]))??I(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Z(t=>qi(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Z(t=>qi(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Wo(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:D(D({},t.params),n.params),data:D(D({},t.data),n.data),resolve:D(D(D(D({},n.data),t.data),r?.data),n._resolvedData)}:i={params:D({},n.params),data:D({},n.data),resolve:D(D({},n.data),n._resolvedData??{})},r&&lp(r)&&(i.resolve[as]=r.title),i}var Hi=class{get title(){return this.data?.[as]}constructor(t,e,i,r,s,o,a,l,c){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=qi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=qi(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Ko=class extends Go{constructor(t,e){super(e),this.url=t,Wc(this,e)}toString(){return ap(this._root)}};function Wc(n,t){t.value._routerState=n,t.children.forEach(e=>Wc(n,e))}function ap(n){let t=n.children.length>0?` { ${n.children.map(ap).join(", ")} } `:"";return`${n.value}${t}`}function yc(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Ot(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Ot(t.params,e.params)||n.paramsSubject.next(e.params),c_(t.url,e.url)||n.urlSubject.next(e.url),Ot(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Vc(n,t){let e=Ot(n.params,t.params)&&f_(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||Vc(n.parent,t.parent))}function lp(n){return typeof n.title=="string"||n.title===null}var Kc=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=P,this.activateEvents=new ye,this.deactivateEvents=new ye,this.attachEvents=new ye,this.detachEvents=new ye,this.parentContexts=T(Zo),this.location=T(Pi),this.changeDetector=T(At),this.inputBinder=T(Jc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=e;let r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Bc(e,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=le({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Xe]})}}return n})(),Bc=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Gn?this.route:t===Zo?this.childContexts:this.parent.get(t,e)}},Jc=new te("");function L_(n,t,e){let i=ns(n,t._root,e?e._root:void 0);return new qo(i,t)}function ns(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=V_(n,t,e);return new He(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>ns(n,a)),o}}let i=B_(t.value),r=t.children.map(s=>ns(n,s));return new He(i,r)}}function V_(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ns(n,i,r);return ns(n,i)})}function B_(n){return new Gn(new Ze(n.url),new Ze(n.params),new Ze(n.queryParams),new Ze(n.fragment),new Ze(n.data),n.outlet,n.component,n)}var is=class{constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},cp="ngNavigationCancelingError";function Jo(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Un(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=up(!1,Ge.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function up(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[cp]=!0,e.cancellationCode=t,e}function $_(n){return dp(n)&&Un(n.url)}function dp(n){return!!n&&n[cp]}var j_=(n,t,e,i)=>Z(r=>(new $c(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),$c=class{constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),yc(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=zi(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=zi(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=zi(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=zi(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Nc(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Tc(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(yc(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),yc(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,i)}},Yo=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Gi=class{constructor(t,e){this.component=t,this.route=e}};function z_(n,t,e){let i=n._root,r=t?t._root:null;return qr(i,r,e,[i.value])}function U_(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Ji(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!_h(n)?n:t.get(n):i}function qr(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=zi(t);return n.children.forEach(o=>{H_(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Yr(a,e.getContext(o),r)),r}function H_(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=G_(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Yo(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?qr(n,t,a?a.children:null,i,r):qr(n,t,e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Gi(a.outlet.component,o))}else o&&Yr(t,a,r),r.canActivateChecks.push(new Yo(i)),s.component?qr(n,null,a?a.children:null,i,r):qr(n,null,e,i,r);return r}function G_(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!zn(n.url,t.url);case"pathParamsOrQueryParamsChange":return!zn(n.url,t.url)||!Ot(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vc(n,t)||!Ot(n.queryParams,t.queryParams);case"paramsChange":default:return!Vc(n,t)}}function Yr(n,t,e){let i=zi(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?t?Yr(o,t.children.getContext(s),e):Yr(o,null,e):Yr(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Gi(t.outlet.component,r)):e.canDeactivateChecks.push(new Gi(null,r)):e.canDeactivateChecks.push(new Gi(null,r))}function cs(n){return typeof n=="function"}function q_(n){return typeof n=="boolean"}function W_(n){return n&&cs(n.canLoad)}function K_(n){return n&&cs(n.canActivate)}function J_(n){return n&&cs(n.canActivateChild)}function Y_(n){return n&&cs(n.canDeactivate)}function Z_(n){return n&&cs(n.canMatch)}function hp(n){return n instanceof dh||n?.name==="EmptyError"}var Vo=Symbol("INITIAL_VALUE");function Ki(){return Ct(n=>Fl(n.map(t=>t.pipe(Oi(1),yh(Vo)))).pipe(Z(t=>{for(let e of t)if(e!==!0){if(e===Vo)return Vo;if(e===!1||Q_(e))return e}return!0}),ki(t=>t!==Vo),Oi(1)))}function Q_(n){return Un(n)||n instanceof is}function X_(n,t){return Qe(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?I($(D({},e),{guardsResult:!0})):eb(o,i,r,n).pipe(Qe(a=>a&&q_(a)?tb(i,s,n,t):I(a)),Z(a=>$(D({},e),{guardsResult:a})))})}function eb(n,t,e,i){return je(n).pipe(Qe(r=>ob(r.component,r.route,e,t,i)),dn(r=>r!==!0,!0))}function tb(n,t,e,i){return je(t).pipe(Rr(r=>hh(ib(r.route.parent,i),nb(r.route,i),sb(n,r.path,e),rb(n,r.route,e))),dn(r=>r!==!0,!0))}function nb(n,t){return n!==null&&t&&t(new Rc(n)),I(!0)}function ib(n,t){return n!==null&&t&&t(new Ic(n)),I(!0)}function rb(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return I(!0);let r=i.map(s=>Ll(()=>{let o=ls(t)??e,a=Ji(s,o),l=K_(a)?a.canActivate(t,n):zt(o,()=>a(t,n));return mn(l).pipe(dn())}));return I(r).pipe(Ki())}function sb(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>U_(o)).filter(o=>o!==null).map(o=>Ll(()=>{let a=o.guards.map(l=>{let c=ls(o.node)??e,u=Ji(l,c),d=J_(u)?u.canActivateChild(i,n):zt(c,()=>u(i,n));return mn(d).pipe(dn())});return I(a).pipe(Ki())}));return I(s).pipe(Ki())}function ob(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return I(!0);let o=s.map(a=>{let l=ls(t)??r,c=Ji(a,l),u=Y_(c)?c.canDeactivate(n,t,e,i):zt(l,()=>c(n,t,e,i));return mn(u).pipe(dn())});return I(o).pipe(Ki())}function ab(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return I(!0);let s=r.map(o=>{let a=Ji(o,n),l=W_(a)?a.canLoad(t,e):zt(n,()=>a(t,e));return mn(l)});return I(s).pipe(Ki(),fp(i))}function fp(n){return ch(De(t=>{if(typeof t!="boolean")throw Jo(n,t)}),Z(t=>t===!0))}function lb(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return I(!0);let s=r.map(o=>{let a=Ji(o,n),l=Z_(a)?a.canMatch(t,e):zt(n,()=>a(t,e));return mn(l)});return I(s).pipe(Ki(),fp(i))}var rs=class{constructor(t){this.segmentGroup=t||null}},ss=class extends Error{constructor(t){super(),this.urlTree=t}};function ji(n){return Tr(new rs(n))}function cb(n){return Tr(new ee(4e3,!1))}function ub(n){return Tr(up(!1,Ge.GuardRejected))}var jc=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return I(i);if(r.numberOfChildren>1||!r.children[P])return cb(`${t.redirectTo}`);r=r.children[P]}}applyRedirectCommands(t,e,i,r,s){if(typeof e!="string"){let a=e,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:f,data:p,title:g}=r,y=zt(s,()=>a({params:f,data:p,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:g}));if(y instanceof Jt)throw new ss(y);e=y}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new ss(o);return o}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new Jt(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=e[a]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,i,r)}),new K(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new ee(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},zc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function db(n,t,e,i,r){let s=pp(n,t,e);return s.matched?(i=N_(t,i),lb(i,t,e,r).pipe(Z(o=>o===!0?s:D({},zc)))):I(s)}function pp(n,t,e){if(t.path==="**")return hb(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?D({},zc):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||l_)(e,n,t);if(!r)return D({},zc);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?D(D({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function hb(n){return{matched:!0,parameters:n.length>0?Wf(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Uf(n,t,e,i){return e.length>0&&gb(n,e,i)?{segmentGroup:new K(t,pb(i,new K(e,n.children))),slicedSegments:[]}:e.length===0&&mb(n,e,i)?{segmentGroup:new K(n.segments,fb(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new K(n.segments,n.children),slicedSegments:e}}function fb(n,t,e,i){let r={};for(let s of e)if(Qo(n,t,s)&&!i[vt(s)]){let o=new K([],{});r[vt(s)]=o}return D(D({},i),r)}function pb(n,t){let e={};e[P]=t;for(let i of n)if(i.path===""&&vt(i)!==P){let r=new K([],{});e[vt(i)]=r}return e}function gb(n,t,e){return e.some(i=>Qo(n,t,i)&&vt(i)!==P)}function mb(n,t,e){return e.some(i=>Qo(n,t,i))}function Qo(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function yb(n,t,e){return t.length===0&&!n.children[e]}var Uc=class{};function vb(n,t,e,i,r,s,o="emptyOnly"){return new Hc(n,t,e,i,r,o,s).recognize()}var _b=31,Hc=class{constructor(t,e,i,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new jc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new ee(4002,`'${t.segmentGroup}'`)}recognize(){let t=Uf(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Z(({children:e,rootSnapshot:i})=>{let r=new He(i,e),s=new Ko("",r),o=M_(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new Hi([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),P,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,P,e).pipe(Z(i=>({children:i,rootSnapshot:e})),Ai(i=>{if(i instanceof ss)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof rs?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,s):this.processSegment(t,e,i,i.segments,r,!0,s).pipe(Z(o=>o instanceof He?[o]:[]))}processChildren(t,e,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return je(s).pipe(Rr(o=>{let a=i.children[o],l=P_(e,o);return this.processSegmentGroup(t,l,a,o,r)}),mh((o,a)=>(o.push(...a),o)),Vl(null),gh(),Qe(o=>{if(o===null)return ji(i);let a=gp(o);return bb(a),I(a)}))}processSegment(t,e,i,r,s,o,a){return je(e).pipe(Rr(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,i,r,s,o,a).pipe(Ai(c=>{if(c instanceof rs)return I(null);throw c}))),dn(l=>!!l),Ai(l=>{if(hp(l))return yb(i,r,s)?I(new Uc):ji(i);throw l}))}processSegmentAgainstRoute(t,e,i,r,s,o,a,l){return vt(i)!==o&&(o===P||!Qo(r,s,i))?ji(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,o,l):ji(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=pp(e,r,s);if(!l)return ji(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>_b&&(this.allowRedirects=!1));let f=new Hi(s,c,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Hf(r),vt(r),r.component??r._loadedComponent??null,r,Gf(r)),p=Wo(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let g=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,f,t);return this.applyRedirects.lineralizeSegments(r,g).pipe(Qe(y=>this.processSegment(t,i,e,y.concat(h),o,!1,a)))}matchSegmentAgainstRoute(t,e,i,r,s,o){let a=db(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(Ct(l=>l.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(Ct(({routes:c})=>{let u=i._loadedInjector??t,{parameters:d,consumedSegments:h,remainingSegments:f}=l,p=new Hi(h,d,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Hf(i),vt(i),i.component??i._loadedComponent??null,i,Gf(i)),g=Wo(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let{segmentGroup:y,slicedSegments:C}=Uf(e,h,f,c);if(C.length===0&&y.hasChildren())return this.processChildren(u,c,y,p).pipe(Z(W=>new He(p,W)));if(c.length===0&&C.length===0)return I(new He(p,[]));let B=vt(i)===s;return this.processSegment(u,c,y,C,B?P:s,!0,p).pipe(Z(W=>new He(p,W instanceof He?[W]:[])))}))):ji(e)))}getChildConfig(t,e,i){return e.children?I({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?I({routes:e._loadedRoutes,injector:e._loadedInjector}):ab(t,e,i,this.urlSerializer).pipe(Qe(r=>r?this.configLoader.loadChildren(t,e).pipe(De(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):ub(e))):I({routes:[],injector:t})}};function bb(n){n.sort((t,e)=>t.value.outlet===P?-1:e.value.outlet===P?1:t.value.outlet.localeCompare(e.value.outlet))}function wb(n){let t=n.value.routeConfig;return t&&t.path===""}function gp(n){let t=[],e=new Set;for(let i of n){if(!wb(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=gp(i.children);t.push(new He(i.value,r))}return t.filter(i=>!e.has(i))}function Hf(n){return n.data||{}}function Gf(n){return n.resolve||{}}function Cb(n,t,e,i,r,s){return Qe(o=>vb(n,t,e,i,o.extractedUrl,r,s).pipe(Z(({state:a,tree:l})=>$(D({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function Db(n,t){return Qe(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return I(e);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of mp(l))o.add(c);let a=0;return je(o).pipe(Rr(l=>s.has(l)?Sb(l,i,n,t):(l.data=Wo(l,l.parent,n).resolve,I(void 0))),De(()=>a++),Bl(1),Qe(l=>a===o.size?I(e):un))})}function mp(n){let t=n.children.map(e=>mp(e)).flat();return[n,...t]}function Sb(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!lp(r)&&(s[as]=r.title),xb(s,n,t,i).pipe(Z(o=>(n._resolvedData=o,n.data=Wo(n,n.parent,e).resolve,null)))}function xb(n,t,e,i){let r=bc(n);if(r.length===0)return I({});let s={};return je(r).pipe(Qe(o=>Eb(n[o],t,e,i).pipe(dn(),De(a=>{if(a instanceof is)throw Jo(new Zr,a);s[o]=a}))),Bl(1),ph(s),Ai(o=>hp(o)?un:Tr(o)))}function Eb(n,t,e,i){let r=ls(t)??i,s=Ji(n,r),o=s.resolve?s.resolve(t,e):zt(r,()=>s(t,e));return mn(o)}function vc(n){return Ct(t=>{let e=n(t);return e?je(e).pipe(Z(()=>t)):I(t)})}var yp=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===P);return i}getResolvedTitleForRoute(e){return e.data[as]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:()=>T(Mb),providedIn:"root"})}}return n})(),Mb=(()=>{class n extends yp{constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(H(Vf))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Yc=new te("",{providedIn:"root",factory:()=>({})}),kb=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=re({type:n,selectors:[["ng-component"]],standalone:!0,features:[xe],decls:1,vars:0,template:function(i,r){i&1&&O(0,"router-outlet")},dependencies:[Kc],encapsulation:2})}}return n})();function Zc(n){let t=n.children&&n.children.map(Zc),e=t?$(D({},n),{children:t}):D({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==P&&(e.component=kb),e}var Qc=new te(""),Ab=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=T(Jl)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return I(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=mn(e.loadComponent()).pipe(Z(vp),De(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),mo(()=>{this.componentLoaders.delete(e)})),r=new Pl(i,()=>new Oe).pipe(Nl());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return I({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=Ob(i,this.compiler,e,this.onLoadEndListener).pipe(mo(()=>{this.childrenLoaders.delete(i)})),o=new Pl(s,()=>new Oe).pipe(Nl());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ob(n,t,e,i){return mn(n.loadChildren()).pipe(Z(vp),Qe(r=>r instanceof Ph||Array.isArray(r)?I(r):je(t.compileModuleAsync(r))),Z(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(e).injector,o=s.get(Qc,[],{optional:!0,self:!0}).flat()),{routes:o.map(Zc),injector:s}}))}function Ib(n){return n&&typeof n=="object"&&"default"in n}function vp(n){return Ib(n)?n.default:n}var Xc=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:()=>T(Tb),providedIn:"root"})}}return n})(),Tb=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Rb=new te("");var Nb=new te(""),Pb=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Oe,this.transitionAbortSubject=new Oe,this.configLoader=T(Ab),this.environmentInjector=T(vo),this.urlSerializer=T(qc),this.rootContexts=T(Zo),this.location=T(Br),this.inputBindingEnabled=T(Jc,{optional:!0})!==null,this.titleStrategy=T(yp),this.options=T(Yc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=T(Xc),this.createViewTransition=T(Rb,{optional:!0}),this.navigationErrorHandler=T(Nb,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>I(void 0),this.rootComponentType=null;let e=r=>this.events.next(new Ac(r)),i=r=>this.events.next(new Oc(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next($(D(D({},this.transitions.value),e),{id:i}))}setupNavigations(e,i,r){return this.transitions=new Ze({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Jr,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ki(s=>s.id!==0),Z(s=>$(D({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ct(s=>{let o=!1,a=!1;return I(s).pipe(Ct(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ge.SupersededByNewNavigation),un;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?$(D({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&u!=="reload"){let d="";return this.events.next(new Hn(l.id,this.urlSerializer.serialize(l.rawUrl),d,Sc.IgnoredSameUrlNavigation)),l.resolve(!1),un}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return I(l).pipe(Ct(d=>{let h=this.transitions?.getValue();return this.events.next(new Xr(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?un:Promise.resolve(d)}),Cb(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),De(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=$(D({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new Ho(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:h,source:f,restoredState:p,extras:g}=l,y=new Xr(d,this.urlSerializer.serialize(h),f,p);this.events.next(y);let C=op(this.rootComponentType).snapshot;return this.currentTransition=s=$(D({},l),{targetSnapshot:C,urlAfterRedirects:h,extras:$(D({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,I(s)}else{let d="";return this.events.next(new Hn(l.id,this.urlSerializer.serialize(l.extractedUrl),d,Sc.IgnoredByUrlHandlingStrategy)),l.resolve(!1),un}}),De(l=>{let c=new xc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Z(l=>(this.currentTransition=s=$(D({},l),{guards:z_(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),X_(this.environmentInjector,l=>this.events.next(l)),De(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Jo(this.urlSerializer,l.guardsResult);let c=new Ec(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),ki(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ge.GuardRejected),!1)),vc(l=>{if(l.guards.canActivateChecks.length)return I(l).pipe(De(c=>{let u=new Mc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Ct(c=>{let u=!1;return I(c).pipe(Db(this.paramsInheritanceStrategy,this.environmentInjector),De({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",Ge.NoDataFromResolver)}}))}),De(c=>{let u=new kc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),vc(l=>{let c=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(De(h=>{u.component=h}),Z(()=>{})));for(let h of u.children)d.push(...c(h));return d};return Fl(c(l.targetSnapshot.root)).pipe(Vl(null),Oi(1))}),vc(()=>this.afterPreactivation()),Ct(()=>{let{currentSnapshot:l,targetSnapshot:c}=s,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?je(u).pipe(Z(()=>s)):I(s)}),Z(l=>{let c=L_(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=$(D({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,s}),De(()=>{this.events.next(new ts)}),j_(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Oi(1),De({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new gn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),yo(this.transitionAbortSubject.pipe(De(l=>{throw l}))),mo(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Ge.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ai(l=>{if(a=!0,dp(l))this.events.next(new Kt(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),$_(l)?this.events.next(new Wi(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let c=new es(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let u=zt(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof is){let{message:d,cancellationCode:h}=Jo(this.urlSerializer,u);this.events.next(new Kt(s.id,this.urlSerializer.serialize(s.extractedUrl),d,h)),this.events.next(new Wi(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(c);let d=e.errorHandler(l);s.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return un}))}))}cancelNavigationTransition(e,i,r){let s=new Kt(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Fb(n){return n!==Jr}var Lb=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:()=>T(Vb),providedIn:"root"})}}return n})(),Gc=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},Vb=(()=>{class n extends Gc{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Tn(n)))(r||n)}})()}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_p=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:()=>T(Bb),providedIn:"root"})}}return n})(),Bb=(()=>{class n extends _p{constructor(){super(...arguments),this.location=T(Br),this.urlSerializer=T(qc),this.options=T(Yc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=T(Xc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Jt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=op(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof Xr)this.stateMemento=this.createStateMemento();else if(e instanceof Hn)this.rawUrlTree=i.initialUrl;else if(e instanceof Ho){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else e instanceof ts?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):e instanceof Kt&&(e.code===Ge.GuardRejected||e.code===Ge.NoDataFromResolver)?this.restoreHistory(i):e instanceof es?this.restoreHistory(i,!0):e instanceof gn&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){let r=e instanceof Jt?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let s=this.browserPageId,o=D(D({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(r,"",o)}else{let s=D(D({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Tn(n)))(r||n)}})()}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Wr=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Wr||{});function $b(n,t){n.events.pipe(ki(e=>e instanceof gn||e instanceof Kt||e instanceof es||e instanceof Hn),Z(e=>e instanceof gn||e instanceof Hn?Wr.COMPLETE:(e instanceof Kt?e.code===Ge.Redirect||e.code===Ge.SupersededByNewNavigation:!1)?Wr.REDIRECTING:Wr.FAILED),ki(e=>e!==Wr.REDIRECTING),Oi(1)).subscribe(()=>{t()})}function jb(n){throw n}var zb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ub={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},qe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=T(bo),this.stateManager=T(_p),this.options=T(Yc,{optional:!0})||{},this.pendingTasks=T(wh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=T(Pb),this.urlSerializer=T(qc),this.location=T(Br),this.urlHandlingStrategy=T(Xc),this._events=new Oe,this.errorHandler=this.options.errorHandler||jb,this.navigated=!1,this.routeReuseStrategy=T(Lb),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=T(Qc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!T(Jc,{optional:!0}),this.eventsSubscription=new lh,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Kt&&i.code!==Ge.Redirect&&i.code!==Ge.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof gn)this.navigated=!0;else if(i instanceof Wi){let o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=D({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Fb(r.source)},o);this.scheduleNavigation(a,Jr,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}Gb(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Jr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let l=D({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Zc),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=D(D({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=r?r.snapshot:this.routerState.snapshot.root;d=np(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return ip(d,e,u,c??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=Un(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Jr,null,i)}navigate(e,i={skipLocationChange:!1}){return Hb(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=D({},zb):i===!1?r=D({},Ub):r=i,Un(e))return Bf(this.currentUrlTree,e,r);let s=this.parseUrl(e);return Bf(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(e,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return $b(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Hb(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new ee(4008,!1)}function Gb(n){return!(n instanceof ts)&&!(n instanceof Wi)}var bp=(()=>{class n{constructor(e,i,r,s,o,a){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new Oe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof gn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Un(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||i||r||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let i=this.href===null?null:Th(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(e,i){let r=this.renderer,s=this.el.nativeElement;i!==null?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:Un(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)(w(qe),w(Gn),zl("tabindex"),w(ft),w(Ie),w($i))}}static{this.\u0275dir=le({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&R("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),i&2&&Fi("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",fn],skipLocationChange:[2,"skipLocationChange","skipLocationChange",fn],replaceUrl:[2,"replaceUrl","replaceUrl",fn],routerLink:"routerLink"},standalone:!0,features:[Fr,Xe]})}}return n})();var qb=new te("");function wp(n,...t){return jl([{provide:Qc,multi:!0,useValue:n},[],{provide:Gn,useFactory:Wb,deps:[qe]},{provide:Yh,multi:!0,useFactory:Kb},t.map(e=>e.\u0275providers)])}function Wb(n){return n.routerState.root}function Kb(){let n=T(Ti);return t=>{let e=n.get(Lr);if(t!==e.components[0])return;let i=n.get(qe),r=n.get(Jb);n.get(Yb)===1&&i.initialNavigation(),n.get(Zb,null,$l.Optional)?.setUpPreloading(),n.get(qb,null,$l.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Jb=new te("",{factory:()=>new Oe}),Yb=new te("",{providedIn:"root",factory:()=>1});var Zb=new te("");var Cp=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-BX7VDEVO.js").then(({default:i})=>i(...e)):t=fetch,(...e)=>t(...e)};var ds=class extends Error{constructor(t,e="FunctionsError",i){super(t),this.name=e,this.context=i}},Xo=class extends ds{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},ea=class extends ds{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},ta=class extends ds{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},eu=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(eu||{});var Qb=function(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})},hs=class{constructor(t,{headers:e={},customFetch:i,region:r=eu.Any}={}){this.url=t,this.headers=e,this.region=r,this.fetch=Cp(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var i;return Qb(this,void 0,void 0,function*(){try{let{headers:r,method:s,body:o}=e,a={},{region:l}=e;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));let u=yield this.fetch(`${this.url}/${t}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:c}).catch(p=>{throw new Xo(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new ea(u);if(!u.ok)throw new ta(u);let h=((i=u.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(r){return{data:null,error:r}}})}};var Pp=rv(Np(),1),{PostgrestClient:Fp,PostgrestQueryBuilder:xA,PostgrestFilterBuilder:EA,PostgrestTransformBuilder:MA,PostgrestBuilder:kA,PostgrestError:uw}=Pp.default;var Lp="2.11.2";var Vp={"X-Client-Info":`realtime-js/${Lp}`},Bp="1.0.0",sa=1e4,$p=1e3,Zi=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(Zi||{}),We=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(We||{}),st=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(st||{}),hu=function(n){return n.websocket="websocket",n}(hu||{}),qn=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(qn||{});var oa=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,e,i)}_decodeBroadcast(t,e,i){let r=e.getUint8(1),s=e.getUint8(2),o=this.HEADER_LENGTH+2,a=i.decode(t.slice(o,o+r));o=o+r;let l=i.decode(t.slice(o,o+s));o=o+s;let c=JSON.parse(i.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}};var Qi=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var oe=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(oe||{}),pu=(n,t,e={})=>{var i;let r=(i=e.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((s,o)=>(s[o]=dw(o,n,t,r),s),{})},dw=(n,t,e,i)=>{let r=t.find(a=>a.name===n),s=r?.type,o=e[n];return s&&!i.includes(s)?jp(s,o):fu(o)},jp=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return gw(t,e)}switch(n){case oe.bool:return hw(t);case oe.float4:case oe.float8:case oe.int2:case oe.int4:case oe.int8:case oe.numeric:case oe.oid:return fw(t);case oe.json:case oe.jsonb:return pw(t);case oe.timestamp:return mw(t);case oe.abstime:case oe.date:case oe.daterange:case oe.int4range:case oe.int8range:case oe.money:case oe.reltime:case oe.text:case oe.time:case oe.timestamptz:case oe.timetz:case oe.tsrange:case oe.tstzrange:return fu(t);default:return fu(t)}},fu=n=>n,hw=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},fw=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},pw=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},gw=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,i=n[e];if(n[0]==="{"&&i==="}"){let s,o=n.slice(1,e);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>jp(t,a))}return n},mw=n=>typeof n=="string"?n.replace(" ","T"):n,aa=n=>{let t=n;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};var Xi=class{constructor(t,e,i={},r=sa){this.channel=t,this.event=e,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var i;return this._hasReceived(t)&&e((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var _s=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let i=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,r,s,o),this.pendingDiffs.forEach(l=>{this.state=n.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},r=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=n.syncDiff(this.state,r,s,o),a())}),this.onJoin((r,s,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:o})}),this.onLeave((r,s,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,i,r){let s=this.cloneDeep(t),o=this.transformState(e),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{let d=s[c];if(d){let h=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),p=u.filter(y=>f.indexOf(y.presence_ref)<0),g=d.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(a[c]=p),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},i,r)}static syncDiff(t,e,i,r){let{joins:s,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(s,(a,l)=>{var c;let u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){let d=t[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}i(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;let u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,r(a,c,l),c.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(i=>e(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,i)=>{let r=t[i];return"metas"in r?e[i]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):e[i]=r,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Yt=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(Yt||{});var bs=class n{constructor(t,e={config:{}},i){this.topic=t,this.params=e,this.socket=i,this.bindings={},this.state=We.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new Xi(this,st.join,this.params,this.timeout),this.rejoinTimer=new Qi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=We.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=We.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this._on(st.reply,{},(r,s)=>{this._trigger(this._replyEventName(s),r)}),this.presence=new _s(this),this.broadcastEndpointURL=aa(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var i,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(u=>t?.(Yt.CHANNEL_ERROR,u)),this._onClose(()=>t?.(Yt.CLOSED));let l={},c={broadcast:s,presence:o,postgres_changes:(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(u=>u.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",d=>m(this,[d],function*({postgres_changes:u}){var h;if(this.socket.setAuth(),u===void 0){t?.(Yt.SUBSCRIBED);return}else{let f=this.bindings.postgres_changes,p=(h=f?.length)!==null&&h!==void 0?h:0,g=[];for(let y=0;y<p;y++){let C=f[y],{filter:{event:B,schema:W,table:ae,filter:me}}=C,ce=u&&u[y];if(ce&&ce.event===B&&ce.schema===W&&ce.table===ae&&ce.filter===me)g.push(Object.assign(Object.assign({},C),{id:ce.id}));else{this.unsubscribe(),t?.(Yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(Yt.SUBSCRIBED);return}})).receive("error",u=>{t?.(Yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t?.(Yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(i){return m(this,arguments,function*(t,e={}){return yield this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)})}untrack(){return m(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,e,i){return this._on(t,e,i)}send(i){return m(this,arguments,function*(t,e={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){let{event:o,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{let u=yield this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=e.timeout)!==null&&r!==void 0?r:this.timeout);return yield(s=u.body)===null||s===void 0?void 0:s.cancel(),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;let u=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=We.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(st.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{let r=new Xi(this,st.leave,{},t);r.receive("ok",()=>{e(),i("ok")}).receive("timeout",()=>{e(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}_fetchWithTimeout(t,e,i){return m(this,null,function*(){let r=new AbortController,s=setTimeout(()=>r.abort(),i),o=yield this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:r.signal}));return clearTimeout(s),o})}_push(t,e,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Xi(this,t,e,i);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(t,e,i){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,i){var r,s;let o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=st;if(i&&[a,l,c,u].indexOf(o)>=0&&i!==this._joinRef())return;let h=this._onMessage(o,e,i);if(e&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(f=>{var p,g,y;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(g=f.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(h,i)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var p,g,y,C,B,W;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){let ae=f.id,me=(p=f.filter)===null||p===void 0?void 0:p.event;return ae&&((g=e.ids)===null||g===void 0?void 0:g.includes(ae))&&(me==="*"||me?.toLocaleLowerCase()===((y=e.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{let ae=(B=(C=f?.filter)===null||C===void 0?void 0:C.event)===null||B===void 0?void 0:B.toLocaleLowerCase();return ae==="*"||ae===((W=e?.event)===null||W===void 0?void 0:W.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){let p=h.data,{schema:g,table:y,commit_timestamp:C,type:B,errors:W}=p;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:C,eventType:B,new:{},old:{},errors:W}),this._getPayloadRecords(p))}f.callback(h,i)})}_isClosed(){return this.state===We.closed}_isJoined(){return this.state===We.joined}_isJoining(){return this.state===We.joining}_isLeaving(){return this.state===We.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,i){let r=t.toLocaleLowerCase(),s={type:r,filter:e,callback:i};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(t,e){let i=t.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&n.isEqual(r.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let i in t)if(t[i]!==e[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(st.close,{},t)}_onError(t){this._on(st.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=We.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=pu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=pu(t.columns,t.old_record)),e}};var vw=()=>{},_w=typeof WebSocket<"u",bw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,ws=class{constructor(t,e){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Vp,this.params={},this.timeout=sa,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=vw,this.conn=null,this.sendBuffer=[],this.serializer=new oa,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>import("./chunk-BX7VDEVO.js").then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${hu.websocket}`,this.httpEndpoint=aa(t),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let r=(i=e?.params)===null||i===void 0?void 0:i.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=e?.encode?e.encode:(s,o)=>o(JSON.stringify(s)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Qi(()=>m(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch),e?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=e?.worker||!1,this.workerUrl=e?.workerUrl}this.accessToken=e?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(_w){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new gu(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-BBCAVWXX.js").then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Bp}))}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(t){return m(this,null,function*(){let e=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return m(this,null,function*(){let t=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),t})}log(t,e,i){this.logger(t,e,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Zi.connecting:return qn.Connecting;case Zi.open:return qn.Open;case Zi.closing:return qn.Closing;default:return qn.Closed}}isConnected(){return this.connectionState()===qn.Open}channel(t,e={config:{}}){let i=new bs(`realtime:${t}`,e,this);return this.channels.push(i),i}push(t){let{topic:e,event:i,payload:r,ref:s}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${i} (${s})`,r),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t=null){return m(this,null,function*(){let e=t||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;if(e){let i=null;try{i=JSON.parse(atob(e.split(".")[1]))}catch{}if(i&&i.exp&&!(Math.floor(Date.now()/1e3)-i.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`);this.accessTokenValue=e,this.channels.forEach(r=>{e&&r.updateJoinPayload({access_token:e}),r.joinedOnce&&r._isJoined()&&r._push(st.access_token,{access_token:e})})}})}sendHeartbeat(){return m(this,null,function*(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close($p,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}})}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:i,event:r,payload:s,ref:o}=e;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${i} ${r} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(i)).forEach(a=>a._trigger(r,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}_onConnOpen(){return m(this,null,function*(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(st.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let i=t.match(/\?/)?"&":"?",r=new URLSearchParams(e);return`${t}${i}${r}`}_workerObjectUrl(t){let e;if(t)e=t;else{let i=new Blob([bw],{type:"application/javascript"});e=URL.createObjectURL(i)}return e}};var gu=class{constructor(t,e,i){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Zi.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=i.close}};var er=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function he(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var la=class extends er{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Wn=class extends er{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var ww=function(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})},ua=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-BX7VDEVO.js").then(({default:i})=>i(...e)):t=fetch,(...e)=>t(...e)},zp=()=>ww(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-BX7VDEVO.js")).Response:Response}),ca=n=>{if(Array.isArray(n))return n.map(e=>ca(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,i])=>{let r=e.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[r]=ca(i)}),t};var Kn=function(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})},mu=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Cw=(n,t,e)=>Kn(void 0,void 0,void 0,function*(){let i=yield zp();n instanceof i&&!e?.noResolveJson?n.json().then(r=>{t(new la(mu(r),n.status||500))}).catch(r=>{t(new Wn(mu(r),r))}):t(new Wn(mu(n),n))}),Dw=(n,t,e,i)=>{let r={method:n,headers:t?.headers||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i&&(r.body=JSON.stringify(i)),Object.assign(Object.assign({},r),e))};function Cs(n,t,e,i,r,s){return Kn(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(e,Dw(t,i,r,s)).then(l=>{if(!l.ok)throw l;return i?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Cw(l,a,i))})})}function tr(n,t,e,i){return Kn(this,void 0,void 0,function*(){return Cs(n,"GET",t,e,i)})}function It(n,t,e,i,r){return Kn(this,void 0,void 0,function*(){return Cs(n,"POST",t,i,r,e)})}function Up(n,t,e,i,r){return Kn(this,void 0,void 0,function*(){return Cs(n,"PUT",t,i,r,e)})}function Hp(n,t,e,i){return Kn(this,void 0,void 0,function*(){return Cs(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),i)})}function da(n,t,e,i,r){return Kn(this,void 0,void 0,function*(){return Cs(n,"DELETE",t,i,r,e)})}var Le=function(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})},Sw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},ha=class{constructor(t,e={},i,r){this.url=t,this.headers=e,this.bucketId=i,this.fetch=ua(r)}uploadOrUpdate(t,e,i,r){return Le(this,void 0,void 0,function*(){try{let s,o=Object.assign(Object.assign({},Gp),r),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)}),l=o.metadata;typeof Blob<"u"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",i)):typeof FormData<"u"&&i instanceof FormData?(s=i,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=i,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r?.headers&&(a=Object.assign(Object.assign({},a),r.headers));let c=this._removeEmptyFolders(e),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:s,headers:a},o?.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(he(s))return{data:null,error:s};throw s}})}upload(t,e,i){return Le(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,i)})}uploadToSignedUrl(t,e,i,r){return Le(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(t),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l,c=Object.assign({upsert:Gp.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl)):(l=i,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);let d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(he(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return Le(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),r=Object.assign({},this.headers);e?.upsert&&(r["x-upsert"]="true");let s=yield It(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:r}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new er("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}})}update(t,e,i){return Le(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,i)})}move(t,e,i){return Le(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}copy(t,e,i){return Le(this,void 0,void 0,function*(){try{return{data:{path:(yield It(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}createSignedUrl(t,e,i){return Le(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),s=yield It(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:e},i?.transform?{transform:i.transform}:{}),{headers:this.headers}),o=i?.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}createSignedUrls(t,e,i){return Le(this,void 0,void 0,function*(){try{let r=yield It(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),s=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}download(t,e){return Le(this,void 0,void 0,function*(){let r=typeof e?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(e?.transform||{}),o=s?`?${s}`:"";try{let a=this._getFinalPath(t);return{data:yield(yield tr(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(he(a))return{data:null,error:a};throw a}})}info(t){return Le(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let i=yield tr(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:ca(i),error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}})}exists(t){return Le(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield Hp(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(he(i)&&i instanceof Wn){let r=i.originalError;if([400,404].includes(r?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,e){let i=this._getFinalPath(t),r=[],s=e?.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);let a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${i}${c}`)}}}remove(t){return Le(this,void 0,void 0,function*(){try{return{data:yield da(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(he(e))return{data:null,error:e};throw e}})}list(t,e,i){return Le(this,void 0,void 0,function*(){try{let r=Object.assign(Object.assign(Object.assign({},Sw),e),{prefix:t||""});return{data:yield It(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var qp="2.7.1";var Wp={"X-Client-Info":`storage-js/${qp}`};var nr=function(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})},fa=class{constructor(t,e={},i){this.url=t,this.headers=Object.assign(Object.assign({},Wp),e),this.fetch=ua(i)}listBuckets(){return nr(this,void 0,void 0,function*(){try{return{data:yield tr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(he(t))return{data:null,error:t};throw t}})}getBucket(t){return nr(this,void 0,void 0,function*(){try{return{data:yield tr(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(he(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return nr(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}})}updateBucket(t,e){return nr(this,void 0,void 0,function*(){try{return{data:yield Up(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}})}emptyBucket(t){return nr(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(he(e))return{data:null,error:e};throw e}})}deleteBucket(t){return nr(this,void 0,void 0,function*(){try{return{data:yield da(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(he(e))return{data:null,error:e};throw e}})}};var Ds=class extends fa{constructor(t,e={},i){super(t,e,i)}from(t){return new ha(this.url,this.headers,t,this.fetch)}};var Kp="2.48.0";var Ss="";typeof Deno<"u"?Ss="deno":typeof document<"u"?Ss="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ss="react-native":Ss="node";var xw={"X-Client-Info":`supabase-js-${Ss}/${Kp}`},Jp={headers:xw},Yp={schema:"public"},Zp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qp={};of();var Ew=function(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})},Mw=n=>{let t;return n?t=n:typeof fetch>"u"?t=rf:t=fetch,(...e)=>t(...e)},kw=()=>typeof Headers>"u"?sf:Headers,Xp=(n,t,e)=>{let i=Mw(e),r=kw();return(s,o)=>Ew(void 0,void 0,void 0,function*(){var a;let l=(a=yield t())!==null&&a!==void 0?a:n,c=new r(o?.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),i(s,Object.assign(Object.assign({},o),{headers:c}))})};var Aw=function(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})};function eg(n){return n.replace(/\/$/,"")}function tg(n,t){let{db:e,auth:i,realtime:r,global:s}=n,{db:o,auth:a,realtime:l,global:c}=t,u={db:Object.assign(Object.assign({},o),e),auth:Object.assign(Object.assign({},a),i),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},c),s),accessToken:()=>Aw(this,void 0,void 0,function*(){return""})};return n.accessToken?u.accessToken=n.accessToken:delete u.accessToken,u}var pa="2.67.3";var ng="http://localhost:9999",ig="supabase.auth.token";var rg={"X-Client-Info":`gotrue-js/${pa}`},yu=10;var xs="X-Supabase-Api-Version",vu={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function sg(n){return Math.round(Date.now()/1e3)+n}function og(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}var _t=()=>typeof window<"u"&&typeof document<"u",Jn={tested:!1,writable:!1},yn=()=>{if(!_t())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jn.tested)return Jn.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Jn.tested=!0,Jn.writable=!0}catch{Jn.tested=!0,Jn.writable=!1}return Jn.writable};function ag(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((r,s)=>{t[s]=r})}catch{}return e.searchParams.forEach((i,r)=>{t[r]=i}),t}var ga=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-BX7VDEVO.js").then(({default:i})=>i(...e)):t=fetch,(...e)=>t(...e)},lg=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",_u=(n,t,e)=>m(void 0,null,function*(){yield n.setItem(t,JSON.stringify(e))}),Ms=(n,t)=>m(void 0,null,function*(){let e=yield n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),ks=(n,t)=>m(void 0,null,function*(){yield n.removeItem(t)});function Ow(n){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="",i,r,s,o,a,l,c,u=0;for(n=n.replace("-","+").replace("_","/");u<n.length;)o=t.indexOf(n.charAt(u++)),a=t.indexOf(n.charAt(u++)),l=t.indexOf(n.charAt(u++)),c=t.indexOf(n.charAt(u++)),i=o<<2|a>>4,r=(a&15)<<4|l>>2,s=(l&3)<<6|c,e=e+String.fromCharCode(i),l!=64&&r!=0&&(e=e+String.fromCharCode(r)),c!=64&&s!=0&&(e=e+String.fromCharCode(s));return e}var Es=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};Es.promiseConstructor=Promise;function bu(n){let t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,e=n.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");let i=e[1];return JSON.parse(Ow(i))}function cg(n){return m(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),n)})})}function ug(n,t){return new Promise((i,r)=>{m(this,null,function*(){for(let s=0;s<1/0;s++)try{let o=yield n(s);if(!t(s,null,o)){i(o);return}}catch(o){if(!t(s,o)){r(o);return}}})})}function Iw(n){return("0"+n.toString(16)).substr(-2)}function Tw(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=e.length,r="";for(let s=0;s<56;s++)r+=e.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(t),Array.from(t,Iw).join("")}function Rw(n){return m(this,null,function*(){let e=new TextEncoder().encode(n),i=yield crypto.subtle.digest("SHA-256",e),r=new Uint8Array(i);return Array.from(r).map(s=>String.fromCharCode(s)).join("")})}function Nw(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Pw(n){return m(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=yield Rw(n);return Nw(e)})}function Yn(n,t,e=!1){return m(this,null,function*(){let i=Tw(),r=i;e&&(r+="/PASSWORD_RECOVERY"),yield _u(n,`${t}-code-verifier`,r);let s=yield Pw(i);return[s,i===s?"plain":"s256"]})}var Fw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function dg(n){let t=n.headers.get(xs);if(!t||!t.match(Fw))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}var As=class extends Error{constructor(t,e,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=i}};function N(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var ma=class extends As{constructor(t,e,i){super(t,e,i),this.name="AuthApiError",this.status=e,this.code=i}};function hg(n){return N(n)&&n.name==="AuthApiError"}var ir=class extends As{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},Zt=class extends As{constructor(t,e,i,r){super(t,i,r),this.name=e,this.status=i}},ot=class extends Zt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function fg(n){return N(n)&&n.name==="AuthSessionMissingError"}var rr=class extends Zt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Zn=class extends Zt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Qn=class extends Zt{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function pg(n){return N(n)&&n.name==="AuthImplicitGrantRedirectError"}var Os=class extends Zt{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},sr=class extends Zt{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}};function ya(n){return N(n)&&n.name==="AuthRetryableFetchError"}var Is=class extends Zt{constructor(t,e,i){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=i}};var Lw=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},Xn=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Vw=[502,503,504];function gg(n){return m(this,null,function*(){var t;if(!lg(n))throw new sr(Xn(n),0);if(Vw.includes(n.status))throw new sr(Xn(n),n.status);let e;try{e=yield n.json()}catch(s){throw new ir(Xn(s),s)}let i,r=dg(n);if(r&&r.getTime()>=vu["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?i=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(i=e.error_code),i){if(i==="weak_password")throw new Is(Xn(e),n.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new ot}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Is(Xn(e),n.status,e.weak_password.reasons);throw new ma(Xn(e),n.status||500,i)})}var Bw=(n,t,e,i)=>{let r={method:n,headers:t?.headers||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),e))};function V(n,t,e,i){return m(this,null,function*(){var r;let s=Object.assign({},i?.headers);s[xs]||(s[xs]=vu["2024-01-01"].name),i?.jwt&&(s.Authorization=`Bearer ${i.jwt}`);let o=(r=i?.query)!==null&&r!==void 0?r:{};i?.redirectTo&&(o.redirect_to=i.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=yield $w(n,t,e+a,{headers:s,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(l):{data:Object.assign({},l),error:null}})}function $w(n,t,e,i,r,s){return m(this,null,function*(){let o=Bw(t,i,r,s),a;try{a=yield n(e,Object.assign({},o))}catch(l){throw console.error(l),new sr(Xn(l),0)}if(a.ok||(yield gg(a)),i?.noResolveJson)return a;try{return yield a.json()}catch(l){yield gg(l)}})}function Qt(n){var t;let e=null;jw(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=sg(n.expires_in)));let i=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:i},error:null}}function wu(n){let t=Qt(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,i)=>e&&typeof i=="string",!0)&&(t.data.weak_password=n.weak_password),t}function Tt(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function mg(n){return{data:n,error:null}}function yg(n){let{action_link:t,email_otp:e,hashed_token:i,redirect_to:r,verification_type:s}=n,o=Lw(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:i,redirect_to:r,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function vg(n){return n}function jw(n){return n.access_token&&n.refresh_token&&n.expires_in}var zw=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},or=class{constructor({url:t="",headers:e={},fetch:i}){this.url=t,this.headers=e,this.fetch=ga(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(t,e="global"){return m(this,null,function*(){try{return yield V(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(N(i))return{data:null,error:i};throw i}})}inviteUserByEmail(i){return m(this,arguments,function*(t,e={}){try{return yield V(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:Tt})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}})}generateLink(t){return m(this,null,function*(){try{let{options:e}=t,i=zw(t,["options"]),r=Object.assign(Object.assign({},i),e);return"newEmail"in i&&(r.new_email=i?.newEmail,delete r.newEmail),yield V(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:yg,redirectTo:e?.redirectTo})}catch(e){if(N(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(t){return m(this,null,function*(){try{return yield V(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Tt})}catch(e){if(N(e))return{data:{user:null},error:e};throw e}})}listUsers(t){return m(this,null,function*(){var e,i,r,s,o,a,l;try{let c={nextPage:null,lastPage:0,total:0},u=yield V(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=t?.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:vg});if(u.error)throw u.error;let d=yield u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(p=>{let g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);c[`${y}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(N(c))return{data:{users:[]},error:c};throw c}})}getUserById(t){return m(this,null,function*(){try{return yield V(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Tt})}catch(e){if(N(e))return{data:{user:null},error:e};throw e}})}updateUserById(t,e){return m(this,null,function*(){try{return yield V(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:Tt})}catch(i){if(N(i))return{data:{user:null},error:i};throw i}})}deleteUser(t,e=!1){return m(this,null,function*(){try{return yield V(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:Tt})}catch(i){if(N(i))return{data:{user:null},error:i};throw i}})}_listFactors(t){return m(this,null,function*(){try{let{data:e,error:i}=yield V(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:e,error:i}}catch(e){if(N(e))return{data:null,error:e};throw e}})}_deleteFactor(t){return m(this,null,function*(){try{return{data:yield V(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(N(e))return{data:null,error:e};throw e}})}};var _g={getItem:n=>yn()?globalThis.localStorage.getItem(n):null,setItem:(n,t)=>{yn()&&globalThis.localStorage.setItem(n,t)},removeItem:n=>{yn()&&globalThis.localStorage.removeItem(n)}};function Cu(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}function bg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var ei={debug:!!(globalThis&&yn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Ts=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},va=class extends Ts{};function Du(n,t,e){return m(this,null,function*(){ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);let i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),ei.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},r=>m(this,null,function*(){if(r){ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return yield e()}finally{ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(t===0)throw ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new va(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ei.debug)try{let s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}})))})}bg();var Uw={url:ng,storageKey:ig,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Rs=30*1e3,wg=3;function Cg(n,t,e){return m(this,null,function*(){return yield e()})}var Su=(()=>{class n{constructor(e){var i,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&_t()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let s=Object.assign(Object.assign({},Uw),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new or({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=ga(s.fetch),this.lock=s.lock||Cg,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:_t()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=Du:this.lock=Cg,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:yn()?this.storage=_g:(this.memoryStorage={},this.storage=Cu(this.memoryStorage)):(this.memoryStorage={},this.storage=Cu(this.memoryStorage)),_t()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",o=>m(this,null,function*(){this._debug("received broadcast notification from other tab or client",o),yield this._notifyAllSubscribers(o.data.event,o.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${pa}) ${new Date().toISOString()}`,...e),this}initialize(){return m(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=m(this,null,function*(){return yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return m(this,null,function*(){var e;try{let i=ag(window.location.href),r="none";if(this._isImplicitGrantCallback(i)?r="implicit":(yield this._isPKCECallback(i))&&(r="pkce"),_t()&&this.detectSessionInUrl&&r!=="none"){let{data:s,error:o}=yield this._getSessionFromURL(i,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),pg(o)){let c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return yield this._removeSession(),{error:o}}let{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),yield this._saveSession(a),setTimeout(()=>m(this,null,function*(){l==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(i){return N(i)?{error:i}:{error:new ir("Unexpected error during initialization",i)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return m(this,null,function*(){var i,r,s;try{let o=yield V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(i=e?.options)===null||i===void 0?void 0:i.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:Qt}),{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};let c=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(N(o))return{data:{user:null,session:null},error:o};throw o}})}signUp(e){return m(this,null,function*(){var i,r,s;try{let o;if("email"in e){let{email:d,password:h,options:f}=e,p=null,g=null;this.flowType==="pkce"&&([p,g]=yield Yn(this.storage,this.storageKey)),o=yield V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(i=f?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:g},xform:Qt})}else if("phone"in e){let{phone:d,password:h,options:f}=e;o=yield V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},channel:(s=f?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Qt})}else throw new Zn("You must provide either an email or phone number and a password");let{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};let c=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(N(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(e){return m(this,null,function*(){try{let i;if("email"in e){let{email:o,password:a,options:l}=e;i=yield V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:wu})}else if("phone"in e){let{phone:o,password:a,options:l}=e;i=yield V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:wu})}else throw new Zn("You must provide either an email or phone number and a password");let{data:r,error:s}=i;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new rr}:(r.session&&(yield this._saveSession(r.session),yield this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(i){if(N(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithOAuth(e){return m(this,null,function*(){var i,r,s,o;return yield this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(e){return m(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>m(this,null,function*(){return this._exchangeCodeForSession(e)}))})}_exchangeCodeForSession(e){return m(this,null,function*(){let i=yield Ms(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(i??"").split("/");try{let{data:o,error:a}=yield V(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Qt});if(yield ks(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new rr}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(N(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}})}signInWithIdToken(e){return m(this,null,function*(){try{let{options:i,provider:r,token:s,access_token:o,nonce:a}=e,l=yield V(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:Qt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new rr}:(c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(i){if(N(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithOtp(e){return m(this,null,function*(){var i,r,s,o,a;try{if("email"in e){let{email:l,options:c}=e,u=null,d=null;this.flowType==="pkce"&&([u,d]=yield Yn(this.storage,this.storageKey));let{error:h}=yield V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(i=c?.data)!==null&&i!==void 0?i:{},create_user:(r=c?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){let{phone:l,options:c}=e,{data:u,error:d}=yield V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(o=c?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new Zn("You must provide either an email or phone number.")}catch(l){if(N(l))return{data:{user:null,session:null},error:l};throw l}})}verifyOtp(e){return m(this,null,function*(){var i,r;try{let s,o;"options"in e&&(s=(i=e.options)===null||i===void 0?void 0:i.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);let{data:a,error:l}=yield V(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Qt});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,u=a.user;return c?.access_token&&(yield this._saveSession(c),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(N(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithSSO(e){return m(this,null,function*(){var i,r,s;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=yield Yn(this.storage,this.storageKey)),yield V(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:mg})}catch(o){if(N(o))return{data:null,error:o};throw o}})}reauthenticate(){return m(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return m(this,null,function*(){try{return yield this._useSession(e=>m(this,null,function*(){let{data:{session:i},error:r}=e;if(r)throw r;if(!i)throw new ot;let{error:s}=yield V(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return{data:{user:null,session:null},error:s}}))}catch(e){if(N(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return m(this,null,function*(){try{let i=`${this.url}/resend`;if("email"in e){let{email:r,type:s,options:o}=e,{error:a}=yield V(this.fetch,"POST",i,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:r,type:s,options:o}=e,{data:a,error:l}=yield V(this.fetch,"POST",i,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new Zn("You must provide either an email or phone number and a type")}catch(i){if(N(i))return{data:{user:null,session:null},error:i};throw i}})}getSession(){return m(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return this._useSession(i=>m(this,null,function*(){return i}))}))})}_acquireLock(e,i){return m(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=m(this,null,function*(){return yield r,yield i()});return this.pendingInLock.push(m(this,null,function*(){try{yield s}catch{}})),s}return yield this.lock(`lock:${this.storageKey}`,e,()=>m(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let r=i();for(this.pendingInLock.push(m(this,null,function*(){try{yield r}catch{}})),yield r;this.pendingInLock.length;){let s=[...this.pendingInLock];yield Promise.all(s),this.pendingInLock.splice(0,s.length)}return yield r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return m(this,null,function*(){this._debug("#_useSession","begin");try{let i=yield this.__loadSession();return yield e(i)}finally{this._debug("#_useSession","end")}})}__loadSession(){return m(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,i=yield Ms(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}let{session:s,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return m(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return m(this,null,function*(){try{return e?yield V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Tt}):yield this._useSession(i=>m(this,null,function*(){var r,s,o;let{data:a,error:l}=i;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ot}:yield V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Tt})}))}catch(i){if(N(i))return fg(i)&&(yield this._removeSession(),yield ks(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:i};throw i}})}updateUser(r){return m(this,arguments,function*(e,i={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._updateUser(e,i)}))})}_updateUser(r){return m(this,arguments,function*(e,i={}){try{return yield this._useSession(s=>m(this,null,function*(){let{data:o,error:a}=s;if(a)throw a;if(!o.session)throw new ot;let l=o.session,c=null,u=null;this.flowType==="pkce"&&e.email!=null&&([c,u]=yield Yn(this.storage,this.storageKey));let{data:d,error:h}=yield V(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:u}),jwt:l.access_token,xform:Tt});if(h)throw h;return l.user=d.user,yield this._saveSession(l),yield this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}}))}catch(s){if(N(s))return{data:{user:null},error:s};throw s}})}_decodeJWT(e){return bu(e)}setSession(e){return m(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return m(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new ot;let i=Date.now()/1e3,r=i,s=!0,o=null,a=bu(e.access_token);if(a.exp&&(r=a.exp,s=r<=i),s){let{session:l,error:c}=yield this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{let{data:l,error:c}=yield this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-i,expires_at:r},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(i){if(N(i))return{data:{session:null,user:null},error:i};throw i}})}refreshSession(e){return m(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return m(this,null,function*(){try{return yield this._useSession(i=>m(this,null,function*(){var r;if(!e){let{data:a,error:l}=i;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new ot;let{session:s,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(i){if(N(i))return{data:{user:null,session:null},error:i};throw i}})}_getSessionFromURL(e,i){return m(this,null,function*(){try{if(!_t())throw new Qn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Os("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qn("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Os("No code detected.");let{data:W,error:ae}=yield this._exchangeCodeForSession(e.code);if(ae)throw ae;let me=new URL(window.location.href);return me.searchParams.delete("code"),window.history.replaceState(window.history.state,"",me.toString()),{data:{session:W.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=e;if(!o||!l||!a||!u)throw new Qn("No session defined in URL");let d=Math.round(Date.now()/1e3),h=parseInt(l),f=d+h;c&&(f=parseInt(c));let p=f-d;p*1e3<=Rs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);let g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);let{data:y,error:C}=yield this._getUser(o);if(C)throw C;let B={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:B,redirectType:e.type},error:null}}catch(r){if(N(r))return{data:{session:null,redirectType:null},error:r};throw r}})}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}_isPKCECallback(e){return m(this,null,function*(){let i=yield Ms(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)})}signOut(){return m(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return m(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(i=>m(this,null,function*(){var r;let{data:s,error:o}=i;if(o)return{error:o};let a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){let{error:l}=yield this.admin.signOut(a,e);if(l&&!(hg(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(yield this._removeSession(),yield ks(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){let i=og(),r={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,r),m(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){this._emitInitialSession(i)}))}),{data:{subscription:r}}}_emitInitialSession(e){return m(this,null,function*(){return yield this._useSession(i=>m(this,null,function*(){var r,s;try{let{data:{session:o},error:a}=i;if(a)throw a;yield(r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){yield(s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}}))})}resetPasswordForEmail(r){return m(this,arguments,function*(e,i={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=yield Yn(this.storage,this.storageKey,!0));try{return yield V(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(a){if(N(a))return{data:null,error:a};throw a}})}getUserIdentities(){return m(this,null,function*(){var e;try{let{data:i,error:r}=yield this.getUser();if(r)throw r;return{data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(i){if(N(i))return{data:null,error:i};throw i}})}linkIdentity(e){return m(this,null,function*(){var i;try{let{data:r,error:s}=yield this._useSession(o=>m(this,null,function*(){var a,l,c,u,d;let{data:h,error:f}=o;if(f)throw f;let p=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return yield V(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})}));if(s)throw s;return _t()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(N(r))return{data:{provider:e.provider,url:null},error:r};throw r}})}unlinkIdentity(e){return m(this,null,function*(){try{return yield this._useSession(i=>m(this,null,function*(){var r,s;let{data:o,error:a}=i;if(a)throw a;return yield V(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})}))}catch(i){if(N(i))return{data:null,error:i};throw i}})}_refreshAccessToken(e){return m(this,null,function*(){let i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{let r=Date.now();return yield ug(s=>m(this,null,function*(){return s>0&&(yield cg(200*Math.pow(2,s-1))),this._debug(i,"refreshing attempt",s),yield V(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Qt})}),(s,o)=>{let a=200*Math.pow(2,s);return o&&ya(o)&&Date.now()+a-r<Rs})}catch(r){if(this._debug(i,"error",r),N(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(i,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,i){return m(this,null,function*(){let r=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",r),_t()&&!i.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}})}_recoverAndRefresh(){return m(this,null,function*(){var e;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let r=yield Ms(this.storage,this.storageKey);if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&(yield this._removeSession());return}let s=Math.round(Date.now()/1e3),o=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+yu;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${yu}s`),o){if(this.autoRefreshToken&&r.refresh_token){let{error:a}=yield this._callRefreshToken(r.refresh_token);a&&(console.error(a),ya(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}})}_callRefreshToken(e){return m(this,null,function*(){var i,r;if(!e)throw new ot;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Es;let{data:o,error:a}=yield this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new ot;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),N(o)){let a={session:null,error:o};return ya(o)||(yield this._removeSession()),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}})}_notifyAllSubscribers(e,i,r=!0){return m(this,null,function*(){let s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",i,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:i});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(l=>m(this,null,function*(){try{yield l.callback(e,i)}catch(c){o.push(c)}}));if(yield Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}})}_saveSession(e){return m(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,yield _u(this.storage,this.storageKey,e)})}_removeSession(){return m(this,null,function*(){this._debug("#_removeSession()"),yield ks(this.storage,this.storageKey),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&_t()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}_startAutoRefresh(){return m(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),Rs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>m(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return m(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return m(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return m(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return m(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>m(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(i=>m(this,null,function*(){let{data:{session:r}}=i;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let s=Math.floor((r.expires_at*1e3-e)/Rs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Rs}ms, refresh threshold is ${wg} ticks`),s<=wg&&(yield this._callRefreshToken(r.refresh_token))}))}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof Ts)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return m(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!_t()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>m(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return m(this,null,function*(){let i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,i,r){return m(this,null,function*(){let s=[`provider=${encodeURIComponent(i)}`];if(r?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){let[o,a]=yield Yn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r?.queryParams){let o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r?.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`})}_unenroll(e){return m(this,null,function*(){try{return yield this._useSession(i=>m(this,null,function*(){var r;let{data:s,error:o}=i;return o?{data:null,error:o}:yield V(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})}))}catch(i){if(N(i))return{data:null,error:i};throw i}})}_enroll(e){return m(this,null,function*(){try{return yield this._useSession(i=>m(this,null,function*(){var r,s;let{data:o,error:a}=i;if(a)return{data:null,error:a};let l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=yield V(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c?.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})}))}catch(i){if(N(i))return{data:null,error:i};throw i}})}_verify(e){return m(this,null,function*(){return this._acquireLock(-1,()=>m(this,null,function*(){try{return yield this._useSession(i=>m(this,null,function*(){var r;let{data:s,error:o}=i;if(o)return{data:null,error:o};let{data:a,error:l}=yield V(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})}))}catch(i){if(N(i))return{data:null,error:i};throw i}}))})}_challenge(e){return m(this,null,function*(){return this._acquireLock(-1,()=>m(this,null,function*(){try{return yield this._useSession(i=>m(this,null,function*(){var r;let{data:s,error:o}=i;return o?{data:null,error:o}:yield V(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})}))}catch(i){if(N(i))return{data:null,error:i};throw i}}))})}_challengeAndVerify(e){return m(this,null,function*(){let{data:i,error:r}=yield this._challenge({factorId:e.factorId});return r?{data:null,error:r}:yield this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})})}_listFactors(){return m(this,null,function*(){let{data:{user:e},error:i}=yield this.getUser();if(i)return{data:null,error:i};let r=e?.factors||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}})}_getAuthenticatorAssuranceLevel(){return m(this,null,function*(){return this._acquireLock(-1,()=>m(this,null,function*(){return yield this._useSession(e=>m(this,null,function*(){var i,r;let{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let a=this._decodeJWT(s.access_token),l=null;a.aal&&(l=a.aal);let c=l;((r=(i=s.user.factors)===null||i===void 0?void 0:i.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");let d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}))})}}return n.nextInstanceID=0,n})();var Hw=Su,xu=Hw;var _a=class extends xu{constructor(t){super(t)}};var Gw=function(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})},ba=class{constructor(t,e,i){var r,s,o;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let a=eg(t);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;let l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:Yp,realtime:Qp,auth:Object.assign(Object.assign({},Zp),{storageKey:l}),global:Jp},u=tg(i??{},c);this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Xp(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Fp(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new hs(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ds(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},i={}){return this.rest.rpc(t,e,i)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return Gw(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:i}=yield this.auth.getSession();return(e=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:r,storageKey:s,flowType:o,lock:a,debug:l},c,u){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _a({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:r,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new ws(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,i)=>{this._handleTokenChanged(e,"CLIENT",i?.access_token)})}_handleTokenChanged(t,e,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var Dg=(n,t,e)=>new ba(n,t,e);var Eu={production:!1,supabaseUrl:"https://scnqekoeidvnbkgjysab.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNjbnFla29laWR2bmJrZ2p5c2FiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc2NjczNzAsImV4cCI6MjA1MzI0MzM3MH0.xLEqbjZxP3NMxijBzOtEFroaUELCUzai-3_Fn8XNErg"};var Ve=class n{supabase=Dg(Eu.supabaseUrl,Eu.supabaseKey);constructor(){}getNutritionGuide(){return new Promise((t,e)=>{this.supabase.from("nutrition_guide").select("description").order("id",{ascending:!1}).limit(1).then(i=>{i.error?e(i.error.message):i.data&&i.data.length>0?t(i.data[0].description):e("No data found in the nutrition_guide table")})})}postNutritionGuide(t){return m(this,null,function*(){try{let i=(yield this.supabase.auth.getSession()).data.session?.user?.email;yield this.supabase.from("nutrition_guide").upsert([{description:t.description,editor:i,commit_message:t.commit_message}])}catch(e){console.error("Error in postNutritionGuide:",e)}})}getCommitsToCompare(t,e){return new Promise((i,r)=>{this.supabase.from("nutrition_guide").select("description").in("id",[t,e]).then(s=>{s.error?r(s.error.message):s.data&&s.data.length>0?i(s.data):r("No data found in the nutrition_guide table")})})}getChangeHistory(){return m(this,null,function*(){return new Promise((t,e)=>{this.supabase.from("nutrition_guide").select("*").order("created_at",{ascending:!1}).then(i=>{i.error?e(i.error.message):i.data&&i.data.length>0?t(i.data):e("No data found in the nutrition_guide table")})})})}handleGoogleLogin(){return m(this,null,function*(){yield this.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}})})}logout(){return m(this,null,function*(){yield this.supabase.auth.signOut()})}getSession(){return new uh(t=>{this.supabase.auth.getSession().then(e=>{t.next(e)})})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function qw(n,t){n&1&&(v(0,"h1"),k(1,"Login"),_())}function Ww(n,t){n&1&&(v(0,"h1"),k(1,"Logout"),_())}function Kw(n,t){if(n&1){let e=Se();v(0,"button",2),R("click",function(){Q(e);let r=M();return X(r.login())}),Dt(),v(1,"svg",3),O(2,"path",4)(3,"path",5)(4,"path",6)(5,"path",7),_(),k(6," Mit Google anmelden "),_()}}function Jw(n,t){if(n&1){let e=Se();v(0,"button",2),R("click",function(){Q(e);let r=M();return X(r.logout())}),Dt(),v(1,"svg",3),O(2,"path",4)(3,"path",5)(4,"path",6)(5,"path",7),_(),k(6," Ausloggen "),_()}}var wa=class n{constructor(t,e,i){this.supabase=t;this.router=e;this.cdr=i}isLoggedIn=!1;ngOnInit(){this.supabase.getSession().subscribe(t=>{t.data?.session&&(this.isLoggedIn=!0,this.cdr.detectChanges())})}login(){return m(this,null,function*(){yield this.supabase.handleGoogleLogin()})}logout(){return m(this,null,function*(){yield this.supabase.logout(),window.location.href="/"})}static \u0275fac=function(e){return new(e||n)(w(Ve),w(qe),w(At))};static \u0275cmp=re({type:n,selectors:[["app-login"]],standalone:!0,features:[xe],decls:6,vars:2,consts:[[1,"button"],[1,"custom"],[1,"button",3,"click"],["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid","viewBox","0 0 256 262"],["fill","#4285F4","d","M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027"],["fill","#34A853","d","M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1"],["fill","#FBBC05","d","M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782"],["fill","#EB4335","d","M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251"]],template:function(e,i){e&1&&(ne(0,qw,2,0,"h1")(1,Ww,2,0,"h1"),v(2,"div"),ne(3,Kw,7,0,"button",0)(4,Jw,7,0,"button",0),_(),O(5,"app-footer",1)),e&2&&(Ht(i.isLoggedIn?1:0),S(3),Ht(i.isLoggedIn?4:3))},dependencies:[nf],styles:["h1[_ngcontent-%COMP%]{color:#07001c;font-size:44px;font-weight:bolder;text-align:center;margin-top:10px;margin-bottom:-30px}div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;justify-content:center;margin-top:50px}button[_ngcontent-%COMP%]{max-width:320px;display:flex;padding:.5rem 1.4rem;font-size:.875rem;line-height:1.25rem;font-weight:700;text-align:center;text-transform:uppercase;vertical-align:middle;align-items:center;border-radius:.5rem;border:1px solid rgba(0,0,0,.25);gap:.75rem;color:#413f3f;background-color:#fff;cursor:pointer;transition:all .4s ease}.button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:24px}button[_ngcontent-%COMP%]:hover{transform:scale(1.06)}  .custom{position:fixed;width:100%;bottom:0}"]})};var Ig=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||n)(w(ft),w(Ie))}}static{this.\u0275dir=le({type:n})}}return n})(),Tg=(()=>{class n extends Ig{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Tn(n)))(r||n)}})()}static{this.\u0275dir=le({type:n,features:[xt]})}}return n})(),dr=new te(""),Yw={provide:dr,useExisting:jt(()=>Iu),multi:!0},Iu=(()=>{class n extends Tg{writeValue(e){this.setProperty("checked",e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Tn(n)))(r||n)}})()}static{this.\u0275dir=le({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&R("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},features:[kt([Yw]),xt]})}}return n})(),Zw={provide:dr,useExisting:jt(()=>ri),multi:!0};function Qw(){let n=Wt()?Wt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Xw=new te(""),ri=(()=>{class n extends Ig{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Qw())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||n)(w(ft),w(Ie),w(Xw,8))}}static{this.\u0275dir=le({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&R("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[kt([Zw]),xt]})}}return n})();function vn(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function Rg(n){return n!=null&&typeof n.length=="number"}var Ia=new te(""),Tu=new te(""),eC=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,_n=class{static min(t){return tC(t)}static max(t){return nC(t)}static required(t){return Ng(t)}static requiredTrue(t){return iC(t)}static email(t){return rC(t)}static minLength(t){return sC(t)}static maxLength(t){return oC(t)}static pattern(t){return aC(t)}static nullValidator(t){return Da(t)}static compose(t){return $g(t)}static composeAsync(t){return zg(t)}};function tC(n){return t=>{if(vn(t.value)||vn(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function nC(n){return t=>{if(vn(t.value)||vn(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function Ng(n){return vn(n.value)?{required:!0}:null}function iC(n){return n.value===!0?null:{required:!0}}function rC(n){return vn(n.value)||eC.test(n.value)?null:{email:!0}}function sC(n){return t=>vn(t.value)||!Rg(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function oC(n){return t=>Rg(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function aC(n){if(!n)return Da;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(vn(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function Da(n){return null}function Pg(n){return n!=null}function Fg(n){return Bi(n)?je(n):n}function Lg(n){let t={};return n.forEach(e=>{t=e!=null?D(D({},t),e):t}),Object.keys(t).length===0?null:t}function Vg(n,t){return t.map(e=>e(n))}function lC(n){return!n.validate}function Bg(n){return n.map(t=>lC(t)?t:e=>t.validate(e))}function $g(n){if(!n)return null;let t=n.filter(Pg);return t.length==0?null:function(e){return Lg(Vg(e,t))}}function jg(n){return n!=null?$g(Bg(n)):null}function zg(n){if(!n)return null;let t=n.filter(Pg);return t.length==0?null:function(e){let i=Vg(e,t).map(Fg);return fh(i).pipe(Z(Lg))}}function Ug(n){return n!=null?zg(Bg(n)):null}function Sg(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Hg(n){return n._rawValidators}function Gg(n){return n._rawAsyncValidators}function Mu(n){return n?Array.isArray(n)?n:[n]:[]}function Sa(n,t){return Array.isArray(n)?n.includes(t):n===t}function xg(n,t){let e=Mu(t);return Mu(n).forEach(r=>{Sa(e,r)||e.push(r)}),e}function Eg(n,t){return Mu(t).filter(e=>!Sa(n,e))}var xa=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=jg(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ug(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},ti=class extends xa{get formDirective(){return null}get path(){return null}},ni=class extends xa{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ea=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},cC={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},gT=$(D({},cC),{"[class.ng-submitted]":"isSubmitted"}),Vs=(()=>{class n extends Ea{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(w(ni,2))}}static{this.\u0275dir=le({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Et("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[xt]})}}return n})(),Bs=(()=>{class n extends Ea{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(w(ti,10))}}static{this.\u0275dir=le({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Et("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[xt]})}}return n})();var Ns="VALID",Ca="INVALID",cr="PENDING",Ps="DISABLED",bn=class{},Ma=class extends bn{constructor(t,e){super(),this.value=t,this.source=e}},Fs=class extends bn{constructor(t,e){super(),this.pristine=t,this.source=e}},Ls=class extends bn{constructor(t,e){super(),this.touched=t,this.source=e}},ur=class extends bn{constructor(t,e){super(),this.status=t,this.source=e}},ku=class extends bn{constructor(t){super(),this.source=t}},Au=class extends bn{constructor(t){super(),this.source=t}};function qg(n){return(Ta(n)?n.validators:n)||null}function uC(n){return Array.isArray(n)?jg(n):n||null}function Wg(n,t){return(Ta(t)?t.asyncValidators:n)||null}function dC(n){return Array.isArray(n)?Ug(n):n||null}function Ta(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function hC(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new ee(1e3,"");if(!i[e])throw new ee(1001,"")}function fC(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new ee(1002,"")})}var ka=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Vr(()=>this.statusReactive()),this.statusReactive=Pr(void 0),this._pristine=Vr(()=>this.pristineReactive()),this.pristineReactive=Pr(!0),this._touched=Vr(()=>this.touchedReactive()),this.touchedReactive=Pr(!1),this._events=new Oe,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return mt(this.statusReactive)}set status(t){mt(()=>this.statusReactive.set(t))}get valid(){return this.status===Ns}get invalid(){return this.status===Ca}get pending(){return this.status==cr}get disabled(){return this.status===Ps}get enabled(){return this.status!==Ps}get pristine(){return mt(this.pristineReactive)}set pristine(t){mt(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return mt(this.touchedReactive)}set touched(t){mt(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(xg(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(xg(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Eg(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Eg(t,this._rawAsyncValidators))}hasValidator(t){return Sa(this._rawValidators,t)}hasAsyncValidator(t){return Sa(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched($(D({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Ls(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new Ls(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty($(D({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Fs(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new Fs(!0,i))}markAsPending(t={}){this.status=cr;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ur(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending($(D({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ps,this.errors=null,this._forEachChild(r=>{r.disable($(D({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ma(this.value,i)),this._events.next(new ur(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors($(D({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ns,this._forEachChild(i=>{i.enable($(D({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors($(D({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ns||this.status===cr)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ma(this.value,e)),this._events.next(new ur(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity($(D({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ps:Ns}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=cr,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=Fg(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new ur(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new ye,this.statusChanges=new ye}_calculateStatus(){return this._allControlsDisabled()?Ps:this.errors?Ca:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cr)?cr:this._anyControlsHaveStatus(Ca)?Ca:Ns}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new Fs(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Ls(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ta(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=uC(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=dC(this._rawAsyncValidators)}},ii=class extends ka{constructor(t,e,i){super(qg(e),Wg(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){fC(this,!0,t),Object.keys(t).forEach(i=>{hC(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Ra=new te("CallSetDisabledState",{providedIn:"root",factory:()=>Na}),Na="always";function Kg(n,t){return[...t.path,n]}function Ou(n,t,e=Na){Ru(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),gC(n,t),yC(n,t),mC(n,t),pC(n,t)}function Mg(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Oa(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Aa(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function pC(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Ru(n,t){let e=Hg(n);t.validator!==null?n.setValidators(Sg(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=Gg(n);t.asyncValidator!==null?n.setAsyncValidators(Sg(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Aa(t._rawValidators,r),Aa(t._rawAsyncValidators,r)}function Oa(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=Hg(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(t.asyncValidator!==null){let r=Gg(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}let i=()=>{};return Aa(t._rawValidators,i),Aa(t._rawAsyncValidators,i),e}function gC(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Jg(n,t)})}function mC(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Jg(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function Jg(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function yC(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function vC(n,t){n==null,Ru(n,t)}function _C(n,t){return Oa(n,t)}function Yg(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function bC(n){return Object.getPrototypeOf(n.constructor)===Tg}function wC(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Zg(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===ri?e=s:bC(s)?i=s:r=s}),r||i||e||null}function CC(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function kg(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Ag(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var bt=class extends ka{constructor(t=null,e,i){super(qg(e),Wg(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ta(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Ag(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){kg(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){kg(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Ag(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var DC=n=>n instanceof bt;var SC={provide:ni,useExisting:jt(()=>Nu)},Og=Promise.resolve(),Nu=(()=>{class n extends ni{constructor(e,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new bt,this._registered=!1,this.name="",this.update=new ye,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Zg(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Yg(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ou(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Og.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&fn(i);Og.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Kg(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||n)(w(ti,9),w(Ia,10),w(Tu,10),w(dr,10),w(At,8),w(Ra,8))}}static{this.\u0275dir=le({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[kt([SC]),xt,Xe]})}}return n})(),$s=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=le({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var Qg=new te("");var xC={provide:ti,useExisting:jt(()=>hr)},hr=(()=>{class n extends ti{get submitted(){return mt(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}constructor(e,i,r){super(),this.callSetDisabledState=r,this._submitted=Vr(()=>this._submittedReactive()),this._submittedReactive=Pr(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ye,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Oa(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return Ou(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Mg(e.control||null,e,!1),CC(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),wC(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new ku(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new Au(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(Mg(i||null,e),DC(r)&&(Ou(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);vC(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&_C(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ru(this.form,this),this._oldForm&&Oa(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||n)(w(Ia,10),w(Tu,10),w(Ra,8))}}static{this.\u0275dir=le({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&R("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[kt([xC]),xt,Xe]})}}return n})();var EC={provide:ni,useExisting:jt(()=>fr)},fr=(()=>{class n extends ni{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,i,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new ye,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Zg(this,s)}ngOnChanges(e){this._added||this._setUpControl(),Yg(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Kg(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||n)(w(ti,13),w(Ia,10),w(Tu,10),w(dr,10),w(Qg,8))}}static{this.\u0275dir=le({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[kt([EC]),xt,Xe]})}}return n})();var MC=(()=>{class n{constructor(){this._validator=Da}ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Da,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=le({type:n,features:[Xe]})}}return n})();var kC={provide:Ia,useExisting:jt(()=>Pu),multi:!0};var Pu=(()=>{class n extends MC{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=fn,this.createValidator=e=>Ng}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Tn(n)))(r||n)}})()}static{this.\u0275dir=le({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Fi("required",r._enabled?"":null)},inputs:{required:"required"},features:[kt([kC]),xt]})}}return n})();var Xg=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ht({type:n})}static{this.\u0275inj=dt({})}}return n})();var em=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ra,useValue:e.callSetDisabledState??Na}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ht({type:n})}static{this.\u0275inj=dt({imports:[Xg]})}}return n})(),Pa=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Qg,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Ra,useValue:e.callSetDisabledState??Na}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ht({type:n})}static{this.\u0275inj=dt({imports:[Xg]})}}return n})();var nm=n=>typeof n>"u"||n===null,AC=n=>n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`),OC=n=>{let t={};return Object.keys(n).forEach(e=>{n[e]&&(t[e]=n[e])}),t},Fa=n=>{let t=OC(n);return Object.entries(t).map(([e,i])=>`${AC(e)}:${i}`).join(";")},pr=class extends Error{constructor(t){super(t),this.name=this.constructor.name}},Fu=()=>{let n=Date.now().toString(36),t=Math.random().toString(36).substring(2,7);return`${n}${t}`},im=(n,t,e)=>Math.min(Math.max(n,t),e);function Ee(n){this.content=n}Ee.prototype={constructor:Ee,find:function(n){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===n)return t;return-1},get:function(n){var t=this.find(n);return t==-1?void 0:this.content[t+1]},update:function(n,t,e){var i=e&&e!=n?this.remove(e):this,r=i.find(n),s=i.content.slice();return r==-1?s.push(e||n,t):(s[r+1]=t,e&&(s[r]=e)),new Ee(s)},remove:function(n){var t=this.find(n);if(t==-1)return this;var e=this.content.slice();return e.splice(t,2),new Ee(e)},addToStart:function(n,t){return new Ee([n,t].concat(this.remove(n).content))},addToEnd:function(n,t){var e=this.remove(n).content.slice();return e.push(n,t),new Ee(e)},addBefore:function(n,t,e){var i=this.remove(t),r=i.content.slice(),s=i.find(n);return r.splice(s==-1?r.length:s,0,t,e),new Ee(r)},forEach:function(n){for(var t=0;t<this.content.length;t+=2)n(this.content[t],this.content[t+1])},prepend:function(n){return n=Ee.from(n),n.size?new Ee(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Ee.from(n),n.size?new Ee(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var t=this;n=Ee.from(n);for(var e=0;e<n.content.length;e+=2)t=t.remove(n.content[e]);return t},toObject:function(){var n={};return this.forEach(function(t,e){n[t]=e}),n},get size(){return this.content.length>>1}};Ee.from=function(n){if(n instanceof Ee)return n;var t=[];if(n)for(var e in n)t.push(e,n[e]);return new Ee(t)};var Lu=Ee;function fm(n,t,e){for(let i=0;;i++){if(i==n.childCount||i==t.childCount)return n.childCount==t.childCount?null:e;let r=n.child(i),s=t.child(i);if(r==s){e+=r.nodeSize;continue}if(!r.sameMarkup(s))return e;if(r.isText&&r.text!=s.text){for(let o=0;r.text[o]==s.text[o];o++)e++;return e}if(r.content.size||s.content.size){let o=fm(r.content,s.content,e+1);if(o!=null)return o}e+=r.nodeSize}}function pm(n,t,e,i){for(let r=n.childCount,s=t.childCount;;){if(r==0||s==0)return r==s?null:{a:e,b:i};let o=n.child(--r),a=t.child(--s),l=o.nodeSize;if(o==a){e-=l,i-=l;continue}if(!o.sameMarkup(a))return{a:e,b:i};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,e--,i--;return{a:e,b:i}}if(o.content.size||a.content.size){let c=pm(o.content,a.content,e-1,i-1);if(c)return c}e-=l,i-=l}}var b=class n{constructor(t,e){if(this.content=t,this.size=e||0,e==null)for(let i=0;i<t.length;i++)this.size+=t[i].nodeSize}nodesBetween(t,e,i,r=0,s){for(let o=0,a=0;a<e;o++){let l=this.content[o],c=a+l.nodeSize;if(c>t&&i(l,r+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,t-u),Math.min(l.content.size,e-u),i,r+u)}a=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,i,r){let s="",o=!0;return this.nodesBetween(t,e,(a,l)=>{let c=a.isText?a.text.slice(Math.max(t,l)-l,e-l):a.isLeaf?r?typeof r=="function"?r(a):r:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&i&&(o?o=!1:s+=i),s+=c},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,i=t.firstChild,r=this.content.slice(),s=0;for(e.isText&&e.sameMarkup(i)&&(r[r.length-1]=e.withText(e.text+i.text),s=1);s<t.content.length;s++)r.push(t.content[s]);return new n(r,this.size+t.size)}cut(t,e=this.size){if(t==0&&e==this.size)return this;let i=[],r=0;if(e>t)for(let s=0,o=0;o<e;s++){let a=this.content[s],l=o+a.nodeSize;l>t&&((o<t||l>e)&&(a.isText?a=a.cut(Math.max(0,t-o),Math.min(a.text.length,e-o)):a=a.cut(Math.max(0,t-o-1),Math.min(a.content.size,e-o-1))),i.push(a),r+=a.nodeSize),o=l}return new n(i,r)}cutByIndex(t,e){return t==e?n.empty:t==0&&e==this.content.length?this:new n(this.content.slice(t,e))}replaceChild(t,e){let i=this.content[t];if(i==e)return this;let r=this.content.slice(),s=this.size+e.nodeSize-i.nodeSize;return r[t]=e,new n(r,s)}addToStart(t){return new n([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new n(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,i=0;e<this.content.length;e++){let r=this.content[e];t(r,i,e),i+=r.nodeSize}}findDiffStart(t,e=0){return fm(this,t,e)}findDiffEnd(t,e=this.size,i=t.size){return pm(this,t,e,i)}findIndex(t,e=-1){if(t==0)return La(0,t);if(t==this.size)return La(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let i=0,r=0;;i++){let s=this.child(i),o=r+s.nodeSize;if(o>=t)return o==t||e>0?La(i+1,o):La(i,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return n.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new n(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return n.empty;let e,i=0;for(let r=0;r<t.length;r++){let s=t[r];i+=s.nodeSize,r&&s.isText&&t[r-1].sameMarkup(s)?(e||(e=t.slice(0,r)),e[e.length-1]=s.withText(e[e.length-1].text+s.text)):e&&e.push(s)}return new n(e||t,i)}static from(t){if(!t)return n.empty;if(t instanceof n)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new n([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};b.empty=new b([],0);var Vu={index:0,offset:0};function La(n,t){return Vu.index=n,Vu.offset=t,Vu}function Ba(n,t){if(n===t)return!0;if(!(n&&typeof n=="object")||!(t&&typeof t=="object"))return!1;let e=Array.isArray(n);if(Array.isArray(t)!=e)return!1;if(e){if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(!Ba(n[i],t[i]))return!1}else{for(let i in n)if(!(i in t)||!Ba(n[i],t[i]))return!1;for(let i in t)if(!(i in n))return!1}return!0}var Y=(()=>{class n{constructor(e,i){this.type=e,this.attrs=i}addToSet(e){let i,r=!1;for(let s=0;s<e.length;s++){let o=e[s];if(this.eq(o))return e;if(this.type.excludes(o.type))i||(i=e.slice(0,s));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(i||(i=e.slice(0,s)),i.push(this),r=!0),i&&i.push(o)}}return i||(i=e.slice()),r||i.push(this),i}removeFromSet(e){for(let i=0;i<e.length;i++)if(this.eq(e[i]))return e.slice(0,i).concat(e.slice(i+1));return e}isInSet(e){for(let i=0;i<e.length;i++)if(this.eq(e[i]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ba(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let i in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,i){if(!i)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[i.type];if(!r)throw new RangeError(`There is no mark type ${i.type} in this schema`);let s=r.create(i.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,i){if(e==i)return!0;if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(i[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return n.none;if(e instanceof n)return[e];let i=e.slice();return i.sort((r,s)=>r.type.rank-s.type.rank),i}}return n.none=[],n})(),ai=class extends Error{},x=class n{constructor(t,e,i){this.content=t,this.openStart=e,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let i=mm(this.content,t+this.openStart,e);return i&&new n(i,this.openStart,this.openEnd)}removeBetween(t,e){return new n(gm(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return n.empty;let i=e.openStart||0,r=e.openEnd||0;if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new n(b.fromJSON(t,e.content),i,r)}static maxOpen(t,e=!0){let i=0,r=0;for(let s=t.firstChild;s&&!s.isLeaf&&(e||!s.type.spec.isolating);s=s.firstChild)i++;for(let s=t.lastChild;s&&!s.isLeaf&&(e||!s.type.spec.isolating);s=s.lastChild)r++;return new n(t,i,r)}};x.empty=new x(b.empty,0,0);function gm(n,t,e){let{index:i,offset:r}=n.findIndex(t),s=n.maybeChild(i),{index:o,offset:a}=n.findIndex(e);if(r==t||s.isText){if(a!=e&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,t).append(n.cut(e))}if(i!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(i,s.copy(gm(s.content,t-r-1,e-r-1)))}function mm(n,t,e,i){let{index:r,offset:s}=n.findIndex(t),o=n.maybeChild(r);if(s==t||o.isText)return i&&!i.canReplace(r,r,e)?null:n.cut(0,t).append(e).append(n.cut(t));let a=mm(o.content,t-s-1,e);return a&&n.replaceChild(r,o.copy(a))}function IC(n,t,e){if(e.openStart>n.depth)throw new ai("Inserted content deeper than insertion position");if(n.depth-e.openStart!=t.depth-e.openEnd)throw new ai("Inconsistent open depths");return ym(n,t,e,0)}function ym(n,t,e,i){let r=n.index(i),s=n.node(i);if(r==t.index(i)&&i<n.depth-e.openStart){let o=ym(n,t,e,i+1);return s.copy(s.content.replaceChild(r,o))}else if(e.content.size)if(!e.openStart&&!e.openEnd&&n.depth==i&&t.depth==i){let o=n.parent,a=o.content;return oi(o,a.cut(0,n.parentOffset).append(e.content).append(a.cut(t.parentOffset)))}else{let{start:o,end:a}=TC(e,n);return oi(s,_m(n,o,a,t,i))}else return oi(s,$a(n,t,i))}function vm(n,t){if(!t.type.compatibleContent(n.type))throw new ai("Cannot join "+t.type.name+" onto "+n.type.name)}function $u(n,t,e){let i=n.node(e);return vm(i,t.node(e)),i}function si(n,t){let e=t.length-1;e>=0&&n.isText&&n.sameMarkup(t[e])?t[e]=n.withText(t[e].text+n.text):t.push(n)}function js(n,t,e,i){let r=(t||n).node(e),s=0,o=t?t.index(e):r.childCount;n&&(s=n.index(e),n.depth>e?s++:n.textOffset&&(si(n.nodeAfter,i),s++));for(let a=s;a<o;a++)si(r.child(a),i);t&&t.depth==e&&t.textOffset&&si(t.nodeBefore,i)}function oi(n,t){return n.type.checkContent(t),n.copy(t)}function _m(n,t,e,i,r){let s=n.depth>r&&$u(n,t,r+1),o=i.depth>r&&$u(e,i,r+1),a=[];return js(null,n,r,a),s&&o&&t.index(r)==e.index(r)?(vm(s,o),si(oi(s,_m(n,t,e,i,r+1)),a)):(s&&si(oi(s,$a(n,t,r+1)),a),js(t,e,r,a),o&&si(oi(o,$a(e,i,r+1)),a)),js(i,null,r,a),new b(a)}function $a(n,t,e){let i=[];if(js(null,n,e,i),n.depth>e){let r=$u(n,t,e+1);si(oi(r,$a(n,t,e+1)),i)}return js(t,null,e,i),new b(i)}function TC(n,t){let e=t.depth-n.openStart,r=t.node(e).copy(n.content);for(let s=e-1;s>=0;s--)r=t.node(s).copy(b.from(r));return{start:r.resolveNoCache(n.openStart+e),end:r.resolveNoCache(r.content.size-n.openEnd-e)}}var ja=class n{constructor(t,e,i){this.pos=t,this.path=e,this.parentOffset=i,this.depth=e.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=t.child(e);return i?t.child(e).cut(i):r}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):t==0?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let i=this.path[e*3],r=e==0?0:this.path[e*3-1]+1;for(let s=0;s<t;s++)r+=i.child(s).nodeSize;return r}marks(){let t=this.parent,e=this.index();if(t.content.size==0)return Y.none;if(this.textOffset)return t.child(e).marks;let i=t.maybeChild(e-1),r=t.maybeChild(e);if(!i){let a=i;i=r,r=a}let s=i.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!r||!s[o].isInSet(r.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let i=e.marks,r=t.parent.maybeChild(t.index());for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!r||!i[s].isInSet(r.marks))&&(i=i[s--].removeFromSet(i));return i}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);i>=0;i--)if(t.pos<=this.end(i)&&(!e||e(this.node(i))))return new li(this,t,i);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let i=[],r=0,s=e;for(let o=t;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(i.push(o,a,r+l),!c||(o=o.child(a),o.isText))break;s=c-1,r+=l+1}return new n(e,i,s)}static resolveCached(t,e){let i=rm.get(t);if(i)for(let s=0;s<i.elts.length;s++){let o=i.elts[s];if(o.pos==e)return o}else rm.set(t,i=new ju);let r=i.elts[i.i]=n.resolve(t,e);return i.i=(i.i+1)%RC,r}},ju=class{constructor(){this.elts=[],this.i=0}},RC=12,rm=new WeakMap,li=class{constructor(t,e,i){this.$from=t,this.$to=e,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},NC=Object.create(null),Rt=class n{constructor(t,e,i,r=Y.none){this.type=t,this.attrs=e,this.marks=r,this.content=i||b.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,i,r=0){this.content.nodesBetween(t,e,i,r,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,i,r){return this.content.textBetween(t,e,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,i){return this.type==t&&Ba(this.attrs,e||t.defaultAttrs||NC)&&Y.sameSet(this.marks,i||Y.none)}copy(t=null){return t==this.content?this:new n(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new n(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return t==0&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,i=!1){if(t==e)return x.empty;let r=this.resolve(t),s=this.resolve(e),o=i?0:r.sharedDepth(e),a=r.start(o),c=r.node(o).content.cut(r.pos-a,s.pos-a);return new x(c,r.depth-o,s.depth-o)}replace(t,e,i){return IC(this.resolve(t),this.resolve(e),i)}nodeAt(t){for(let e=this;;){let{index:i,offset:r}=e.content.findIndex(t);if(e=e.maybeChild(i),!e)return null;if(r==t||e.isText)return e;t-=r+1}}childAfter(t){let{index:e,offset:i}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:i}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:e,offset:i}=this.content.findIndex(t);if(i<t)return{node:this.content.child(e),index:e,offset:i};let r=this.content.child(e-1);return{node:r,index:e-1,offset:i-r.nodeSize}}resolve(t){return ja.resolveCached(this,t)}resolveNoCache(t){return ja.resolve(this,t)}rangeHasMark(t,e,i){let r=!1;return e>t&&this.nodesBetween(t,e,s=>(i.isInSet(s.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),bm(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,i=b.empty,r=0,s=i.childCount){let o=this.contentMatchAt(t).matchFragment(i,r,s),a=o&&o.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(let l=r;l<s;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0}canReplaceWith(t,e,i,r){if(r&&!this.type.allowsMarks(r))return!1;let s=this.contentMatchAt(t).matchType(i),o=s&&s.matchFragment(this.content,e);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Y.none;for(let e=0;e<this.marks.length;e++){let i=this.marks[e];i.type.checkAttrs(i.attrs),t=i.addToSet(t)}if(!Y.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(e=>e.toJSON())),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let i;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=e.marks.map(t.markFromJSON)}if(e.type=="text"){if(typeof e.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(e.text,i)}let r=b.fromJSON(t,e.content),s=t.nodeType(e.type).create(e.attrs,r,i);return s.type.checkAttrs(s.attrs),s}};Rt.prototype.text=void 0;var zu=class n extends Rt{constructor(t,e,i,r){if(super(t,e,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):bm(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new n(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new n(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return t==0&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}};function bm(n,t){for(let e=n.length-1;e>=0;e--)t=n[e].type.name+"("+t+")";return t}var ci=class n{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let i=new Uu(t,e);if(i.next==null)return n.empty;let r=wm(i);i.next&&i.err("Unexpected trailing text");let s=jC($C(r));return zC(s,i),s}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,i=t.childCount){let r=this;for(let s=e;r&&s<i;s++)r=r.matchType(t.child(s).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!(e.isText||e.hasRequiredAttrs()))return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let i=0;i<t.next.length;i++)if(this.next[e].type==t.next[i].type)return!0;return!1}fillBefore(t,e=!1,i=0){let r=[this];function s(o,a){let l=o.matchFragment(t,i);if(l&&(!e||l.validEnd))return b.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&r.indexOf(d)==-1){r.push(d);let h=s(d,a.concat(u));if(h)return h}}return null}return s(this,[])}findWrapping(t){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==t)return this.wrapCache[i+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),s=r.match;if(s.matchType(t)){let o=[];for(let a=r;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in e)&&(!r.type||l.validEnd)&&(i.push({match:a.contentMatch,type:a,via:r}),e[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function e(i){t.push(i);for(let r=0;r<i.next.length;r++)t.indexOf(i.next[r].next)==-1&&e(i.next[r].next)}return e(this),t.map((i,r)=>{let s=r+(i.validEnd?"*":" ")+" ";for(let o=0;o<i.next.length;o++)s+=(o?", ":"")+i.next[o].type.name+"->"+t.indexOf(i.next[o].next);return s}).join(`
`)}};ci.empty=new ci(!0);var Uu=class{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}};function wm(n){let t=[];do t.push(PC(n));while(n.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function PC(n){let t=[];do t.push(FC(n));while(n.next&&n.next!=")"&&n.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function FC(n){let t=BC(n);for(;;)if(n.eat("+"))t={type:"plus",expr:t};else if(n.eat("*"))t={type:"star",expr:t};else if(n.eat("?"))t={type:"opt",expr:t};else if(n.eat("{"))t=LC(n,t);else break;return t}function sm(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let t=Number(n.next);return n.pos++,t}function LC(n,t){let e=sm(n),i=e;return n.eat(",")&&(n.next!="}"?i=sm(n):i=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:e,max:i,expr:t}}function VC(n,t){let e=n.nodeTypes,i=e[t];if(i)return[i];let r=[];for(let s in e){let o=e[s];o.isInGroup(t)&&r.push(o)}return r.length==0&&n.err("No node type or group '"+t+"' found"),r}function BC(n){if(n.eat("(")){let t=wm(n);return n.eat(")")||n.err("Missing closing paren"),t}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let t=VC(n,n.next).map(e=>(n.inline==null?n.inline=e.isInline:n.inline!=e.isInline&&n.err("Mixing inline and block content"),{type:"name",value:e}));return n.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function $C(n){let t=[[]];return r(s(n,0),e()),t;function e(){return t.push([])-1}function i(o,a,l){let c={term:l,to:a};return t[o].push(c),c}function r(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;r(c,a=e())}else if(o.type=="star"){let l=e();return i(a,l),r(s(o.expr,l),l),[i(l)]}else if(o.type=="plus"){let l=e();return r(s(o.expr,a),l),r(s(o.expr,l),l),[i(l)]}else{if(o.type=="opt")return[i(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=e();r(s(o.expr,l),u),l=u}if(o.max==-1)r(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=e();i(l,u),r(s(o.expr,l),u),l=u}return[i(l)]}else{if(o.type=="name")return[i(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Cm(n,t){return t-n}function om(n,t){let e=[];return i(t),e.sort(Cm);function i(r){let s=n[r];if(s.length==1&&!s[0].term)return i(s[0].to);e.push(r);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&e.indexOf(l)==-1&&i(l)}}}function jC(n){let t=Object.create(null);return e(om(n,0));function e(i){let r=[];i.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<r.length;u++)r[u][0]==a&&(c=r[u][1]);om(n,l).forEach(u=>{c||r.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=t[i.join(",")]=new ci(i.indexOf(n.length-1)>-1);for(let o=0;o<r.length;o++){let a=r[o][1].sort(Cm);s.next.push({type:r[o][0],next:t[a.join(",")]||e(a)})}return s}}function zC(n,t){for(let e=0,i=[n];e<i.length;e++){let r=i[e],s=!r.validEnd,o=[];for(let a=0;a<r.next.length;a++){let{type:l,next:c}=r.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),i.indexOf(c)==-1&&i.push(c)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Dm(n){let t=Object.create(null);for(let e in n){let i=n[e];if(!i.hasDefault)return null;t[e]=i.default}return t}function Sm(n,t){let e=Object.create(null);for(let i in n){let r=t&&t[i];if(r===void 0){let s=n[i];if(s.hasDefault)r=s.default;else throw new RangeError("No value supplied for attribute "+i)}e[i]=r}return e}function xm(n,t,e,i){for(let r in t)if(!(r in n))throw new RangeError(`Unsupported attribute ${r} for ${e} of type ${r}`);for(let r in n){let s=n[r];s.validate&&s.validate(t[r])}}function Em(n,t){let e=Object.create(null);if(t)for(let i in t)e[i]=new Hu(n,i,t[i]);return e}var za=class n{constructor(t,e,i){this.name=t,this.schema=e,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=Em(t,i.attrs),this.defaultAttrs=Dm(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ci.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:Sm(this.attrs,t)}create(t=null,e,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Rt(this,this.computeAttrs(t),b.from(e),Y.setFrom(i))}createChecked(t=null,e,i){return e=b.from(e),this.checkContent(e),new Rt(this,this.computeAttrs(t),e,Y.setFrom(i))}createAndFill(t=null,e,i){if(t=this.computeAttrs(t),e=b.from(e),e.size){let o=this.contentMatch.fillBefore(e);if(!o)return null;e=o.append(e)}let r=this.contentMatch.matchFragment(e),s=r&&r.fillBefore(b.empty,!0);return s?new Rt(this,t,e.append(s),Y.setFrom(i)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let i=0;i<t.childCount;i++)if(!this.allowsMarks(t.child(i).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){xm(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let e;for(let i=0;i<t.length;i++)this.allowsMarkType(t[i].type)?e&&e.push(t[i]):e||(e=t.slice(0,i));return e?e.length?e:Y.none:t}static compile(t,e){let i=Object.create(null);t.forEach((s,o)=>i[s]=new n(s,e,o));let r=e.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let s in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function UC(n,t,e){let i=e.split("|");return r=>{let s=r===null?"null":typeof r;if(i.indexOf(s)<0)throw new RangeError(`Expected value of type ${i} for attribute ${t} on type ${n}, got ${s}`)}}var Hu=class{constructor(t,e,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?UC(t,e,i.validate):i.validate}get isRequired(){return!this.hasDefault}},Us=class n{constructor(t,e,i,r){this.name=t,this.rank=e,this.schema=i,this.spec=r,this.attrs=Em(t,r.attrs),this.excluded=null;let s=Dm(this.attrs);this.instance=s?new Y(this,s):null}create(t=null){return!t&&this.instance?this.instance:new Y(this,Sm(this.attrs,t))}static compile(t,e){let i=Object.create(null),r=0;return t.forEach((s,o)=>i[s]=new n(s,r++,e,o)),i}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}checkAttrs(t){xm(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}},Ua=class{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let e=this.spec={};for(let r in t)e[r]=t[r];e.nodes=Lu.from(t.nodes),e.marks=Lu.from(t.marks||{}),this.nodes=za.compile(this.spec.nodes,this),this.marks=Us.compile(this.spec.marks,this);let i=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let s=this.nodes[r],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=i[o]||(i[o]=ci.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?am(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let r in this.marks){let s=this.marks[r],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:am(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,i,r){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof za){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(e,i,r)}text(t,e){let i=this.nodes.text;return new zu(i,i.defaultAttrs,t,Y.setFrom(e))}mark(t,e){return typeof t=="string"&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return Rt.fromJSON(this,t)}markFromJSON(t){return Y.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}};function am(n,t){let e=[];for(let i=0;i<t.length;i++){let r=t[i],s=n.marks[r],o=s;if(s)e.push(s);else for(let a in n.marks){let l=n.marks[a];(r=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&e.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[i]+"'")}return e}function HC(n){return n.tag!=null}function GC(n){return n.style!=null}var wn=class n{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[];let i=this.matchedStyles=[];e.forEach(r=>{if(HC(r))this.tags.push(r);else if(GC(r)){let s=/[^=]*/.exec(r.style)[0];i.indexOf(s)<0&&i.push(s),this.styles.push(r)}}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let s=t.nodes[r.node];return s.contentMatch.matchType(s)})}parse(t,e={}){let i=new Ha(this,e,!1);return i.addAll(t,Y.none,e.from,e.to),i.finish()}parseSlice(t,e={}){let i=new Ha(this,e,!0);return i.addAll(t,Y.none,e.from,e.to),x.maxOpen(i.finish())}matchTag(t,e,i){for(let r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){let s=this.tags[r];if(KC(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||e.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,e,i,r){for(let s=r?this.styles.indexOf(r)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(t)!=0||o.context&&!i.matchesContext(o.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=e))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(t){let e=[];function i(r){let s=r.priority==null?50:r.priority,o=0;for(;o<e.length;o++){let a=e[o];if((a.priority==null?50:a.priority)<s)break}e.splice(o,0,r)}for(let r in t.marks){let s=t.marks[r].spec.parseDOM;s&&s.forEach(o=>{i(o=cm(o)),o.mark||o.ignore||o.clearMark||(o.mark=r)})}for(let r in t.nodes){let s=t.nodes[r].spec.parseDOM;s&&s.forEach(o=>{i(o=cm(o)),o.node||o.ignore||o.mark||(o.node=r)})}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new n(t,n.schemaRules(t)))}},Mm={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},qC={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},km={ol:!0,ul:!0},Hs=1,Gu=2,zs=4;function lm(n,t,e){return t!=null?(t?Hs:0)|(t==="full"?Gu:0):n&&n.whitespace=="pre"?Hs|Gu:e&~zs}var gr=class{constructor(t,e,i,r,s,o){this.type=t,this.attrs=e,this.marks=i,this.solid=r,this.options=o,this.content=[],this.activeMarks=Y.none,this.match=s||(o&zs?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(b.from(t));if(e)this.match=this.type.contentMatch.matchFragment(e);else{let i=this.type.contentMatch,r;return(r=i.findWrapping(t.type))?(this.match=i,r):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Hs)){let i=this.content[this.content.length-1],r;if(i&&i.isText&&(r=/[ \t\r\n\u000c]+$/.exec(i.text))){let s=i;i.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-r[0].length))}}let e=b.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(b.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Mm.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}},Ha=class{constructor(t,e,i){this.parser=t,this.options=e,this.isOpen=i,this.open=0,this.localPreserveWS=!1;let r=e.topNode,s,o=lm(null,e.preserveWhitespace,0)|(i?zs:0);r?s=new gr(r.type,r.attrs,Y.none,!0,e.topMatch||r.type.contentMatch,o):i?s=new gr(null,null,Y.none,!0,null,o):s=new gr(t.schema.topNodeType,null,Y.none,!0,null,o),this.nodes=[s],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,e){t.nodeType==3?this.addTextNode(t,e):t.nodeType==1&&this.addElement(t,e)}addTextNode(t,e){let i=t.nodeValue,r=this.top,s=r.options&Gu?"full":this.localPreserveWS||(r.options&Hs)>0;if(s==="full"||r.inlineContext(t)||/[^ \t\r\n\u000c]/.test(i)){if(s)s!=="full"?i=i.replace(/\r?\n|\r/g," "):i=i.replace(/\r\n?/g,`
`);else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let o=r.content[r.content.length-1],a=t.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(i=i.slice(1))}i&&this.insertNode(this.parser.schema.text(i),e),this.findInText(t)}else this.findInside(t)}addElement(t,e,i){let r=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),a;km.hasOwnProperty(o)&&this.parser.normalizeLists&&WC(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,i));e:if(l?l.ignore:qC.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,e);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let c,u=this.needsBlock;if(Mm.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,e);break e}let d=l&&l.skip?e:this.readStyles(t,e);d&&this.addAll(t,d),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(t,e);c&&this.addElementByRule(t,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=r}leafFallback(t,e){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),e)}ignoreFallback(t,e){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),e)}readStyles(t,e){let i=t.style;if(i&&i.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let s=this.parser.matchedStyles[r],o=i.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?e=e.filter(c=>!l.clearMark(c)):e=e.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return e}addElementByRule(t,e,i,r){let s,o;if(e.node)if(o=this.parser.schema.nodes[e.node],o.isLeaf)this.insertNode(o.create(e.attrs),i)||this.leafFallback(t,i);else{let l=this.enter(o,e.attrs||null,i,e.preserveWhitespace);l&&(s=!0,i=l)}else{let l=this.parser.schema.marks[e.mark];i=i.concat(l.create(e.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(r)this.addElement(t,i,r);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,i));else{let l=t;typeof e.contentElement=="string"?l=t.querySelector(e.contentElement):typeof e.contentElement=="function"?l=e.contentElement(t):e.contentElement&&(l=e.contentElement),this.findAround(t,l,!0),this.addAll(l,i),this.findAround(t,l,!1)}s&&this.sync(a)&&this.open--}addAll(t,e,i,r){let s=i||0;for(let o=i?t.childNodes[i]:t.firstChild,a=r==null?null:t.childNodes[r];o!=a;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,e);this.findAtPoint(t,s)}findPlace(t,e){let i,r;for(let s=this.open;s>=0;s--){let o=this.nodes[s],a=o.findWrapping(t);if(a&&(!i||i.length>a.length)&&(i=a,r=o,!a.length)||o.solid)break}if(!i)return null;this.sync(r);for(let s=0;s<i.length;s++)e=this.enterInner(i[s],null,e,!1);return e}insertNode(t,e){if(t.isInline&&this.needsBlock&&!this.top.type){let r=this.textblockFromContext();r&&(e=this.enterInner(r,null,e))}let i=this.findPlace(t,e);if(i){this.closeExtra();let r=this.top;r.match&&(r.match=r.match.matchType(t.type));let s=Y.none;for(let o of i.concat(t.marks))(r.type?r.type.allowsMarkType(o.type):um(o.type,t.type))&&(s=o.addToSet(s));return r.content.push(t.mark(s)),!0}return!1}enter(t,e,i,r){let s=this.findPlace(t.create(e),i);return s&&(s=this.enterInner(t,e,i,!0,r)),s}enterInner(t,e,i,r=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let a=lm(t,s,o.options);o.options&zs&&o.content.length==0&&(a|=zs);let l=Y.none;return i=i.filter(c=>(o.type?o.type.allowsMarkType(c.type):um(c.type,t))?(l=c.addToSet(l),!1):!0),this.nodes.push(new gr(t,e,l,r,null,a)),this.open++,i}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let e=this.open;e>=0;e--){if(this.nodes[e]==t)return this.open=e,!0;this.localPreserveWS&&(this.nodes[e].options|=Hs)}return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let i=this.nodes[e].content;for(let r=i.length-1;r>=0;r--)t+=i[r].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==t&&this.find[i].offset==e&&(this.find[i].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].pos==null&&t.nodeType==1&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,i){if(t!=e&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&t.nodeType==1&&t.contains(this.find[r].node)&&e.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),i=this.options.context,r=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),s=-(i?i.depth+1:0)+(r?0:1),o=(a,l)=>{for(;a>=0;a--){let c=e[a];if(c==""){if(a==e.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&r?this.nodes[l].type:i&&l>=s?i.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let i=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let e in this.parser.schema.nodes){let i=this.parser.schema.nodes[e];if(i.isTextblock&&i.defaultAttrs)return i}}};function WC(n){for(let t=n.firstChild,e=null;t;t=t.nextSibling){let i=t.nodeType==1?t.nodeName.toLowerCase():null;i&&km.hasOwnProperty(i)&&e?(e.appendChild(t),t=e):i=="li"?e=t:i&&(e=null)}}function KC(n,t){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,t)}function cm(n){let t={};for(let e in n)t[e]=n[e];return t}function um(n,t){let e=t.schema.nodes;for(let i in e){let r=e[i];if(!r.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==t||s.indexOf(u)<0&&o(u))return!0}};if(o(r.contentMatch))return!0}}var Xt=class n{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},i){i||(i=Bu(e).createDocumentFragment());let r=i,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)r=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,e);u&&(s.push([c,r]),r.appendChild(u.dom),r=u.contentDOM||u.dom)}}r.appendChild(this.serializeNodeInner(o,e))}),i}serializeNodeInner(t,e){let{dom:i,contentDOM:r}=Va(Bu(e),this.nodes[t.type.name](t),null,t.attrs);if(r){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,r)}return i}serializeNode(t,e={}){let i=this.serializeNodeInner(t,e);for(let r=t.marks.length-1;r>=0;r--){let s=this.serializeMark(t.marks[r],t.isInline,e);s&&((s.contentDOM||s.dom).appendChild(i),i=s.dom)}return i}serializeMark(t,e,i={}){let r=this.marks[t.type.name];return r&&Va(Bu(i),r(t,e),null,t.attrs)}static renderSpec(t,e,i=null,r){return Va(t,e,i,r)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new n(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=dm(t.nodes);return e.text||(e.text=i=>i.text),e}static marksFromSchema(t){return dm(t.marks)}};function dm(n){let t={};for(let e in n){let i=n[e].spec.toDOM;i&&(t[e]=i)}return t}function Bu(n){return n.document||window.document}var hm=new WeakMap;function JC(n){let t=hm.get(n);return t===void 0&&hm.set(n,t=YC(n)),t}function YC(n){let t=null;function e(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")t||(t=[]),t.push(i);else for(let r=0;r<i.length;r++)e(i[r]);else for(let r in i)e(i[r])}return e(n),t}function Va(n,t,e,i){if(typeof t=="string")return{dom:n.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let r=t[0],s;if(typeof r!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(s=JC(i))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=r.indexOf(" ");o>0&&(e=r.slice(0,o),r=r.slice(o+1));let a,l=e?n.createElementNS(e,r):n.createElement(r),c=t[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<t.length;d++){let h=t[d];if(h===0){if(d<t.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:p}=Va(n,h,e,i);if(l.appendChild(f),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}var Im=65535,Tm=Math.pow(2,16);function ZC(n,t){return n+t*Tm}function Am(n){return n&Im}function QC(n){return(n-(n&Im))/Tm}var Rm=1,Nm=2,Ga=4,Pm=8,Ws=class{constructor(t,e,i){this.pos=t,this.delInfo=e,this.recover=i}get deleted(){return(this.delInfo&Pm)>0}get deletedBefore(){return(this.delInfo&(Rm|Ga))>0}get deletedAfter(){return(this.delInfo&(Nm|Ga))>0}get deletedAcross(){return(this.delInfo&Ga)>0}},en=class n{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&n.empty)return n.empty}recover(t){let e=0,i=Am(t);if(!this.inverted)for(let r=0;r<i;r++)e+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[i*3]+e+QC(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,i){let r=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(t<=d){let h=c?t==l?-1:t==d?1:e:e,f=l+r+(h<0?0:u);if(i)return f;let p=t==(e<0?l:d)?null:ZC(a/3,t-l),g=t==l?Nm:t==d?Rm:Ga;return(e<0?t!=l:t!=d)&&(g|=Pm),new Ws(f,g,p)}r+=u-c}return i?t+r:new Ws(t+r,0,null)}touches(t,e){let i=0,r=Am(e),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let c=this.ranges[a+s],u=l+c;if(t<=u&&a==r*3)return!0;i+=this.ranges[a+o]-c}return!1}forEach(t){let e=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let o=this.ranges[r],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[r+e],u=this.ranges[r+i];t(a,a+c,l,l+u),s+=u-c}}invert(){return new n(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?n.empty:new n(t<0?[0,-t,0]:[0,0,t])}};en.empty=new en([]);var Ks=class n{constructor(t=[],e,i=0,r=t.length){this.maps=t,this.mirror=e,this.from=i,this.to=r}slice(t=0,e=this.maps.length){return new n(this.maps,this.mirror,t,e)}copy(){return new n(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),e!=null&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,i=this.maps.length;e<t.maps.length;e++){let r=t.getMirror(e);this.appendMap(t.maps[e],r!=null&&r<e?i+r:void 0)}}getMirror(t){if(this.mirror){for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,i=this.maps.length+t.maps.length;e>=0;e--){let r=t.getMirror(e);this.appendMap(t.maps[e].invert(),r!=null&&r>e?i-r-1:void 0)}}invert(){let t=new n;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let i=this.from;i<this.to;i++)t=this.maps[i].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,i){let r=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(t,e);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,t=this.maps[l].recover(a.recover);continue}}r|=a.delInfo,t=a.pos}return i?t:new Ws(t,r,null)}},qu=Object.create(null),pe=class{getMap(){return en.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=qu[e.stepType];if(!i)throw new RangeError(`No step type ${e.stepType} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in qu)throw new RangeError("Duplicate use of step JSON ID "+t);return qu[t]=e,e.prototype.jsonID=t,e}},be=class n{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new n(t,null)}static fail(t){return new n(null,t)}static fromReplace(t,e,i,r){try{return n.ok(t.replace(e,i,r))}catch(s){if(s instanceof ai)return n.fail(s.message);throw s}}};function Zu(n,t,e){let i=[];for(let r=0;r<n.childCount;r++){let s=n.child(r);s.content.size&&(s=s.copy(Zu(s.content,t,s))),s.isInline&&(s=t(s,e,r)),i.push(s)}return b.fromArray(i)}var Js=class n extends pe{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=t.resolve(this.from),r=i.node(i.sharedDepth(this.to)),s=new x(Zu(e.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),r),e.openStart,e.openEnd);return be.fromReplace(t,this.from,this.to,s)}invert(){return new ui(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new n(e.pos,i.pos,this.mark)}merge(t){return t instanceof n&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new n(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new n(e.from,e.to,t.markFromJSON(e.mark))}};pe.jsonID("addMark",Js);var ui=class n extends pe{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=new x(Zu(e.content,r=>r.mark(this.mark.removeFromSet(r.marks)),t),e.openStart,e.openEnd);return be.fromReplace(t,this.from,this.to,i)}invert(){return new Js(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new n(e.pos,i.pos,this.mark)}merge(t){return t instanceof n&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new n(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new n(e.from,e.to,t.markFromJSON(e.mark))}};pe.jsonID("removeMark",ui);var Ys=class n extends pe{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return be.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return be.fromReplace(t,this.pos,this.pos+1,new x(b.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let i=this.mark.addToSet(e.marks);if(i.length==e.marks.length){for(let r=0;r<e.marks.length;r++)if(!e.marks[r].isInSet(i))return new n(this.pos,e.marks[r]);return new n(this.pos,this.mark)}}return new Zs(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new n(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new n(e.pos,t.markFromJSON(e.mark))}};pe.jsonID("addNodeMark",Ys);var Zs=class n extends pe{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return be.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return be.fromReplace(t,this.pos,this.pos+1,new x(b.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return!e||!this.mark.isInSet(e.marks)?this:new Ys(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new n(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new n(e.pos,t.markFromJSON(e.mark))}};pe.jsonID("removeNodeMark",Zs);var Ke=class n extends pe{constructor(t,e,i,r=!1){super(),this.from=t,this.to=e,this.slice=i,this.structure=r}apply(t){return this.structure&&Ju(t,this.from,this.to)?be.fail("Structure replace would overwrite content"):be.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new en([this.from,this.to-this.from,this.slice.size])}invert(t){return new n(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deletedAcross&&i.deletedAcross?null:new n(e.pos,Math.max(e.pos,i.pos),this.slice)}merge(t){if(!(t instanceof n)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let e=this.slice.size+t.slice.size==0?x.empty:new x(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new n(this.from,this.to+(t.to-t.from),e,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let e=this.slice.size+t.slice.size==0?x.empty:new x(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new n(t.from,this.to,e,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new n(e.from,e.to,x.fromJSON(t,e.slice),!!e.structure)}};pe.jsonID("replace",Ke);var ge=class n extends pe{constructor(t,e,i,r,s,o,a=!1){super(),this.from=t,this.to=e,this.gapFrom=i,this.gapTo=r,this.slice=s,this.insert=o,this.structure=a}apply(t){if(this.structure&&(Ju(t,this.from,this.gapFrom)||Ju(t,this.gapTo,this.to)))return be.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return be.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,e.content);return i?be.fromReplace(t,this.from,this.to,i):be.fail("Content does not fit in gap")}getMap(){return new en([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new n(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1),r=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?i.pos:t.map(this.gapTo,1);return e.deletedAcross&&i.deletedAcross||r<e.pos||s>i.pos?null:new n(e.pos,i.pos,r,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number"||typeof e.gapFrom!="number"||typeof e.gapTo!="number"||typeof e.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new n(e.from,e.to,e.gapFrom,e.gapTo,x.fromJSON(t,e.slice),e.insert,!!e.structure)}};pe.jsonID("replaceAround",ge);function Ju(n,t,e){let i=n.resolve(t),r=e-t,s=i.depth;for(;r>0&&s>0&&i.indexAfter(s)==i.node(s).childCount;)s--,r--;if(r>0){let o=i.node(s).maybeChild(i.indexAfter(s));for(;r>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,r--}}return!1}function XC(n,t,e,i){let r=[],s=[],o,a;n.doc.nodesBetween(t,e,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!i.isInSet(d)&&u.type.allowsMarkType(i.type)){let h=Math.max(c,t),f=Math.min(c+l.nodeSize,e),p=i.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(p)||(o&&o.to==h&&o.mark.eq(d[g])?o.to=f:r.push(o=new ui(h,f,d[g])));a&&a.to==h?a.to=f:s.push(a=new Js(h,f,i))}}),r.forEach(l=>n.step(l)),s.forEach(l=>n.step(l))}function e1(n,t,e,i){let r=[],s=0;n.doc.nodesBetween(t,e,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(i instanceof Us){let c=o.marks,u;for(;u=i.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else i?i.isInSet(o.marks)&&(l=[i]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,e);for(let u=0;u<l.length;u++){let d=l[u],h;for(let f=0;f<r.length;f++){let p=r[f];p.step==s-1&&d.eq(r[f].style)&&(h=p)}h?(h.to=c,h.step=s):r.push({style:d,from:Math.max(a,t),to:c,step:s})}}}),r.forEach(o=>n.step(new ui(o.from,o.to,o.style)))}function Qu(n,t,e,i=e.contentMatch,r=!0){let s=n.doc.nodeAt(t),o=[],a=t+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,d=i.matchType(c.type);if(!d)o.push(new Ke(a,u,x.empty));else{i=d;for(let h=0;h<c.marks.length;h++)e.allowsMarkType(c.marks[h].type)||n.step(new ui(a,u,c.marks[h]));if(r&&c.isText&&e.whitespace!="pre"){let h,f=/\r?\n|\r/g,p;for(;h=f.exec(c.text);)p||(p=new x(b.from(e.schema.text(" ",e.allowedMarks(c.marks))),0,0)),o.push(new Ke(a+h.index,a+h.index+h[0].length,p))}}a=u}if(!i.validEnd){let l=i.fillBefore(b.empty,!0);n.replace(a,a,new x(l,0,0))}for(let l=o.length-1;l>=0;l--)n.step(o[l])}function t1(n,t,e){return(t==0||n.canReplace(t,n.childCount))&&(e==n.childCount||n.canReplace(0,e))}function di(n){let e=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth;;--i){let r=n.$from.node(i),s=n.$from.index(i),o=n.$to.indexAfter(i);if(i<n.depth&&r.canReplace(s,o,e))return i;if(i==0||r.type.spec.isolating||!t1(r,s,o))break}return null}function n1(n,t,e){let{$from:i,$to:r,depth:s}=t,o=i.before(s+1),a=r.after(s+1),l=o,c=a,u=b.empty,d=0;for(let p=s,g=!1;p>e;p--)g||i.index(p)>0?(g=!0,u=b.from(i.node(p).copy(u)),d++):l--;let h=b.empty,f=0;for(let p=s,g=!1;p>e;p--)g||r.after(p+1)<r.end(p)?(g=!0,h=b.from(r.node(p).copy(h)),f++):c++;n.step(new ge(l,c,o,a,new x(u.append(h),d,f),u.size-d,!0))}function yr(n,t,e=null,i=n){let r=i1(n,t),s=r&&r1(i,t);return s?r.map(Om).concat({type:t,attrs:e}).concat(s.map(Om)):null}function Om(n){return{type:n,attrs:null}}function i1(n,t){let{parent:e,startIndex:i,endIndex:r}=n,s=e.contentMatchAt(i).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return e.canReplaceWith(i,r,o)?s:null}function r1(n,t){let{parent:e,startIndex:i,endIndex:r}=n,s=e.child(i),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:t).contentMatch;for(let c=i;l&&c<r;c++)l=l.matchType(e.child(c).type);return!l||!l.validEnd?null:o}function s1(n,t,e){let i=b.empty;for(let o=e.length-1;o>=0;o--){if(i.size){let a=e[o].type.contentMatch.matchFragment(i);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=b.from(e[o].type.create(e[o].attrs,i))}let r=t.start,s=t.end;n.step(new ge(r,s,r,s,new x(i,0,0),e.length,!0))}function o1(n,t,e,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(t,e,(o,a)=>{let l=typeof r=="function"?r(o):r;if(o.isTextblock&&!o.hasMarkup(i,l)&&a1(n.doc,n.mapping.slice(s).map(a),i)){let c=null;if(i.schema.linebreakReplacement){let f=i.whitespace=="pre",p=!!i.contentMatch.matchType(i.schema.linebreakReplacement);f&&!p?c=!1:!f&&p&&(c=!0)}c===!1&&Lm(n,o,a,s),Qu(n,n.mapping.slice(s).map(a,1),i,void 0,c===null);let u=n.mapping.slice(s),d=u.map(a,1),h=u.map(a+o.nodeSize,1);return n.step(new ge(d,h,d+1,h-1,new x(b.from(i.create(l,null,o.marks)),0,0),1,!0)),c===!0&&Fm(n,o,a,s),!1}})}function Fm(n,t,e,i){t.forEach((r,s)=>{if(r.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(r.text);){let l=n.mapping.slice(i).map(e+1+s+o.index);n.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function Lm(n,t,e,i){t.forEach((r,s)=>{if(r.type==r.type.schema.linebreakReplacement){let o=n.mapping.slice(i).map(e+1+s);n.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function a1(n,t,e){let i=n.resolve(t),r=i.index();return i.parent.canReplaceWith(r,r+1,e)}function l1(n,t,e,i,r){let s=n.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");e||(e=s.type);let o=e.create(i,null,r||s.marks);if(s.isLeaf)return n.replaceWith(t,t+s.nodeSize,o);if(!e.validContent(s.content))throw new RangeError("Invalid content for node type "+e.name);n.step(new ge(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new x(b.from(o),0,0),1,!0))}function Cn(n,t,e=1,i){let r=n.resolve(t),s=r.depth-e,o=i&&i[i.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!o.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let c=r.depth-1,u=e-2;c>s;c--,u--){let d=r.node(c),h=r.index(c);if(d.type.spec.isolating)return!1;let f=d.content.cutByIndex(h,d.childCount),p=i&&i[u+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let g=i&&i[u]||d;if(!d.canReplace(h+1,d.childCount)||!g.type.validContent(f))return!1}let a=r.indexAfter(s),l=i&&i[0];return r.node(s).canReplaceWith(a,a,l?l.type:r.node(s+1).type)}function c1(n,t,e=1,i){let r=n.doc.resolve(t),s=b.empty,o=b.empty;for(let a=r.depth,l=r.depth-e,c=e-1;a>l;a--,c--){s=b.from(r.node(a).copy(s));let u=i&&i[c];o=b.from(u?u.type.create(u.attrs,o):r.node(a).copy(o))}n.step(new Ke(t,t,new x(s.append(o),e,e),!0))}function hi(n,t){let e=n.resolve(t),i=e.index();return d1(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(i,i+1)}function u1(n,t){t.content.size||n.type.compatibleContent(t.type);let e=n.contentMatchAt(n.childCount),{linebreakReplacement:i}=n.type.schema;for(let r=0;r<t.childCount;r++){let s=t.child(r),o=s.type==i?n.type.schema.nodes.text:s.type;if(e=e.matchType(o),!e||!n.type.allowsMarks(s.marks))return!1}return e.validEnd}function d1(n,t){return!!(n&&t&&!n.isLeaf&&u1(n,t))}function h1(n,t,e){let i=null,{linebreakReplacement:r}=n.doc.type.schema,s=n.doc.resolve(t-e),o=s.node().type;if(r&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(r);u&&!d?i=!1:!u&&d&&(i=!0)}let a=n.steps.length;if(i===!1){let u=n.doc.resolve(t+e);Lm(n,u.node(),u.before(),a)}o.inlineContent&&Qu(n,t+e-1,o,s.node().contentMatchAt(s.index()),i==null);let l=n.mapping.slice(a),c=l.map(t-e);if(n.step(new Ke(c,l.map(t+e,-1),x.empty,!0)),i===!0){let u=n.doc.resolve(c);Fm(n,u.node(),u.before(),n.steps.length)}return n}function f1(n,t,e){let i=n.resolve(t);if(i.parent.canReplaceWith(i.index(),i.index(),e))return t;if(i.parentOffset==0)for(let r=i.depth-1;r>=0;r--){let s=i.index(r);if(i.node(r).canReplaceWith(s,s,e))return i.before(r+1);if(s>0)return null}if(i.parentOffset==i.parent.content.size)for(let r=i.depth-1;r>=0;r--){let s=i.indexAfter(r);if(i.node(r).canReplaceWith(s,s,e))return i.after(r+1);if(s<i.node(r).childCount)return null}return null}function Vm(n,t,e){let i=n.resolve(t);if(!e.content.size)return t;let r=e.content;for(let s=0;s<e.openStart;s++)r=r.firstChild.content;for(let s=1;s<=(e.openStart==0&&e.size?2:1);s++)for(let o=i.depth;o>=0;o--){let a=o==i.depth?0:i.pos<=(i.start(o+1)+i.end(o+1))/2?-1:1,l=i.index(o)+(a>0?1:0),c=i.node(o),u=!1;if(s==1)u=c.canReplace(l,l,r);else{let d=c.contentMatchAt(l).findWrapping(r.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?i.pos:a<0?i.before(o+1):i.after(o+1)}return null}function Ja(n,t,e=t,i=x.empty){if(t==e&&!i.size)return null;let r=n.resolve(t),s=n.resolve(e);return Bm(r,s,i)?new Ke(t,e,i):new Yu(r,s,i).fit()}function Bm(n,t,e){return!e.openStart&&!e.openEnd&&n.start()==t.start()&&n.parent.canReplace(n.index(),t.index(),e.content)}var Yu=class{constructor(t,e,i){this.$from=t,this.$to=e,this.unplaced=i,this.frontier=[],this.placed=b.empty;for(let r=0;r<=t.depth;r++){let s=t.node(r);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(r))})}for(let r=t.depth;r>0;r--)this.placed=b.from(t.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(t<0?this.$to:i.doc.resolve(t));if(!r)return null;let s=this.placed,o=i.depth,a=r.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new x(s,o,a);return t>-1?new ge(i.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||i.pos!=this.$to.pos?new Ke(i.pos,r.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,i=0,r=this.unplaced.openEnd;i<t;i++){let s=e.firstChild;if(e.childCount>1&&(r=0),s.type.spec.isolating&&r<=i){t=i;break}e=s.content}for(let e=1;e<=2;e++)for(let i=e==1?t:this.unplaced.openStart;i>=0;i--){let r,s=null;i?(s=Wu(this.unplaced.content,i-1).firstChild,r=s.content):r=this.unplaced.content;let o=r.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(e==1&&(o?c.matchType(o.type)||(d=c.fillBefore(b.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:i,frontierDepth:a,parent:s,inject:d};if(e==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:i,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=Wu(t,e);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new x(t,e+1,Math.max(i,r.size+e>=t.size-i?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=Wu(t,e);if(r.childCount<=1&&e>0){let s=t.size-e<=e+r.size;this.unplaced=new x(Gs(t,e-1,1),e-1,s?e-1:i)}else this.unplaced=new x(Gs(t,e,1),e,i)}placeNodes({sliceDepth:t,frontierDepth:e,parent:i,inject:r,wrap:s}){for(;this.depth>e;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=i?i.content:o.content,l=o.openStart-t,c=0,u=[],{match:d,type:h}=this.frontier[e];if(r){for(let g=0;g<r.childCount;g++)u.push(r.child(g));d=d.matchFragment(r)}let f=a.size+t-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),y=d.matchType(g.type);if(!y)break;c++,(c>1||l==0||g.content.size)&&(d=y,u.push($m(g.mark(h.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=qs(this.placed,e,b.from(u)),this.frontier[e].match=d,p&&f<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,y=a;g<f;g++){let C=y.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),y=C.content}this.unplaced=p?t==0?x.empty:new x(Gs(o.content,t-1,1),t-1,f<0?o.openEnd:t-1):new x(Gs(o.content,t,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],e;if(!t.type.isTextblock||!Ku(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(t){e:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:i,type:r}=this.frontier[e],s=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),o=Ku(t,e,r,i,s);if(o){for(let a=e-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Ku(t,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:e,fit:o,move:s?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=qs(this.placed,e.depth,e.fit)),t=e.move;for(let i=e.depth+1;i<=t.depth;i++){let r=t.node(i),s=r.type.contentMatch.fillBefore(r.content,!0,t.index(i));this.openFrontierNode(r.type,r.attrs,s)}return t}openFrontierNode(t,e=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=qs(this.placed,this.depth,b.from(t.create(e,i))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(b.empty,!0);e.childCount&&(this.placed=qs(this.placed,this.frontier.length,e))}};function Gs(n,t,e){return t==0?n.cutByIndex(e,n.childCount):n.replaceChild(0,n.firstChild.copy(Gs(n.firstChild.content,t-1,e)))}function qs(n,t,e){return t==0?n.append(e):n.replaceChild(n.childCount-1,n.lastChild.copy(qs(n.lastChild.content,t-1,e)))}function Wu(n,t){for(let e=0;e<t;e++)n=n.firstChild.content;return n}function $m(n,t,e){if(t<=0)return n;let i=n.content;return t>1&&(i=i.replaceChild(0,$m(i.firstChild,t-1,i.childCount==1?e-1:0))),t>0&&(i=n.type.contentMatch.fillBefore(i).append(i),e<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(b.empty,!0)))),n.copy(i)}function Ku(n,t,e,i,r){let s=n.node(t),o=r?n.indexAfter(t):n.index(t);if(o==s.childCount&&!e.compatibleContent(s.type))return null;let a=i.fillBefore(s.content,!0,o);return a&&!p1(e,s.content,o)?a:null}function p1(n,t,e){for(let i=e;i<t.childCount;i++)if(!n.allowsMarks(t.child(i).marks))return!0;return!1}function g1(n){return n.spec.defining||n.spec.definingForContent}function m1(n,t,e,i){if(!i.size)return n.deleteRange(t,e);let r=n.doc.resolve(t),s=n.doc.resolve(e);if(Bm(r,s,i))return n.step(new Ke(t,e,i));let o=zm(r,n.doc.resolve(e));o[o.length-1]==0&&o.pop();let a=-(r.depth+1);o.unshift(a);for(let h=r.depth,f=r.pos-1;h>0;h--,f--){let p=r.node(h).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(h)>-1?a=h:r.before(h)==f&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=i.openStart;for(let h=i.content,f=0;;f++){let p=h.firstChild;if(c.push(p),f==i.openStart)break;h=p.content}for(let h=u-1;h>=0;h--){let f=c[h],p=g1(f.type);if(p&&!f.sameMarkup(r.node(Math.abs(a)-1)))u=h;else if(p||!f.type.isTextblock)break}for(let h=i.openStart;h>=0;h--){let f=(h+u+1)%(i.openStart+1),p=c[f];if(p)for(let g=0;g<o.length;g++){let y=o[(g+l)%o.length],C=!0;y<0&&(C=!1,y=-y);let B=r.node(y-1),W=r.index(y-1);if(B.canReplaceWith(W,W,p.type,p.marks))return n.replace(r.before(y),C?s.after(y):e,new x(jm(i.content,0,i.openStart,f),f,i.openEnd))}}let d=n.steps.length;for(let h=o.length-1;h>=0&&(n.replace(t,e,i),!(n.steps.length>d));h--){let f=o[h];f<0||(t=r.before(f),e=s.after(f))}}function jm(n,t,e,i,r){if(t<e){let s=n.firstChild;n=n.replaceChild(0,s.copy(jm(s.content,t+1,e,i,s)))}if(t>i){let s=r.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(b.empty,!0))}return n}function y1(n,t,e,i){if(!i.isInline&&t==e&&n.doc.resolve(t).parent.content.size){let r=f1(n.doc,t,i.type);r!=null&&(t=e=r)}n.replaceRange(t,e,new x(b.from(i),0,0))}function v1(n,t,e){let i=n.doc.resolve(t),r=n.doc.resolve(e),s=zm(i,r);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||i.node(a).type.contentMatch.validEnd)return n.delete(i.start(a),r.end(a));if(a>0&&(l||i.node(a-1).canReplace(i.index(a-1),r.indexAfter(a-1))))return n.delete(i.before(a),r.after(a))}for(let o=1;o<=i.depth&&o<=r.depth;o++)if(t-i.start(o)==i.depth-o&&e>i.end(o)&&r.end(o)-e!=r.depth-o&&i.start(o-1)==r.start(o-1)&&i.node(o-1).canReplace(i.index(o-1),r.index(o-1)))return n.delete(i.before(o),e);n.delete(t,e)}function zm(n,t){let e=[],i=Math.min(n.depth,t.depth);for(let r=i;r>=0;r--){let s=n.start(r);if(s<n.pos-(n.depth-r)||t.end(r)>t.pos+(t.depth-r)||n.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(s==t.start(r)||r==n.depth&&r==t.depth&&n.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==s-1)&&e.push(r)}return e}var qa=class n extends pe{constructor(t,e,i){super(),this.pos=t,this.attr=e,this.value=i}apply(t){let e=t.nodeAt(this.pos);if(!e)return be.fail("No node at attribute step's position");let i=Object.create(null);for(let s in e.attrs)i[s]=e.attrs[s];i[this.attr]=this.value;let r=e.type.create(i,null,e.marks);return be.fromReplace(t,this.pos,this.pos+1,new x(b.from(r),0,e.isLeaf?0:1))}getMap(){return en.empty}invert(t){return new n(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new n(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.pos!="number"||typeof e.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new n(e.pos,e.attr,e.value)}};pe.jsonID("attr",qa);var Wa=class n extends pe{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let r in t.attrs)e[r]=t.attrs[r];e[this.attr]=this.value;let i=t.type.create(e,t.content,t.marks);return be.ok(i)}getMap(){return en.empty}invert(t){return new n(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new n(e.attr,e.value)}};pe.jsonID("docAttr",Wa);var mr=class extends Error{};mr=function n(t){let e=Error.call(this,t);return e.__proto__=n.prototype,e};mr.prototype=Object.create(Error.prototype);mr.prototype.constructor=mr;mr.prototype.name="TransformError";var Ka=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Ks}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new mr(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,i=x.empty){let r=Ja(this.doc,t,e,i);return r&&this.step(r),this}replaceWith(t,e,i){return this.replace(t,e,new x(b.from(i),0,0))}delete(t,e){return this.replace(t,e,x.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,i){return m1(this,t,e,i),this}replaceRangeWith(t,e,i){return y1(this,t,e,i),this}deleteRange(t,e){return v1(this,t,e),this}lift(t,e){return n1(this,t,e),this}join(t,e=1){return h1(this,t,e),this}wrap(t,e){return s1(this,t,e),this}setBlockType(t,e=t,i,r=null){return o1(this,t,e,i,r),this}setNodeMarkup(t,e,i=null,r){return l1(this,t,e,i,r),this}setNodeAttribute(t,e,i){return this.step(new qa(t,e,i)),this}setDocAttribute(t,e){return this.step(new Wa(t,e)),this}addNodeMark(t,e){return this.step(new Ys(t,e)),this}removeNodeMark(t,e){if(!(e instanceof Y)){let i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at position "+t);if(e=e.isInSet(i.marks),!e)return this}return this.step(new Zs(t,e)),this}split(t,e=1,i){return c1(this,t,e,i),this}addMark(t,e,i){return XC(this,t,e,i),this}removeMark(t,e,i){return e1(this,t,e,i),this}clearIncompatible(t,e,i){return Qu(this,t,e,i),this}};var Xu=Object.create(null),F=class{constructor(t,e,i){this.$anchor=t,this.$head=e,this.ranges=i||[new _r(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=x.empty){let i=e.content.lastChild,r=null;for(let a=0;a<e.openEnd;a++)r=i,i=i.lastChild;let s=t.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=t.mapping.slice(s);t.replaceRange(u.map(l.pos),u.map(c.pos),a?x.empty:e),a==0&&Gm(t,s,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(t,e){let i=t.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){let{$from:o,$to:a}=r[s],l=t.mapping.slice(i),c=l.map(o.pos),u=l.map(a.pos);s?t.deleteRange(c,u):(t.replaceRangeWith(c,u,e),Gm(t,i,e.isInline?-1:1))}}static findFrom(t,e,i=!1){let r=t.parent.inlineContent?new J(t):vr(t.node(0),t.parent,t.pos,t.index(),e,i);if(r)return r;for(let s=t.depth-1;s>=0;s--){let o=e<0?vr(t.node(0),t.node(s),t.before(s+1),t.index(s),e,i):vr(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,e,i);if(o)return o}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new Je(t.node(0))}static atStart(t){return vr(t,t,0,0,1)||new Je(t)}static atEnd(t){return vr(t,t,t.content.size,t.childCount,-1)||new Je(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=Xu[e.type];if(!i)throw new RangeError(`No selection type ${e.type} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in Xu)throw new RangeError("Duplicate use of selection JSON ID "+t);return Xu[t]=e,e.prototype.jsonID=t,e}getBookmark(){return J.between(this.$anchor,this.$head).getBookmark()}};F.prototype.visible=!0;var _r=class{constructor(t,e){this.$from=t,this.$to=e}},Um=!1;function Hm(n){!Um&&!n.parent.inlineContent&&(Um=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}var J=class n extends F{constructor(t,e=t){Hm(t),Hm(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let i=t.resolve(e.map(this.head));if(!i.parent.inlineContent)return F.near(i);let r=t.resolve(e.map(this.anchor));return new n(r.parent.inlineContent?r:i,i)}replace(t,e=x.empty){if(super.replace(t,e),e==x.empty){let i=this.$from.marksAcross(this.$to);i&&t.ensureMarks(i)}}eq(t){return t instanceof n&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Za(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if(typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new n(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,i=e){let r=t.resolve(e);return new this(r,i==e?r:t.resolve(i))}static between(t,e,i){let r=t.pos-e.pos;if((!i||r)&&(i=r>=0?1:-1),!e.parent.inlineContent){let s=F.findFrom(e,i,!0)||F.findFrom(e,-i,!0);if(s)e=s.$head;else return F.near(e,i)}return t.parent.inlineContent||(r==0?t=e:(t=(F.findFrom(t,-i,!0)||F.findFrom(t,i,!0)).$anchor,t.pos<e.pos!=r<0&&(t=e))),new n(t,e)}};F.jsonID("text",J);var Za=class n{constructor(t,e){this.anchor=t,this.head=e}map(t){return new n(t.map(this.anchor),t.map(this.head))}resolve(t){return J.between(t.resolve(this.anchor),t.resolve(this.head))}},A=class n extends F{constructor(t){let e=t.nodeAfter,i=t.node(0).resolve(t.pos+e.nodeSize);super(t,i),this.node=e}map(t,e){let{deleted:i,pos:r}=e.mapResult(this.anchor),s=t.resolve(r);return i?F.near(s):new n(s)}content(){return new x(b.from(this.node),0,0)}eq(t){return t instanceof n&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new td(this.anchor)}static fromJSON(t,e){if(typeof e.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new n(t.resolve(e.anchor))}static create(t,e){return new n(t.resolve(e))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}};A.prototype.visible=!1;F.jsonID("node",A);var td=class n{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:i}=t.mapResult(this.anchor);return e?new Za(i,i):new n(i)}resolve(t){let e=t.resolve(this.anchor),i=e.nodeAfter;return i&&A.isSelectable(i)?new A(e):F.near(e)}},Je=class n extends F{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=x.empty){if(e==x.empty){t.delete(0,t.doc.content.size);let i=F.atStart(t.doc);i.eq(t.selection)||t.setSelection(i)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new n(t)}map(t){return new n(t)}eq(t){return t instanceof n}getBookmark(){return _1}};F.jsonID("all",Je);var _1={map(){return this},resolve(n){return new Je(n)}};function vr(n,t,e,i,r,s=!1){if(t.inlineContent)return J.create(n,e);for(let o=i-(r>0?0:1);r>0?o<t.childCount:o>=0;o+=r){let a=t.child(o);if(a.isAtom){if(!s&&A.isSelectable(a))return A.create(n,e-(r<0?a.nodeSize:0))}else{let l=vr(n,a,e+r,r<0?a.childCount:0,r,s);if(l)return l}e+=a.nodeSize*r}return null}function Gm(n,t,e){let i=n.steps.length-1;if(i<t)return;let r=n.steps[i];if(!(r instanceof Ke||r instanceof ge))return;let s=n.mapping.maps[i],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),n.setSelection(F.near(n.doc.resolve(o),e))}var qm=1,Ya=2,Wm=4,nd=class extends Ka{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|qm)&~Ya,this.storedMarks=null,this}get selectionSet(){return(this.updated&qm)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Ya,this}ensureMarks(t){return Y.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ya)>0}addStep(t,e){super.addStep(t,e),this.updated=this.updated&~Ya,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let i=this.selection;return e&&(t=t.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||Y.none))),i.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,i){let r=this.doc.type.schema;if(e==null)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();{if(i==null&&(i=e),i=i??e,!t)return this.deleteRange(e,i);let s=this.storedMarks;if(!s){let o=this.doc.resolve(e);s=i==e?o.marks():o.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(e,i,r.text(t,s)),this.selection.empty||this.setSelection(F.near(this.selection.$to)),this}}setMeta(t,e){return this.meta[typeof t=="string"?t:t.key]=e,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Wm,this}get scrolledIntoView(){return(this.updated&Wm)>0}};function Km(n,t){return!t||!n?n:n.bind(t)}var fi=class{constructor(t,e,i){this.name=t,this.init=Km(e.init,i),this.apply=Km(e.apply,i)}},b1=[new fi("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new fi("selection",{init(n,t){return n.selection||F.atStart(t.doc)},apply(n){return n.selection}}),new fi("storedMarks",{init(n){return n.storedMarks||null},apply(n,t,e,i){return i.selection.$cursor?n.storedMarks:null}}),new fi("scrollToSelection",{init(){return 0},apply(n,t){return n.scrolledIntoView?t+1:t}})],Qs=class{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=b1.slice(),e&&e.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new fi(i.key,i.spec.state,i))})}},Qa=class n{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=e){let r=this.config.plugins[i];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],i=this.applyInner(t),r=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=r?r[o].n:0,c=r?r[o].state:this,u=l<e.length&&a.spec.appendTransaction.call(a,l?e.slice(l):e,c,i);if(u&&i.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",t),!r){r=[];for(let d=0;d<this.config.plugins.length;d++)r.push(d<o?{state:i,n:e.length}:{state:this,n:0})}e.push(u),i=i.applyInner(u),s=!0}r&&(r[o]={state:i,n:e.length})}}if(!s)return{state:i,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new n(this.config),i=this.config.fields;for(let r=0;r<i.length;r++){let s=i[r];e[s.name]=s.apply(t,this[s.name],this,e)}return e}get tr(){return new nd(this)}static create(t){let e=new Qs(t.doc?t.doc.type.schema:t.schema,t.plugins),i=new n(e);for(let r=0;r<e.fields.length;r++)i[e.fields[r].name]=e.fields[r].init(t,i);return i}reconfigure(t){let e=new Qs(this.schema,t.plugins),i=e.fields,r=new n(e);for(let s=0;s<i.length;s++){let o=i[s].name;r[o]=this.hasOwnProperty(o)?this[o]:i[s].init(t,r)}return r}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(i=>i.toJSON())),t&&typeof t=="object")for(let i in t){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=t[i],s=r.spec.state;s&&s.toJSON&&(e[i]=s.toJSON.call(r,this[r.key]))}return e}static fromJSON(t,e,i){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let r=new Qs(t.schema,t.plugins),s=new n(r);return r.fields.forEach(o=>{if(o.name=="doc")s.doc=Rt.fromJSON(t.schema,e.doc);else if(o.name=="selection")s.selection=F.fromJSON(s.doc,e.selection);else if(o.name=="storedMarks")e.storedMarks&&(s.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(i)for(let a in i){let l=i[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(e,a)){s[o.name]=c.fromJSON.call(l,t,e[a],s);return}}s[o.name]=o.init(t,s)}}),s}};function Jm(n,t,e){for(let i in n){let r=n[i];r instanceof Function?r=r.bind(t):i=="handleDOMEvents"&&(r=Jm(r,t,{})),e[i]=r}return e}var Me=class{constructor(t){this.spec=t,this.props={},t.props&&Jm(t.props,this,this.props),this.key=t.key?t.key.key:Ym("plugin")}getState(t){return t[this.key]}},ed=Object.create(null);function Ym(n){return n in ed?n+"$"+ ++ed[n]:(ed[n]=0,n+"$")}var Ye=class{constructor(t="key"){this.key=Ym(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}};var we=function(n){for(var t=0;;t++)if(n=n.previousSibling,!n)return t},no=function(n){let t=n.assignedSlot||n.parentNode;return t&&t.nodeType==11?t.host:t},ld=null,nn=function(n,t,e){let i=ld||(ld=document.createRange());return i.setEnd(n,e??n.nodeValue.length),i.setStart(n,t||0),i},w1=function(){ld=null},bi=function(n,t,e,i){return e&&(Zm(n,t,e,i,-1)||Zm(n,t,e,i,1))},C1=/^(img|br|input|textarea|hr)$/i;function Zm(n,t,e,i,r){for(;;){if(n==e&&t==i)return!0;if(t==(r<0?0:lt(n))){let s=n.parentNode;if(!s||s.nodeType!=1||oo(n)||C1.test(n.nodeName)||n.contentEditable=="false")return!1;t=we(n)+(r<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[t+(r<0?-1:0)],n.contentEditable=="false")return!1;t=r<0?lt(n):0}else return!1}}function lt(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function D1(n,t){for(;;){if(n.nodeType==3&&t)return n;if(n.nodeType==1&&t>0){if(n.contentEditable=="false")return null;n=n.childNodes[t-1],t=lt(n)}else if(n.parentNode&&!oo(n))t=we(n),n=n.parentNode;else return null}}function S1(n,t){for(;;){if(n.nodeType==3&&t<n.nodeValue.length)return n;if(n.nodeType==1&&t<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[t],t=0}else if(n.parentNode&&!oo(n))t=we(n)+1,n=n.parentNode;else return null}}function x1(n,t,e){for(let i=t==0,r=t==lt(n);i||r;){if(n==e)return!0;let s=we(n);if(n=n.parentNode,!n)return!1;i=i&&s==0,r=r&&s==lt(n)}}function oo(n){let t;for(let e=n;e&&!(t=e.pmViewDesc);e=e.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==n||t.contentDOM==n)}var ul=function(n){return n.focusNode&&bi(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function pi(n,t){let e=document.createEvent("Event");return e.initEvent("keydown",!0,!0),e.keyCode=n,e.key=e.code=t,e}function E1(n){let t=n.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function M1(n,t,e){if(n.caretPositionFromPoint)try{let i=n.caretPositionFromPoint(t,e);if(i)return{node:i.offsetNode,offset:Math.min(lt(i.offsetNode),i.offset)}}catch{}if(n.caretRangeFromPoint){let i=n.caretRangeFromPoint(t,e);if(i)return{node:i.startContainer,offset:Math.min(lt(i.startContainer),i.startOffset)}}}var Nt=typeof navigator<"u"?navigator:null,Qm=typeof document<"u"?document:null,kn=Nt&&Nt.userAgent||"",cd=/Edge\/(\d+)/.exec(kn),O0=/MSIE \d/.exec(kn),ud=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(kn),Be=!!(O0||ud||cd),En=O0?document.documentMode:ud?+ud[1]:cd?+cd[1]:0,wt=!Be&&/gecko\/(\d+)/i.test(kn);wt&&+(/Firefox\/(\d+)/.exec(kn)||[0,0])[1];var dd=!Be&&/Chrome\/(\d+)/.exec(kn),Ae=!!dd,I0=dd?+dd[1]:0,Ne=!Be&&!!Nt&&/Apple Computer/.test(Nt.vendor),Sr=Ne&&(/Mobile\/\w+/.test(kn)||!!Nt&&Nt.maxTouchPoints>2),at=Sr||(Nt?/Mac/.test(Nt.platform):!1),k1=Nt?/Win/.test(Nt.platform):!1,rn=/Android \d/.test(kn),ao=!!Qm&&"webkitFontSmoothing"in Qm.documentElement.style,A1=ao?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function O1(n){let t=n.defaultView&&n.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function tn(n,t){return typeof n=="number"?n:n[t]}function I1(n){let t=n.getBoundingClientRect(),e=t.width/n.offsetWidth||1,i=t.height/n.offsetHeight||1;return{left:t.left,right:t.left+n.clientWidth*e,top:t.top,bottom:t.top+n.clientHeight*i}}function Xm(n,t,e){let i=n.someProp("scrollThreshold")||0,r=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=e||n.dom;o;o=no(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?O1(s):I1(a),u=0,d=0;if(t.top<c.top+tn(i,"top")?d=-(c.top-t.top+tn(r,"top")):t.bottom>c.bottom-tn(i,"bottom")&&(d=t.bottom-t.top>c.bottom-c.top?t.top+tn(r,"top")-c.top:t.bottom-c.bottom+tn(r,"bottom")),t.left<c.left+tn(i,"left")?u=-(c.left-t.left+tn(r,"left")):t.right>c.right-tn(i,"right")&&(u=t.right-c.right+tn(r,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let h=a.scrollLeft,f=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let p=a.scrollLeft-h,g=a.scrollTop-f;t={left:t.left-p,top:t.top-g,right:t.right-p,bottom:t.bottom-g}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function T1(n){let t=n.dom.getBoundingClientRect(),e=Math.max(0,t.top),i,r;for(let s=(t.left+t.right)/2,o=e+1;o<Math.min(innerHeight,t.bottom);o+=5){let a=n.root.elementFromPoint(s,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=e-20){i=a,r=l.top;break}}return{refDOM:i,refTop:r,stack:T0(n.dom)}}function T0(n){let t=[],e=n.ownerDocument;for(let i=n;i&&(t.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),n!=e);i=no(i));return t}function R1({refDOM:n,refTop:t,stack:e}){let i=n?n.getBoundingClientRect().top:0;R0(e,i==0?0:i-t)}function R0(n,t){for(let e=0;e<n.length;e++){let{dom:i,top:r,left:s}=n[e];i.scrollTop!=r+t&&(i.scrollTop=r+t),i.scrollLeft!=s&&(i.scrollLeft=s)}}var br=null;function N1(n){if(n.setActive)return n.setActive();if(br)return n.focus(br);let t=T0(n);n.focus(br==null?{get preventScroll(){return br={preventScroll:!0},!0}}:void 0),br||(br=!1,R0(t,0))}function N0(n,t){let e,i=2e8,r,s=0,o=t.top,a=t.top,l,c;for(let u=n.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=nn(u).getClientRects();else continue;for(let f=0;f<h.length;f++){let p=h[f];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let g=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(g<i){e=u,i=g,r=g&&e.nodeType==3?{left:p.right<t.left?p.right:p.left,top:t.top}:t,u.nodeType==1&&g&&(s=d+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!l&&p.left<=t.left&&p.right>=t.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!e&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(s=d+1)}}return!e&&l&&(e=l,r=c,i=0),e&&e.nodeType==3?P1(e,r):!e||i&&e.nodeType==1?{node:n,offset:s}:N0(e,r)}function P1(n,t){let e=n.nodeValue.length,i=document.createRange();for(let r=0;r<e;r++){i.setEnd(n,r+1),i.setStart(n,r);let s=Dn(i,1);if(s.top!=s.bottom&&Ed(t,s))return{node:n,offset:r+(t.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function Ed(n,t){return n.left>=t.left-1&&n.left<=t.right+1&&n.top>=t.top-1&&n.top<=t.bottom+1}function F1(n,t){let e=n.parentNode;return e&&/^li$/i.test(e.nodeName)&&t.left<n.getBoundingClientRect().left?e:n}function L1(n,t,e){let{node:i,offset:r}=N0(t,e),s=-1;if(i.nodeType==1&&!i.firstChild){let o=i.getBoundingClientRect();s=o.left!=o.right&&e.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(i,r,s)}function V1(n,t,e,i){let r=-1;for(let s=t,o=!1;s!=n.dom;){let a=n.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!o&&l.left>i.left||l.top>i.top?r=a.posBefore:(!o&&l.right<i.left||l.bottom<i.top)&&(r=a.posAfter),o=!0),!a.contentDOM&&r<0&&!a.node.isText))return(a.node.isBlock?i.top<(l.top+l.bottom)/2:i.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return r>-1?r:n.docView.posFromDOM(t,e,-1)}function P0(n,t,e){let i=n.childNodes.length;if(i&&e.top<e.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(t.top-e.top)/(e.bottom-e.top))-2)),s=r;;){let o=n.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Ed(t,c))return P0(o,t,c)}}if((s=(s+1)%i)==r)break}return n}function B1(n,t){let e=n.dom.ownerDocument,i,r=0,s=M1(e,t.left,t.top);s&&({node:i,offset:r}=s);let o=(n.root.elementFromPoint?n.root:e).elementFromPoint(t.left,t.top),a;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=n.dom.getBoundingClientRect();if(!Ed(t,c)||(o=P0(n.dom,t,c),!o))return null}if(Ne)for(let c=o;i&&c;c=no(c))c.draggable&&(i=void 0);if(o=F1(o,t),i){if(wt&&i.nodeType==1&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let u=i.childNodes[r],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&r++}let c;ao&&r&&i.nodeType==1&&(c=i.childNodes[r-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=t.top&&r--,i==n.dom&&r==i.childNodes.length-1&&i.lastChild.nodeType==1&&t.top>i.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(r==0||i.nodeType!=1||i.childNodes[r-1].nodeName!="BR")&&(a=V1(n,i,r,t))}a==null&&(a=L1(n,o,t));let l=n.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function e0(n){return n.top<n.bottom||n.left<n.right}function Dn(n,t){let e=n.getClientRects();if(e.length){let i=e[t<0?0:e.length-1];if(e0(i))return i}return Array.prototype.find.call(e,e0)||n.getBoundingClientRect()}var $1=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function F0(n,t,e){let{node:i,offset:r,atom:s}=n.docView.domFromPos(t,e<0?-1:1),o=ao||wt;if(i.nodeType==3)if(o&&($1.test(i.nodeValue)||(e<0?!r:r==i.nodeValue.length))){let l=Dn(nn(i,r,r),e);if(wt&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let c=Dn(nn(i,r-1,r-1),-1);if(c.top==l.top){let u=Dn(nn(i,r,r+1),-1);if(u.top!=l.top)return Xs(u,u.left<c.left)}}return l}else{let l=r,c=r,u=e<0?1:-1;return e<0&&!r?(c++,u=-1):e>=0&&r==i.nodeValue.length?(l--,u=1):e<0?l--:c++,Xs(Dn(nn(i,l,c),u),u<0)}if(!n.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&r&&(e<0||r==lt(i))){let l=i.childNodes[r-1];if(l.nodeType==1)return id(l.getBoundingClientRect(),!1)}if(s==null&&r<lt(i)){let l=i.childNodes[r];if(l.nodeType==1)return id(l.getBoundingClientRect(),!0)}return id(i.getBoundingClientRect(),e>=0)}if(s==null&&r&&(e<0||r==lt(i))){let l=i.childNodes[r-1],c=l.nodeType==3?nn(l,lt(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Xs(Dn(c,1),!1)}if(s==null&&r<lt(i)){let l=i.childNodes[r];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?nn(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Xs(Dn(c,-1),!0)}return Xs(Dn(i.nodeType==3?nn(i):i,-e),e>=0)}function Xs(n,t){if(n.width==0)return n;let e=t?n.left:n.right;return{top:n.top,bottom:n.bottom,left:e,right:e}}function id(n,t){if(n.height==0)return n;let e=t?n.top:n.bottom;return{top:e,bottom:e,left:n.left,right:n.right}}function L0(n,t,e){let i=n.state,r=n.root.activeElement;i!=t&&n.updateState(t),r!=n.dom&&n.focus();try{return e()}finally{i!=t&&n.updateState(i),r!=n.dom&&r&&r.focus()}}function j1(n,t,e){let i=t.selection,r=e=="up"?i.$from:i.$to;return L0(n,t,()=>{let{node:s}=n.docView.domFromPos(r.pos,e=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=F0(n,r.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=nn(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(e=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}var z1=/[\u0590-\u08ac]/;function U1(n,t,e){let{$head:i}=t.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,s=!r,o=r==i.parent.content.size,a=n.domSelection();return a?!z1.test(i.parent.textContent)||!a.modify?e=="left"||e=="backward"?s:o:L0(n,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=n.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",e,"character");let f=i.depth?n.docView.domAfterPos(i.before()):n.dom,{focusNode:p,focusOffset:g}=n.domSelectionRange(),y=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),y}):i.pos==i.start()||i.pos==i.end()}var t0=null,n0=null,i0=!1;function H1(n,t,e){return t0==t&&n0==e?i0:(t0=t,n0=e,i0=e=="up"||e=="down"?j1(n,t,e):U1(n,t,e))}var ct=0,r0=1,gi=2,Pt=3,wi=class{constructor(t,e,i,r){this.parent=t,this.children=e,this.dom=i,this.contentDOM=r,this.dirty=ct,i.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,i){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,i=this.posAtStart;;e++){let r=this.children[e];if(r==t)return i;i+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,i){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(i<0){let s,o;if(t==this.contentDOM)s=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let r;if(t==this.dom&&this.contentDOM)r=e>we(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(e==0)for(let s=t;;s=s.parentNode){if(s==this.dom){r=!1;break}if(s.previousSibling)break}if(r==null&&e==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){r=!0;break}if(s.nextSibling)break}}return r??i>0?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let i=!0,r=t;r;r=r.parentNode){let s=this.getDesc(r),o;if(s&&(!e||s.node))if(i&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))i=!1;else return s}}getDesc(t){let e=t.pmViewDesc;for(let i=e;i;i=i.parent)if(i==this)return e}posFromDOM(t,e,i){for(let r=t;r;r=r.parentNode){let s=this.getDesc(r);if(s)return s.localPosFromDOM(t,e,i)}return-1}descAt(t){for(let e=0,i=0;e<this.children.length;e++){let r=this.children[e],s=i+r.size;if(i==t&&s!=i){for(;!r.border&&r.children.length;)for(let o=0;o<r.children.length;o++){let a=r.children[o];if(a.size){r=a;break}}return r}if(t<s)return r.descAt(t-i-r.border);i=s}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let i=0,r=0;for(let s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.size;if(a>t||o instanceof tl){r=t-s;break}s=a}if(r)return this.children[i].domFromPos(r-this.children[i].border,e);for(let s;i&&!(s=this.children[i-1]).size&&s instanceof Xa&&s.side>=0;i--);if(e<=0){let s,o=!0;for(;s=i?this.children[i-1]:null,!(!s||s.dom.parentNode==this.contentDOM);i--,o=!1);return s&&e&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,e):{node:this.contentDOM,offset:s?we(s.dom)+1:0}}else{let s,o=!0;for(;s=i<this.children.length?this.children[i]:null,!(!s||s.dom.parentNode==this.contentDOM);i++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,e):{node:this.contentDOM,offset:s?we(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,i=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,s=-1;for(let o=i,a=0;;a++){let l=this.children[a],c=o+l.size;if(r==-1&&t<=c){let u=o+l.border;if(t>=u&&e<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,e,u);t=o;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){r=we(h.dom)+1;break}t-=h.size}r==-1&&(r=0)}if(r>-1&&(c>e||a==this.children.length-1)){e=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=we(d.dom);break}e+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return e.size==0||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:i}=this.domFromPos(t,0);if(e.nodeType!=1||i==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[i]}setSelection(t,e,i,r=!1){let s=Math.min(t,e),o=Math.max(t,e);for(let f=0,p=0;f<this.children.length;f++){let g=this.children[f],y=p+g.size;if(s>p&&o<y)return g.setSelection(t-p-g.border,e-p-g.border,i,r);p=y}let a=this.domFromPos(t,t?-1:1),l=e==t?a:this.domFromPos(e,e?-1:1),c=i.root.getSelection(),u=i.domSelectionRange(),d=!1;if((wt||Ne)&&t==e){let{node:f,offset:p}=a;if(f.nodeType==3){if(d=!!(p&&f.nodeValue[p-1]==`
`),d&&p==f.nodeValue.length)for(let g=f,y;g;g=g.parentNode){if(y=g.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:we(y)+1});break}let C=g.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let g=f.childNodes[p-1];d=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(wt&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let f=u.focusNode.childNodes[u.focusOffset];f&&f.contentEditable=="false"&&(r=!0)}if(!(r||d&&Ne)&&bi(a.node,a.offset,u.anchorNode,u.anchorOffset)&&bi(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||t==e)&&!d){c.collapse(a.node,a.offset);try{t!=e&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(t>e){let p=a;a=l,l=p}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let i=0,r=0;r<this.children.length;r++){let s=this.children[r],o=i+s.size;if(i==o?t<=o&&e>=i:t<o&&e>i){let a=i+s.border,l=o-s.border;if(t>=a&&e<=l){this.dirty=t==i||e==o?gi:r0,t==a&&e==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Pt:s.markDirty(t-a,e-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?gi:Pt}i=o}this.dirty=gi}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let i=t==1?gi:r0;e.dirty<i&&(e.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(t){return!1}},Xa=class extends wi{constructor(t,e,i,r){let s,o=e.type.toDOM;if(typeof o=="function"&&(o=o(i,()=>{if(!s)return r;if(s.parent)return s.parent.posBeforeChild(s)})),!e.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=e,this.widget=e,s=this}matchesWidget(t){return this.dirty==ct&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return e?e(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}},hd=class extends wi{constructor(t,e,i,r){super(t,[],e,null),this.textDOM=i,this.text=r}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}},xr=class n extends wi{constructor(t,e,i,r,s){super(t,[],i,r),this.mark=e,this.spec=s}static create(t,e,i,r){let s=r.nodeViews[e.type.name],o=s&&s(e,r,i);return(!o||!o.dom)&&(o=Xt.renderSpec(document,e.type.spec.toDOM(e,i),null,e.attrs)),new n(t,e,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Pt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=Pt&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),this.dirty!=ct){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=ct}}slice(t,e,i){let r=n.create(this.parent,this.mark,!0,i),s=this.children,o=this.size;e<o&&(s=md(s,e,o,i)),t>0&&(s=md(s,0,t,i));for(let a=0;a<s.length;a++)s[a].parent=r;return r.children=s,r}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}},Mn=class n extends wi{constructor(t,e,i,r,s,o,a,l,c){super(t,[],s,o),this.node=e,this.outerDeco=i,this.innerDeco=r,this.nodeDOM=a}static create(t,e,i,r,s,o){let a=s.nodeViews[e.type.name],l,c=a&&a(e,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},i,r),u=c&&c.dom,d=c&&c.contentDOM;if(e.isText){if(!u)u=document.createTextNode(e.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Xt.renderSpec(document,e.type.spec.toDOM(e),null,e.attrs));!d&&!e.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),e.type.spec.draggable&&(u.draggable=!0));let h=u;return u=$0(u,i,e),c?l=new fd(t,e,i,r,u,d||null,h,c,s,o+1):e.isText?new el(t,e,i,r,u,h,s):new n(t,e,i,r,u,d||null,h,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let e=this.children.length-1;e>=0;e--){let i=this.children[e];if(this.dom.contains(i.dom.parentNode)){t.contentElement=i.dom.parentNode;break}}t.contentElement||(t.getContent=()=>b.empty)}return t}matchesNode(t,e,i){return this.dirty==ct&&t.eq(this.node)&&nl(e,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let i=this.node.inlineContent,r=e,s=t.composing?this.localCompositionInfo(t,e):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new gd(this,o&&o.node,t);K1(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,i,t):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Y.none:this.node.child(u).marks,i,t),l.placeWidget(c,t,r)},(c,u,d,h)=>{l.syncToMarks(c.marks,i,t);let f;l.findNodeMatch(c,u,d,h)||a&&t.state.selection.from>r&&t.state.selection.to<r+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,f,t)||l.updateNextNode(c,u,d,t,h,r)||l.addNode(c,u,d,t,r),r+=c.nodeSize}),l.syncToMarks([],i,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==gi)&&(o&&this.protectLocalComposition(t,o),V0(this.contentDOM,this.children,t),Sr&&J1(this.dom))}localCompositionInfo(t,e){let{from:i,to:r}=t.state.selection;if(!(t.state.selection instanceof J)||i<e||r>e+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=Y1(this.node.content,o,i-e,r-e);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:i,text:r}){if(this.getDesc(e))return;let s=e;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new hd(this,s,e,r);t.input.compositionNodes.push(o),this.children=md(this.children,i,i+r.length,t,o)}update(t,e,i,r){return this.dirty==Pt||!t.sameMarkup(this.node)?!1:(this.updateInner(t,e,i,r),!0)}updateInner(t,e,i,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=ct}updateOuterDeco(t){if(nl(t,this.outerDeco))return;let e=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=B0(this.dom,this.nodeDOM,pd(this.outerDeco,this.node,e),pd(t,this.node,e)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}};function s0(n,t,e,i,r){$0(i,t,n);let s=new Mn(void 0,n,t,e,i,i,i,r,0);return s.contentDOM&&s.updateChildren(r,0),s}var el=class n extends Mn{constructor(t,e,i,r,s,o,a){super(t,e,i,r,s,null,o,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,e,i,r){return this.dirty==Pt||this.dirty!=ct&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(e),(this.dirty!=ct||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=ct,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,i){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,i)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,e,i){let r=this.node.cut(t,e),s=document.createTextNode(r.text);return new n(this.parent,r,this.outerDeco,this.innerDeco,s,s,i)}markDirty(t,e){super.markDirty(t,e),this.dom!=this.nodeDOM&&(t==0||e==this.nodeDOM.nodeValue.length)&&(this.dirty=Pt)}get domAtom(){return!1}isText(t){return this.node.text==t}},tl=class extends wi{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==ct&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}},fd=class extends Mn{constructor(t,e,i,r,s,o,a,l,c,u){super(t,e,i,r,s,o,a,c,u),this.spec=l}update(t,e,i,r){if(this.dirty==Pt)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,e,i);return s&&this.updateInner(t,e,i,r),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,e,i,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,i,r){this.spec.setSelection?this.spec.setSelection(t,e,i.root):super.setSelection(t,e,i,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}};function V0(n,t,e){let i=n.firstChild,r=!1;for(let s=0;s<t.length;s++){let o=t[s],a=o.dom;if(a.parentNode==n){for(;a!=i;)i=o0(i),r=!0;i=i.nextSibling}else r=!0,n.insertBefore(a,i);if(o instanceof xr){let l=i?i.previousSibling:n.lastChild;V0(o.contentDOM,o.children,e),i=l?l.nextSibling:n.firstChild}}for(;i;)i=o0(i),r=!0;r&&e.trackWrites==n&&(e.trackWrites=null)}var eo=function(n){n&&(this.nodeName=n)};eo.prototype=Object.create(null);var mi=[new eo];function pd(n,t,e){if(n.length==0)return mi;let i=e?mi[0]:new eo,r=[i];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(o){o.nodeName&&r.push(i=new eo(o.nodeName));for(let a in o){let l=o[a];l!=null&&(e&&r.length==1&&r.push(i=new eo(t.isInline?"span":"div")),a=="class"?i.class=(i.class?i.class+" ":"")+l:a=="style"?i.style=(i.style?i.style+";":"")+l:a!="nodeName"&&(i[a]=l))}}}return r}function B0(n,t,e,i){if(e==mi&&i==mi)return t;let r=t;for(let s=0;s<i.length;s++){let o=i[s],a=e[s];if(s){let l;a&&a.nodeName==o.nodeName&&r!=n&&(l=r.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(r),a=mi[0]),r=l}G1(r,a||mi[0],o)}return r}function G1(n,t,e){for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&!(i in e)&&n.removeAttribute(i);for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&e[i]!=t[i]&&n.setAttribute(i,e[i]);if(t.class!=e.class){let i=t.class?t.class.split(" ").filter(Boolean):[],r=e.class?e.class.split(" ").filter(Boolean):[];for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.remove(i[s]);for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.add(r[s]);n.classList.length==0&&n.removeAttribute("class")}if(t.style!=e.style){if(t.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=i.exec(t.style);)n.style.removeProperty(r[1])}e.style&&(n.style.cssText+=e.style)}}function $0(n,t,e){return B0(n,n,mi,pd(t,e,n.nodeType!=1))}function nl(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(!n[e].type.eq(t[e].type))return!1;return!0}function o0(n){let t=n.nextSibling;return n.parentNode.removeChild(n),t}var gd=class{constructor(t,e,i){this.lock=e,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=q1(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let i=t;i<e;i++)this.top.children[i].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,i){let r=0,s=this.stack.length>>1,o=Math.min(s,t.length);for(;r<o&&(r==s-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&t[r].type.spec.spanning!==!1;)r++;for(;r<s;)this.destroyRest(),this.top.dirty=ct,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=xr.create(this.top,t[s],e,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(t,e,i,r){let s=-1,o;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(t,e,i))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(t,e,i)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,e,i,r,s){let o=this.top.children[r];return o.dirty==Pt&&o.dom==o.contentDOM&&(o.dirty=gi),o.update(t,e,i,s)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let i=t.pmViewDesc;if(i){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==i)return r}return-1}t=e}}updateNextNode(t,e,i,r,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Mn){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=Pt&&nl(e,l.outerDeco));if(!h&&l.update(t,e,i,r))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,t,e,i,r,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=gi,d.updateChildren(r,o+1),d.dirty=ct),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,e,i,r,s,o){if(t.dirty||e.isAtom||!t.children.length||!t.node.content.eq(e.content)||!nl(i,t.outerDeco)||!r.eq(t.innerDeco))return null;let a=Mn.create(this.top,e,i,r,s,o);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,e,i,r,s){let o=Mn.create(this.top,t,e,i,r,s);o.contentDOM&&o.updateChildren(r,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,e,i){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(t)&&(t==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let s=new Xa(this.top,t,e,i);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;for(;t instanceof xr;)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof el)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Ne||Ae)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let i=document.createElement(t);t=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),t=="BR"&&(i.className="ProseMirror-trailingBreak");let r=new tl(this.top,[],i,null);e!=this.top?e.children.push(r):e.children.splice(this.index++,0,r),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}};function q1(n,t){let e=t,i=e.children.length,r=n.childCount,s=new Map,o=[];e:for(;r>0;){let a;for(;;)if(i){let c=e.children[i-1];if(c instanceof xr)e=c,i=c.children.length;else{a=c,i--;break}}else{if(e==t)break e;i=e.parent.children.indexOf(e),e=e.parent}let l=a.node;if(l){if(l!=n.child(r-1))break;--r,s.set(a,r),o.push(a)}}return{index:r,matched:s,matches:o.reverse()}}function W1(n,t){return n.type.side-t.type.side}function K1(n,t,e,i){let r=t.locals(n),s=0;if(r.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);i(u,r,t.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<r.length&&r[o].to==s;){let y=r[o++];y.widget&&(u?(d||(d=[u])).push(y):u=y)}if(u)if(d){d.sort(W1);for(let y=0;y<d.length;y++)e(d[y],c,!!l)}else e(u,c,!!l);let h,f;if(l)f=-1,h=l,l=null;else if(c<n.childCount)f=c,h=n.child(c++);else break;for(let y=0;y<a.length;y++)a[y].to<=s&&a.splice(y--,1);for(;o<r.length&&r[o].from<=s&&r[o].to>s;)a.push(r[o++]);let p=s+h.nodeSize;if(h.isText){let y=p;o<r.length&&r[o].from<y&&(y=r[o].from);for(let C=0;C<a.length;C++)a[C].to<y&&(y=a[C].to);y<p&&(l=h.cut(y-s),h=h.cut(0,y-s),p=y,f=-1)}else for(;o<r.length&&r[o].to<p;)o++;let g=h.isInline&&!h.isLeaf?a.filter(y=>!y.inline):a.slice();i(h,g,t.forChild(s,h),f),s=p}}function J1(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let t=n.style.cssText;n.style.cssText=t+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=t}}function Y1(n,t,e,i){for(let r=0,s=0;r<n.childCount&&s<=i;){let o=n.child(r++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;r<n.childCount;){let c=n.child(r++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=e){if(s>=i&&l.slice(i-t.length-a,i-a)==t)return i-t.length;let c=a<i?l.lastIndexOf(t,i-a-1):-1;if(c>=0&&c+t.length+a>=e)return a+c;if(e==i&&l.length>=i+t.length-a&&l.slice(i-a,i-a+t.length)==t)return i}}return-1}function md(n,t,e,i,r){let s=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],c=a,u=a+=l.size;c>=e||u<=t?s.push(l):(c<t&&s.push(l.slice(0,t-c,i)),r&&(s.push(r),r=void 0),u>e&&s.push(l.slice(e-c,l.size,i)))}return s}function Md(n,t=null){let e=n.domSelectionRange(),i=n.state.doc;if(!e.focusNode)return null;let r=n.docView.nearestDesc(e.focusNode),s=r&&r.size==0,o=n.docView.posFromDOM(e.focusNode,e.focusOffset,1);if(o<0)return null;let a=i.resolve(o),l,c;if(ul(e)){for(l=o;r&&!r.node;)r=r.parent;let d=r.node;if(r&&d.isAtom&&A.isSelectable(d)&&r.parent&&!(d.isInline&&x1(e.focusNode,e.focusOffset,r.dom))){let h=r.posBefore;c=new A(o==h?a:i.resolve(h))}}else{if(e instanceof n.dom.ownerDocument.defaultView.Selection&&e.rangeCount>1){let d=o,h=o;for(let f=0;f<e.rangeCount;f++){let p=e.getRangeAt(f);d=Math.min(d,n.docView.posFromDOM(p.startContainer,p.startOffset,1)),h=Math.max(h,n.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[l,o]=h==n.state.selection.anchor?[h,d]:[d,h],a=i.resolve(o)}else l=n.docView.posFromDOM(e.anchorNode,e.anchorOffset,1);if(l<0)return null}let u=i.resolve(l);if(!c){let d=t=="pointer"||n.state.selection.head<a.pos&&!s?1:-1;c=kd(n,u,a,d)}return c}function j0(n){return n.editable?n.hasFocus():U0(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function sn(n,t=!1){let e=n.state.selection;if(z0(n,e),!!j0(n)){if(!t&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Ae){let i=n.domSelectionRange(),r=n.domObserver.currentSelection;if(i.anchorNode&&r.anchorNode&&bi(i.anchorNode,i.anchorOffset,r.anchorNode,r.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)Q1(n);else{let{anchor:i,head:r}=e,s,o;a0&&!(e instanceof J)&&(e.$from.parent.inlineContent||(s=l0(n,e.from)),!e.empty&&!e.$from.parent.inlineContent&&(o=l0(n,e.to))),n.docView.setSelection(i,r,n,t),a0&&(s&&c0(s),o&&c0(o)),e.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Z1(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}var a0=Ne||Ae&&I0<63;function l0(n,t){let{node:e,offset:i}=n.docView.domFromPos(t,0),r=i<e.childNodes.length?e.childNodes[i]:null,s=i?e.childNodes[i-1]:null;if(Ne&&r&&r.contentEditable=="false")return rd(r);if((!r||r.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(r)return rd(r);if(s)return rd(s)}}function rd(n){return n.contentEditable="true",Ne&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function c0(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function Z1(n){let t=n.dom.ownerDocument;t.removeEventListener("selectionchange",n.input.hideSelectionGuard);let e=n.domSelectionRange(),i=e.anchorNode,r=e.anchorOffset;t.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(e.anchorNode!=i||e.anchorOffset!=r)&&(t.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!j0(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function Q1(n){let t=n.domSelection(),e=document.createRange();if(!t)return;let i=n.cursorWrapper.dom,r=i.nodeName=="IMG";r?e.setStart(i.parentNode,we(i)+1):e.setStart(i,0),e.collapse(!0),t.removeAllRanges(),t.addRange(e),!r&&!n.state.selection.visible&&Be&&En<=11&&(i.disabled=!0,i.disabled=!1)}function z0(n,t){if(t instanceof A){let e=n.docView.descAt(t.from);e!=n.lastSelectedViewDesc&&(u0(n),e&&e.selectNode(),n.lastSelectedViewDesc=e)}else u0(n)}function u0(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function kd(n,t,e,i){return n.someProp("createSelectionBetween",r=>r(n,t,e))||J.between(t,e,i)}function d0(n){return n.editable&&!n.hasFocus()?!1:U0(n)}function U0(n){let t=n.domSelectionRange();if(!t.anchorNode)return!1;try{return n.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(n.editable||n.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function X1(n){let t=n.docView.domFromPos(n.state.selection.anchor,0),e=n.domSelectionRange();return bi(t.node,t.offset,e.anchorNode,e.anchorOffset)}function yd(n,t){let{$anchor:e,$head:i}=n.selection,r=t>0?e.max(i):e.min(i),s=r.parent.inlineContent?r.depth?n.doc.resolve(t>0?r.after():r.before()):null:r;return s&&F.findFrom(s,t)}function Sn(n,t){return n.dispatch(n.state.tr.setSelection(t).scrollIntoView()),!0}function h0(n,t,e){let i=n.state.selection;if(i instanceof J)if(e.indexOf("s")>-1){let{$head:r}=i,s=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=n.state.doc.resolve(r.pos+s.nodeSize*(t<0?-1:1));return Sn(n,new J(i.$anchor,o))}else if(i.empty){if(n.endOfTextblock(t>0?"forward":"backward")){let r=yd(n.state,t);return r&&r instanceof A?Sn(n,r):!1}else if(!(at&&e.indexOf("m")>-1)){let r=i.$head,s=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter,o;if(!s||s.isText)return!1;let a=t<0?r.pos-s.nodeSize:r.pos;return s.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?A.isSelectable(s)?Sn(n,new A(t<0?n.state.doc.resolve(r.pos-s.nodeSize):r)):ao?Sn(n,new J(n.state.doc.resolve(t<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(i instanceof A&&i.node.isInline)return Sn(n,new J(t>0?i.$to:i.$from));{let r=yd(n.state,t);return r?Sn(n,r):!1}}}function il(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function to(n,t){let e=n.pmViewDesc;return e&&e.size==0&&(t<0||n.nextSibling||n.nodeName!="BR")}function wr(n,t){return t<0?eD(n):tD(n)}function eD(n){let t=n.domSelectionRange(),e=t.focusNode,i=t.focusOffset;if(!e)return;let r,s,o=!1;for(wt&&e.nodeType==1&&i<il(e)&&to(e.childNodes[i],-1)&&(o=!0);;)if(i>0){if(e.nodeType!=1)break;{let a=e.childNodes[i-1];if(to(a,-1))r=e,s=--i;else if(a.nodeType==3)e=a,i=e.nodeValue.length;else break}}else{if(H0(e))break;{let a=e.previousSibling;for(;a&&to(a,-1);)r=e.parentNode,s=we(a),a=a.previousSibling;if(a)e=a,i=il(e);else{if(e=e.parentNode,e==n.dom)break;i=0}}}o?vd(n,e,i):r&&vd(n,r,s)}function tD(n){let t=n.domSelectionRange(),e=t.focusNode,i=t.focusOffset;if(!e)return;let r=il(e),s,o;for(;;)if(i<r){if(e.nodeType!=1)break;let a=e.childNodes[i];if(to(a,1))s=e,o=++i;else break}else{if(H0(e))break;{let a=e.nextSibling;for(;a&&to(a,1);)s=a.parentNode,o=we(a)+1,a=a.nextSibling;if(a)e=a,i=0,r=il(e);else{if(e=e.parentNode,e==n.dom)break;i=r=0}}}s&&vd(n,s,o)}function H0(n){let t=n.pmViewDesc;return t&&t.node&&t.node.isBlock}function nD(n,t){for(;n&&t==n.childNodes.length&&!oo(n);)t=we(n)+1,n=n.parentNode;for(;n&&t<n.childNodes.length;){let e=n.childNodes[t];if(e.nodeType==3)return e;if(e.nodeType==1&&e.contentEditable=="false")break;n=e,t=0}}function iD(n,t){for(;n&&!t&&!oo(n);)t=we(n),n=n.parentNode;for(;n&&t;){let e=n.childNodes[t-1];if(e.nodeType==3)return e;if(e.nodeType==1&&e.contentEditable=="false")break;n=e,t=n.childNodes.length}}function vd(n,t,e){if(t.nodeType!=3){let s,o;(o=nD(t,e))?(t=o,e=0):(s=iD(t,e))&&(t=s,e=s.nodeValue.length)}let i=n.domSelection();if(!i)return;if(ul(i)){let s=document.createRange();s.setEnd(t,e),s.setStart(t,e),i.removeAllRanges(),i.addRange(s)}else i.extend&&i.extend(t,e);n.domObserver.setCurSelection();let{state:r}=n;setTimeout(()=>{n.state==r&&sn(n)},50)}function f0(n,t){let e=n.state.doc.resolve(t);if(!(Ae||k1)&&e.parent.inlineContent){let r=n.coordsAtPos(t);if(t>e.start()){let s=n.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(s.left-r.left)>1)return s.left<r.left?"ltr":"rtl"}if(t<e.end()){let s=n.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(s.left-r.left)>1)return s.left>r.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function p0(n,t,e){let i=n.state.selection;if(i instanceof J&&!i.empty||e.indexOf("s")>-1||at&&e.indexOf("m")>-1)return!1;let{$from:r,$to:s}=i;if(!r.parent.inlineContent||n.endOfTextblock(t<0?"up":"down")){let o=yd(n.state,t);if(o&&o instanceof A)return Sn(n,o)}if(!r.parent.inlineContent){let o=t<0?r:s,a=i instanceof Je?F.near(o,t):F.findFrom(o,t);return a?Sn(n,a):!1}return!1}function g0(n,t){if(!(n.state.selection instanceof J))return!0;let{$head:e,$anchor:i,empty:r}=n.state.selection;if(!e.sameParent(i))return!0;if(!r)return!1;if(n.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!e.textOffset&&(t<0?e.nodeBefore:e.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return t<0?o.delete(e.pos-s.nodeSize,e.pos):o.delete(e.pos,e.pos+s.nodeSize),n.dispatch(o),!0}return!1}function m0(n,t,e){n.domObserver.stop(),t.contentEditable=e,n.domObserver.start()}function rD(n){if(!Ne||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:e}=n.domSelectionRange();if(t&&t.nodeType==1&&e==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let i=t.firstChild;m0(n,i,"true"),setTimeout(()=>m0(n,i,"false"),20)}return!1}function sD(n){let t="";return n.ctrlKey&&(t+="c"),n.metaKey&&(t+="m"),n.altKey&&(t+="a"),n.shiftKey&&(t+="s"),t}function oD(n,t){let e=t.keyCode,i=sD(t);if(e==8||at&&e==72&&i=="c")return g0(n,-1)||wr(n,-1);if(e==46&&!t.shiftKey||at&&e==68&&i=="c")return g0(n,1)||wr(n,1);if(e==13||e==27)return!0;if(e==37||at&&e==66&&i=="c"){let r=e==37?f0(n,n.state.selection.from)=="ltr"?-1:1:-1;return h0(n,r,i)||wr(n,r)}else if(e==39||at&&e==70&&i=="c"){let r=e==39?f0(n,n.state.selection.from)=="ltr"?1:-1:1;return h0(n,r,i)||wr(n,r)}else{if(e==38||at&&e==80&&i=="c")return p0(n,-1,i)||wr(n,-1);if(e==40||at&&e==78&&i=="c")return rD(n)||p0(n,1,i)||wr(n,1);if(i==(at?"m":"c")&&(e==66||e==73||e==89||e==90))return!0}return!1}function G0(n,t){n.someProp("transformCopied",f=>{t=f(t,n)});let e=[],{content:i,openStart:r,openEnd:s}=t;for(;r>1&&s>1&&i.childCount==1&&i.firstChild.childCount==1;){r--,s--;let f=i.firstChild;e.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),i=f.content}let o=n.someProp("clipboardSerializer")||Xt.fromSchema(n.state.schema),a=Z0(),l=a.createElement("div");l.appendChild(o.serializeFragment(i,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=Y0[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let p=a.createElement(u[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${r} ${s}${d?` -${d}`:""} ${JSON.stringify(e)}`);let h=n.someProp("clipboardTextSerializer",f=>f(t,n))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:h,slice:t}}function q0(n,t,e,i,r){let s=r.parent.type.spec.code,o,a;if(!e&&!t)return null;let l=t&&(i||s||!e);if(l){if(n.someProp("transformPastedText",h=>{t=h(t,s||i,n)}),s)return t?new x(b.from(n.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):x.empty;let d=n.someProp("clipboardTextParser",h=>h(t,r,i,n));if(d)a=d;else{let h=r.marks(),{schema:f}=n.state,p=Xt.fromSchema(f);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(g=>{let y=o.appendChild(document.createElement("p"));g&&y.appendChild(p.serializeNode(f.text(g,h)))})}}else n.someProp("transformPastedHTML",d=>{e=d(e,n)}),o=uD(e),ao&&dD(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||wn.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:r,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!aD.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=hD(y0(a,+u[1],+u[2]),u[4]);else if(a=x.maxOpen(lD(a.content,r),!0),a.openStart||a.openEnd){let d=0,h=0;for(let f=a.content.firstChild;d<a.openStart&&!f.type.spec.isolating;d++,f=f.firstChild);for(let f=a.content.lastChild;h<a.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);a=y0(a,d,h)}return n.someProp("transformPasted",d=>{a=d(a,n)}),a}var aD=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function lD(n,t){if(n.childCount<2)return n;for(let e=t.depth;e>=0;e--){let r=t.node(e).contentMatchAt(t.index(e)),s,o=[];if(n.forEach(a=>{if(!o)return;let l=r.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&K0(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=J0(o[o.length-1],s.length));let u=W0(a,l);o.push(u),r=r.matchType(u.type),s=l}}),o)return b.from(o)}return n}function W0(n,t,e=0){for(let i=t.length-1;i>=e;i--)n=t[i].create(null,b.from(n));return n}function K0(n,t,e,i,r){if(r<n.length&&r<t.length&&n[r]==t[r]){let s=K0(n,t,e,i.lastChild,r+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(r==n.length-1?e.type:n[r+1]))return i.copy(i.content.append(b.from(W0(e,n,r+1))))}}function J0(n,t){if(t==0)return n;let e=n.content.replaceChild(n.childCount-1,J0(n.lastChild,t-1)),i=n.contentMatchAt(n.childCount).fillBefore(b.empty,!0);return n.copy(e.append(i))}function _d(n,t,e,i,r,s){let o=t<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(s=0),r<i-1&&(a=_d(a,t,e,i,r+1,s)),r>=e&&(a=t<0?o.contentMatchAt(0).fillBefore(a,s<=r).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(b.empty,!0))),n.replaceChild(t<0?0:n.childCount-1,o.copy(a))}function y0(n,t,e){return t<n.openStart&&(n=new x(_d(n.content,-1,t,n.openStart,0,n.openEnd),t,n.openEnd)),e<n.openEnd&&(n=new x(_d(n.content,1,e,n.openEnd,0,0),n.openStart,e)),n}var Y0={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},v0=null;function Z0(){return v0||(v0=document.implementation.createHTMLDocument("title"))}var sd=null;function cD(n){let t=window.trustedTypes;return t?(sd||(sd=t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),sd.createHTML(n)):n}function uD(n){let t=/^(\s*<meta [^>]*>)*/.exec(n);t&&(n=n.slice(t[0].length));let e=Z0().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n),r;if((r=i&&Y0[i[1].toLowerCase()])&&(n=r.map(s=>"<"+s+">").join("")+n+r.map(s=>"</"+s+">").reverse().join("")),e.innerHTML=cD(n),r)for(let s=0;s<r.length;s++)e=e.querySelector(r[s])||e;return e}function dD(n){let t=n.querySelectorAll(Ae?"span:not([class]):not([style])":"span.Apple-converted-space");for(let e=0;e<t.length;e++){let i=t[e];i.childNodes.length==1&&i.textContent=="\xA0"&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}function hD(n,t){if(!n.size)return n;let e=n.content.firstChild.type.schema,i;try{i=JSON.parse(t)}catch{return n}let{content:r,openStart:s,openEnd:o}=n;for(let a=i.length-2;a>=0;a-=2){let l=e.nodes[i[a]];if(!l||l.hasRequiredAttrs())break;r=b.from(l.create(i[a+1],r)),s++,o++}return new x(r,s,o)}var Pe={},Fe={},fD={touchstart:!0,touchmove:!0},bd=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function pD(n){for(let t in Pe){let e=Pe[t];n.dom.addEventListener(t,n.input.eventHandlers[t]=i=>{mD(n,i)&&!Ad(n,i)&&(n.editable||!(i.type in Fe))&&e(n,i)},fD[t]?{passive:!0}:void 0)}Ne&&n.dom.addEventListener("input",()=>null),wd(n)}function xn(n,t){n.input.lastSelectionOrigin=t,n.input.lastSelectionTime=Date.now()}function gD(n){n.domObserver.stop();for(let t in n.input.eventHandlers)n.dom.removeEventListener(t,n.input.eventHandlers[t]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function wd(n){n.someProp("handleDOMEvents",t=>{for(let e in t)n.input.eventHandlers[e]||n.dom.addEventListener(e,n.input.eventHandlers[e]=i=>Ad(n,i))})}function Ad(n,t){return n.someProp("handleDOMEvents",e=>{let i=e[t.type];return i?i(n,t)||t.defaultPrevented:!1})}function mD(n,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target;e!=n.dom;e=e.parentNode)if(!e||e.nodeType==11||e.pmViewDesc&&e.pmViewDesc.stopEvent(t))return!1;return!0}function yD(n,t){!Ad(n,t)&&Pe[t.type]&&(n.editable||!(t.type in Fe))&&Pe[t.type](n,t)}Fe.keydown=(n,t)=>{let e=t;if(n.input.shiftKey=e.keyCode==16||e.shiftKey,!X0(n,e)&&(n.input.lastKeyCode=e.keyCode,n.input.lastKeyCodeTime=Date.now(),!(rn&&Ae&&e.keyCode==13)))if(e.keyCode!=229&&n.domObserver.forceFlush(),Sr&&e.keyCode==13&&!e.ctrlKey&&!e.altKey&&!e.metaKey){let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",r=>r(n,pi(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",i=>i(n,e))||oD(n,e)?e.preventDefault():xn(n,"key")};Fe.keyup=(n,t)=>{t.keyCode==16&&(n.input.shiftKey=!1)};Fe.keypress=(n,t)=>{let e=t;if(X0(n,e)||!e.charCode||e.ctrlKey&&!e.altKey||at&&e.metaKey)return;if(n.someProp("handleKeyPress",r=>r(n,e))){e.preventDefault();return}let i=n.state.selection;if(!(i instanceof J)||!i.$from.sameParent(i.$to)){let r=String.fromCharCode(e.charCode);!/[\r\n]/.test(r)&&!n.someProp("handleTextInput",s=>s(n,i.$from.pos,i.$to.pos,r))&&n.dispatch(n.state.tr.insertText(r).scrollIntoView()),e.preventDefault()}};function dl(n){return{left:n.clientX,top:n.clientY}}function vD(n,t){let e=t.x-n.clientX,i=t.y-n.clientY;return e*e+i*i<100}function Od(n,t,e,i,r){if(i==-1)return!1;let s=n.state.doc.resolve(i);for(let o=s.depth+1;o>0;o--)if(n.someProp(t,a=>o>s.depth?a(n,e,s.nodeAfter,s.before(o),r,!0):a(n,e,s.node(o),s.before(o),r,!1)))return!0;return!1}function Dr(n,t,e){if(n.focused||n.focus(),n.state.selection.eq(t))return;let i=n.state.tr.setSelection(t);e=="pointer"&&i.setMeta("pointer",!0),n.dispatch(i)}function _D(n,t){if(t==-1)return!1;let e=n.state.doc.resolve(t),i=e.nodeAfter;return i&&i.isAtom&&A.isSelectable(i)?(Dr(n,new A(e),"pointer"),!0):!1}function bD(n,t){if(t==-1)return!1;let e=n.state.selection,i,r;e instanceof A&&(i=e.node);let s=n.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(A.isSelectable(a)){i&&e.$from.depth>0&&o>=e.$from.depth&&s.before(e.$from.depth+1)==e.$from.pos?r=s.before(e.$from.depth):r=s.before(o);break}}return r!=null?(Dr(n,A.create(n.state.doc,r),"pointer"),!0):!1}function wD(n,t,e,i,r){return Od(n,"handleClickOn",t,e,i)||n.someProp("handleClick",s=>s(n,t,i))||(r?bD(n,e):_D(n,e))}function CD(n,t,e,i){return Od(n,"handleDoubleClickOn",t,e,i)||n.someProp("handleDoubleClick",r=>r(n,t,i))}function DD(n,t,e,i){return Od(n,"handleTripleClickOn",t,e,i)||n.someProp("handleTripleClick",r=>r(n,t,i))||SD(n,e,i)}function SD(n,t,e){if(e.button!=0)return!1;let i=n.state.doc;if(t==-1)return i.inlineContent?(Dr(n,J.create(i,0,i.content.size),"pointer"),!0):!1;let r=i.resolve(t);for(let s=r.depth+1;s>0;s--){let o=s>r.depth?r.nodeAfter:r.node(s),a=r.before(s);if(o.inlineContent)Dr(n,J.create(i,a+1,a+1+o.content.size),"pointer");else if(A.isSelectable(o))Dr(n,A.create(i,a),"pointer");else continue;return!0}}function Id(n){return rl(n)}var Q0=at?"metaKey":"ctrlKey";Pe.mousedown=(n,t)=>{let e=t;n.input.shiftKey=e.shiftKey;let i=Id(n),r=Date.now(),s="singleClick";r-n.input.lastClick.time<500&&vD(e,n.input.lastClick)&&!e[Q0]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:r,x:e.clientX,y:e.clientY,type:s};let o=n.posAtCoords(dl(e));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new Cd(n,o,e,!!i)):(s=="doubleClick"?CD:DD)(n,o.pos,o.inside,e)?e.preventDefault():xn(n,"pointer"))};var Cd=class{constructor(t,e,i,r){this.view=t,this.pos=e,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!i[Q0],this.allowDefault=i.shiftKey;let s,o;if(e.inside>-1)s=t.state.doc.nodeAt(e.inside),o=e.inside;else{let u=t.state.doc.resolve(e.pos);s=u.parent,o=u.depth?u.before():0}let a=r?null:i.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=t.state;(i.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof A&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&wt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),xn(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>sn(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(dl(t))),this.updateAllowDefault(t),this.allowDefault||!e?xn(this.view,"pointer"):wD(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Ne&&this.mightDrag&&!this.mightDrag.node.isAtom||Ae&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(Dr(this.view,F.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):xn(this.view,"pointer")}move(t){this.updateAllowDefault(t),xn(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}};Pe.touchstart=n=>{n.input.lastTouch=Date.now(),Id(n),xn(n,"pointer")};Pe.touchmove=n=>{n.input.lastTouch=Date.now(),xn(n,"pointer")};Pe.contextmenu=n=>Id(n);function X0(n,t){return n.composing?!0:Ne&&Math.abs(t.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}var xD=rn?5e3:-1;Fe.compositionstart=Fe.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:t}=n,e=t.selection.$to;if(t.selection instanceof J&&(t.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||e.marks(),rl(n,!0),n.markCursor=null;else if(rl(n,!t.selection.empty),wt&&t.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length){let i=n.domSelectionRange();for(let r=i.focusNode,s=i.focusOffset;r&&r.nodeType==1&&s!=0;){let o=s<0?r.lastChild:r.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=n.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else r=o,s=-1}}n.input.composing=!0}ey(n,xD)};Fe.compositionend=(n,t)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=t.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,ey(n,20))};function ey(n,t){clearTimeout(n.input.composingTimeout),t>-1&&(n.input.composingTimeout=setTimeout(()=>rl(n),t))}function ty(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=MD());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function ED(n){let t=n.domSelectionRange();if(!t.focusNode)return null;let e=D1(t.focusNode,t.focusOffset),i=S1(t.focusNode,t.focusOffset);if(e&&i&&e!=i){let r=i.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(e==s||i==s)return s;if(!r||!r.isText(i.nodeValue))return i;if(n.input.compositionNode==i){let o=e.pmViewDesc;if(!(!o||!o.isText(e.nodeValue)))return i}}return e||i}function MD(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function rl(n,t=!1){if(!(rn&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),ty(n),t||n.docView&&n.docView.dirty){let e=Md(n);return e&&!e.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(e)):(n.markCursor||t)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function kD(n,t){if(!n.dom.parentNode)return;let e=n.dom.parentNode.appendChild(document.createElement("div"));e.appendChild(t),e.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(t),n.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),n.focus()},50)}var io=Be&&En<15||Sr&&A1<604;Pe.copy=Fe.cut=(n,t)=>{let e=t,i=n.state.selection,r=e.type=="cut";if(i.empty)return;let s=io?null:e.clipboardData,o=i.content(),{dom:a,text:l}=G0(n,o);s?(e.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):kD(n,a),r&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function AD(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function OD(n,t){if(!n.dom.parentNode)return;let e=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(e?"textarea":"div"));e||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let r=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),e?ro(n,i.value,null,r,t):ro(n,i.textContent,i.innerHTML,r,t)},50)}function ro(n,t,e,i,r){let s=q0(n,t,e,i,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,r,s||x.empty)))return!0;if(!s)return!1;let o=AD(s),a=o?n.state.tr.replaceSelectionWith(o,i):n.state.tr.replaceSelection(s);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ny(n){let t=n.getData("text/plain")||n.getData("Text");if(t)return t;let e=n.getData("text/uri-list");return e?e.replace(/\r?\n/g," "):""}Fe.paste=(n,t)=>{let e=t;if(n.composing&&!rn)return;let i=io?null:e.clipboardData,r=n.input.shiftKey&&n.input.lastKeyCode!=45;i&&ro(n,ny(i),i.getData("text/html"),r,e)?e.preventDefault():OD(n,e)};var sl=class{constructor(t,e,i){this.slice=t,this.move=e,this.node=i}},iy=at?"altKey":"ctrlKey";Pe.dragstart=(n,t)=>{let e=t,i=n.input.mouseDown;if(i&&i.done(),!e.dataTransfer)return;let r=n.state.selection,s=r.empty?null:n.posAtCoords(dl(e)),o;if(!(s&&s.pos>=r.from&&s.pos<=(r instanceof A?r.to-1:r.to))){if(i&&i.mightDrag)o=A.create(n.state.doc,i.mightDrag.pos);else if(e.target&&e.target.nodeType==1){let d=n.docView.nearestDesc(e.target,!0);d&&d.node.type.spec.draggable&&d!=n.docView&&(o=A.create(n.state.doc,d.posBefore))}}let a=(o||n.state.selection).content(),{dom:l,text:c,slice:u}=G0(n,a);(!e.dataTransfer.files.length||!Ae||I0>120)&&e.dataTransfer.clearData(),e.dataTransfer.setData(io?"Text":"text/html",l.innerHTML),e.dataTransfer.effectAllowed="copyMove",io||e.dataTransfer.setData("text/plain",c),n.dragging=new sl(u,!e[iy],o)};Pe.dragend=n=>{let t=n.dragging;window.setTimeout(()=>{n.dragging==t&&(n.dragging=null)},50)};Fe.dragover=Fe.dragenter=(n,t)=>t.preventDefault();Fe.drop=(n,t)=>{let e=t,i=n.dragging;if(n.dragging=null,!e.dataTransfer)return;let r=n.posAtCoords(dl(e));if(!r)return;let s=n.state.doc.resolve(r.pos),o=i&&i.slice;o?n.someProp("transformPasted",p=>{o=p(o,n)}):o=q0(n,ny(e.dataTransfer),io?null:e.dataTransfer.getData("text/html"),!1,s);let a=!!(i&&!e[iy]);if(n.someProp("handleDrop",p=>p(n,e,o||x.empty,a))){e.preventDefault();return}if(!o)return;e.preventDefault();let l=o?Vm(n.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=n.state.tr;if(a){let{node:p}=i;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let f=c.doc.resolve(u);if(d&&A.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new A(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,y,C,B)=>p=B),c.setSelection(kd(n,f,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};Pe.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&sn(n)},20))};Pe.blur=(n,t)=>{let e=t;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),e.relatedTarget&&n.dom.contains(e.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Pe.beforeinput=(n,t)=>{if(Ae&&rn&&t.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,pi(8,"Backspace")))))return;let{$cursor:r}=n.state.selection;r&&r.pos>0&&n.dispatch(n.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let n in Fe)Pe[n]=Fe[n];function so(n,t){if(n==t)return!0;for(let e in n)if(n[e]!==t[e])return!1;for(let e in t)if(!(e in n))return!1;return!0}var ol=class n{constructor(t,e){this.toDOM=t,this.spec=e||vi,this.side=this.spec.side||0}map(t,e,i,r){let{pos:s,deleted:o}=t.mapResult(e.from+r,this.side<0?-1:1);return o?null:new Ft(s-i,s-i,this)}valid(){return!0}eq(t){return this==t||t instanceof n&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&so(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}},yi=class n{constructor(t,e){this.attrs=t,this.spec=e||vi}map(t,e,i,r){let s=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-i,o=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-i;return s>=o?null:new Ft(s,o,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof n&&so(this.attrs,t.attrs)&&so(this.spec,t.spec)}static is(t){return t.type instanceof n}destroy(){}},Dd=class n{constructor(t,e){this.attrs=t,this.spec=e||vi}map(t,e,i,r){let s=t.mapResult(e.from+r,1);if(s.deleted)return null;let o=t.mapResult(e.to+r,-1);return o.deleted||o.pos<=s.pos?null:new Ft(s.pos-i,o.pos-i,this)}valid(t,e){let{index:i,offset:r}=t.content.findIndex(e.from),s;return r==e.from&&!(s=t.child(i)).isText&&r+s.nodeSize==e.to}eq(t){return this==t||t instanceof n&&so(this.attrs,t.attrs)&&so(this.spec,t.spec)}destroy(){}},Ft=class n{constructor(t,e,i){this.from=t,this.to=e,this.type=i}copy(t,e){return new n(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,i){return this.type.map(t,this,e,i)}static widget(t,e,i){return new n(t,t,new ol(e,i))}static inline(t,e,i,r){return new n(t,e,new yi(i,r))}static node(t,e,i,r){return new n(t,e,new Dd(i,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof yi}get widget(){return this.type instanceof ol}},Cr=[],vi={},Re=class n{constructor(t,e){this.local=t.length?t:Cr,this.children=e.length?e:Cr}static create(t,e){return e.length?ll(e,t,0,vi):ke}find(t,e,i){let r=[];return this.findInner(t??0,e??1e9,r,0,i),r}findInner(t,e,i,r,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=e&&a.to>=t&&(!s||s(a.spec))&&i.push(a.copy(a.from+r,a.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<e&&this.children[o+1]>t){let a=this.children[o]+1;this.children[o+2].findInner(t-a,e-a,i,r+a,s)}}map(t,e,i){return this==ke||t.maps.length==0?this:this.mapInner(t,e,0,0,i||vi)}mapInner(t,e,i,r,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,i,r);l&&l.type.valid(e,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?ID(this.children,o||[],t,e,i,r,s):o?new n(o.sort(_i),Cr):ke}add(t,e){return e.length?this==ke?n.create(t,e):this.addInner(t,e,0):this}addInner(t,e,i){let r,s=0;t.forEach((a,l)=>{let c=l+i,u;if(u=sy(e,a,c)){for(r||(r=this.children.slice());s<r.length&&r[s]<l;)s+=3;r[s]==l?r[s+2]=r[s+2].addInner(a,u,c+1):r.splice(s,0,l,l+a.nodeSize,ll(u,a,c+1,vi)),s+=3}});let o=ry(s?oy(e):e,-i);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||o.splice(a--,1);return new n(o.length?this.local.concat(o).sort(_i):this.local,r||this.children)}remove(t){return t.length==0||this==ke?this:this.removeInner(t,0)}removeInner(t,e){let i=this.children,r=this.local;for(let s=0;s<i.length;s+=3){let o,a=i[s]+e,l=i[s+1]+e;for(let u=0,d;u<t.length;u++)(d=t[u])&&d.from>a&&d.to<l&&(t[u]=null,(o||(o=[])).push(d));if(!o)continue;i==this.children&&(i=this.children.slice());let c=i[s+2].removeInner(o,a+1);c!=ke?i[s+2]=c:(i.splice(s,3),s-=3)}if(r.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let a=0;a<r.length;a++)r[a].eq(o,e)&&(r==this.local&&(r=this.local.slice()),r.splice(a--,1))}return i==this.children&&r==this.local?this:r.length||i.length?new n(r,i):ke}forChild(t,e){if(this==ke)return this;if(e.isLeaf)return n.empty;let i,r;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(i=this.children[a+2]);break}let s=t+1,o=s+e.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof yi){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(r||(r=[])).push(l.copy(c,u))}}if(r){let a=new n(r.sort(_i),Cr);return i?new al([a,i]):a}return i||ke}eq(t){if(this==t)return!0;if(!(t instanceof n)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return Td(this.localsInner(t))}localsInner(t){if(this==ke)return Cr;if(t.inlineContent||!this.local.some(yi.is))return this.local;let e=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof yi||e.push(this.local[i]);return e}forEachSet(t){t(this)}};Re.empty=new Re([],[]);Re.removeOverlap=Td;var ke=Re.empty,al=class n{constructor(t){this.members=t}map(t,e){let i=this.members.map(r=>r.map(t,e,vi));return n.from(i)}forChild(t,e){if(e.isLeaf)return Re.empty;let i=[];for(let r=0;r<this.members.length;r++){let s=this.members[r].forChild(t,e);s!=ke&&(s instanceof n?i=i.concat(s.members):i.push(s))}return n.from(i)}eq(t){if(!(t instanceof n)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,i=!0;for(let r=0;r<this.members.length;r++){let s=this.members[r].localsInner(t);if(s.length)if(!e)e=s;else{i&&(e=e.slice(),i=!1);for(let o=0;o<s.length;o++)e.push(s[o])}}return e?Td(i?e:e.sort(_i)):Cr}static from(t){switch(t.length){case 0:return ke;case 1:return t[0];default:return new n(t.every(e=>e instanceof Re)?t:t.reduce((e,i)=>e.concat(i instanceof Re?i:i.members),[]))}}forEachSet(t){for(let e=0;e<this.members.length;e++)this.members[e].forEachSet(t)}};function ID(n,t,e,i,r,s,o){let a=n.slice();for(let c=0,u=s;c<e.maps.length;c++){let d=0;e.maps[c].forEach((h,f,p,g)=>{let y=g-p-(f-h);for(let C=0;C<a.length;C+=3){let B=a[C+1];if(B<0||h>B+u-d)continue;let W=a[C]+u-d;f>=W?a[C+1]=h<=W?-2:-1:h>=u&&y&&(a[C]+=y,a[C+1]+=y)}d+=y}),u=e.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=e.map(n[c]+s),d=u-r;if(d<0||d>=i.content.size){l=!0;continue}let h=e.map(n[c+1]+s,-1),f=h-r,{index:p,offset:g}=i.content.findIndex(d),y=i.maybeChild(p);if(y&&g==d&&g+y.nodeSize==f){let C=a[c+2].mapInner(e,y,u+1,n[c]+s+1,o);C!=ke?(a[c]=d,a[c+1]=f,a[c+2]=C):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=TD(a,n,t,e,r,s,o),u=ll(c,i,0,o);t=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let f=u.children[d];for(;h<a.length&&a[h]<f;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Re(t.sort(_i),a)}function ry(n,t){if(!t||!n.length)return n;let e=[];for(let i=0;i<n.length;i++){let r=n[i];e.push(new Ft(r.from+t,r.to+t,r.type))}return e}function TD(n,t,e,i,r,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(i,r,c);d?e.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],t[l]+s+1);return e}function sy(n,t,e){if(t.isLeaf)return null;let i=e+t.nodeSize,r=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>e&&o.to<i&&((r||(r=[])).push(o),n[s]=null);return r}function oy(n){let t=[];for(let e=0;e<n.length;e++)n[e]!=null&&t.push(n[e]);return t}function ll(n,t,e,i){let r=[],s=!1;t.forEach((a,l)=>{let c=sy(n,a,l+e);if(c){s=!0;let u=ll(c,a,e+l+1,i);u!=ke&&r.push(l,l+a.nodeSize,u)}});let o=ry(s?oy(n):n,-e).sort(_i);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||(i.onRemove&&i.onRemove(o[a].spec),o.splice(a--,1));return o.length||r.length?new Re(o,r):ke}function _i(n,t){return n.from-t.from||n.to-t.to}function Td(n){let t=n;for(let e=0;e<t.length-1;e++){let i=t[e];if(i.from!=i.to)for(let r=e+1;r<t.length;r++){let s=t[r];if(s.from==i.from){s.to!=i.to&&(t==n&&(t=n.slice()),t[r]=s.copy(s.from,i.to),_0(t,r+1,s.copy(i.to,s.to)));continue}else{s.from<i.to&&(t==n&&(t=n.slice()),t[e]=i.copy(i.from,s.from),_0(t,r,i.copy(s.from,i.to)));break}}}return t}function _0(n,t,e){for(;t<n.length&&_i(e,n[t])>0;)t++;n.splice(t,0,e)}function od(n){let t=[];return n.someProp("decorations",e=>{let i=e(n.state);i&&i!=ke&&t.push(i)}),n.cursorWrapper&&t.push(Re.create(n.state.doc,[n.cursorWrapper.deco])),al.from(t)}var RD={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ND=Be&&En<=11,Sd=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}},xd=class{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Sd,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let r=0;r<i.length;r++)this.queue.push(i[r]);Be&&En<=11&&i.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),ND&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,RD)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(d0(this.view)){if(this.suppressingSelectionUpdates)return sn(this.view);if(Be&&En<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&bi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let e=new Set,i;for(let s=t.focusNode;s;s=no(s))e.add(s);for(let s=t.anchorNode;s;s=no(s))if(e.has(s)){i=s;break}let r=i&&this.view.docView.nearestDesc(i);if(r&&r.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.pendingRecords();e.length&&(this.queue=[]);let i=t.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&d0(t)&&!this.ignoreSelectionChange(i),s=-1,o=-1,a=!1,l=[];if(t.editable)for(let u=0;u<e.length;u++){let d=this.registerMutation(e[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(wt&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let f=h.parentNode;f&&f.nodeName=="LI"&&(!d||LD(t,d)!=f)&&h.remove()}}}let c=null;s<0&&r&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&ul(i)&&(c=Md(t))&&c.eq(F.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,sn(t),this.currentSelection.set(i),t.scrollToSelection()):(s>-1||r)&&(s>-1&&(t.docView.markDirty(s,o),PD(t)),this.handleDOMChange(s,o,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(i)||sn(t),this.currentSelection.set(i))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let i=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(i==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!i||i.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++){let d=t.addedNodes[u];e.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(t.target))return{from:i.posBefore,to:i.posAfter};let r=t.previousSibling,s=t.nextSibling;if(Be&&En<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=t.addedNodes[u];(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(r=d),(!h||Array.prototype.indexOf.call(t.addedNodes,h)<0)&&(s=h)}let o=r&&r.parentNode==t.target?we(r)+1:0,a=i.localPosFromDOM(t.target,o,-1),l=s&&s.parentNode==t.target?we(s):t.target.childNodes.length,c=i.localPosFromDOM(t.target,l,1);return{from:a,to:c}}else return t.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=t.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}},b0=new WeakMap,w0=!1;function PD(n){if(!b0.has(n)&&(b0.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=wt,w0)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),w0=!0}}function C0(n,t){let e=t.startContainer,i=t.startOffset,r=t.endContainer,s=t.endOffset,o=n.domAtPos(n.state.selection.anchor);return bi(o.node,o.offset,r,s)&&([e,i,r,s]=[r,s,e,i]),{anchorNode:e,anchorOffset:i,focusNode:r,focusOffset:s}}function FD(n,t){if(t.getComposedRanges){let r=t.getComposedRanges(n.root)[0];if(r)return C0(n,r)}let e;function i(r){r.preventDefault(),r.stopImmediatePropagation(),e=r.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",i,!0),e?C0(n,e):null}function LD(n,t){for(let e=t.parentNode;e&&e!=n.dom;e=e.parentNode){let i=n.docView.nearestDesc(e,!0);if(i&&i.node.isBlock)return e}return null}function VD(n,t,e){let{node:i,fromOffset:r,toOffset:s,from:o,to:a}=n.docView.parseRange(t,e),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],ul(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Ae&&n.input.lastKeyCode===8)for(let y=s;y>r;y--){let C=i.childNodes[y-1],B=C.pmViewDesc;if(C.nodeName=="BR"&&!B){s=y;break}if(!B||B.size)break}let d=n.state.doc,h=n.someProp("domParser")||wn.fromSchema(n.state.schema),f=d.resolve(o),p=null,g=h.parse(i,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:r,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:BD,context:f});if(c&&c[0].pos!=null){let y=c[0].pos,C=c[1]&&c[1].pos;C==null&&(C=y),p={anchor:y+o,head:C+o}}return{doc:g,sel:p,from:o,to:a}}function BD(n){let t=n.pmViewDesc;if(t)return t.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Ne&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(n.parentNode.lastChild==n||Ne&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}var $D=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function jD(n,t,e,i,r){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,t<0){let z=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,cn=Md(n,z);if(cn&&!n.state.selection.eq(cn)){if(Ae&&rn&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",iv=>iv(n,pi(13,"Enter"))))return;let po=n.state.tr.setSelection(cn);z=="pointer"?po.setMeta("pointer",!0):z=="key"&&po.scrollIntoView(),s&&po.setMeta("composition",s),n.dispatch(po)}return}let o=n.state.doc.resolve(t),a=o.sharedDepth(e);t=o.before(a+1),e=n.state.doc.resolve(e).after(a+1);let l=n.state.selection,c=VD(n,t,e),u=n.state.doc,d=u.slice(c.from,c.to),h,f;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(h=n.state.selection.to,f="end"):(h=n.state.selection.from,f="start"),n.input.lastKeyCode=null;let p=HD(d.content,c.doc.content,c.from,h,f);if(p&&n.input.domChangeCount++,(Sr&&n.input.lastIOSEnter>Date.now()-225||rn)&&r.some(z=>z.nodeType==1&&!$D.test(z.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",z=>z(n,pi(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(i&&l instanceof J&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let z=D0(n,n.state.doc,c.sel);if(z&&!z.eq(n.state.selection)){let cn=n.state.tr.setSelection(z);s&&cn.setMeta("composition",s),n.dispatch(cn)}}return}n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof J&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),Be&&En<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" \xA0"&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),y=c.doc.resolveNoCache(p.endB-c.from),C=u.resolve(p.start),B=g.sameParent(y)&&g.parent.inlineContent&&C.end()>=p.endA,W;if((Sr&&n.input.lastIOSEnter>Date.now()-225&&(!B||r.some(z=>z.nodeName=="DIV"||z.nodeName=="P"))||!B&&g.pos<c.doc.content.size&&!g.sameParent(y)&&(W=F.findFrom(c.doc.resolve(g.pos+1),1,!0))&&W.head==y.pos)&&n.someProp("handleKeyDown",z=>z(n,pi(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&UD(u,p.start,p.endA,g,y)&&n.someProp("handleKeyDown",z=>z(n,pi(8,"Backspace")))){rn&&Ae&&n.domObserver.suppressSelectionUpdates();return}Ae&&p.endB==p.start&&(n.input.lastChromeDelete=Date.now()),rn&&!B&&g.start()!=y.start()&&y.parentOffset==0&&g.depth==y.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,y=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(z){return z(n,pi(13,"Enter"))})},20));let ae=p.start,me=p.endA,ce,Rl,fo;if(B){if(g.pos==y.pos)Be&&En<=11&&g.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>sn(n),20)),ce=n.state.tr.delete(ae,me),Rl=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(fo=zD(g.parent.content.cut(g.parentOffset,y.parentOffset),C.parent.content.cut(C.parentOffset,p.endA-C.start()))))ce=n.state.tr,fo.type=="add"?ce.addMark(ae,me,fo.mark):ce.removeMark(ae,me,fo.mark);else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let z=g.parent.textBetween(g.parentOffset,y.parentOffset);if(n.someProp("handleTextInput",cn=>cn(n,ae,me,z)))return;ce=n.state.tr.insertText(z,ae,me)}}if(ce||(ce=n.state.tr.replace(ae,me,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let z=D0(n,ce.doc,c.sel);z&&!(Ae&&n.composing&&z.empty&&(p.start!=p.endB||n.input.lastChromeDelete<Date.now()-100)&&(z.head==ae||z.head==ce.mapping.map(me)-1)||Be&&z.empty&&z.head==ae)&&ce.setSelection(z)}Rl&&ce.ensureMarks(Rl),s&&ce.setMeta("composition",s),n.dispatch(ce.scrollIntoView())}function D0(n,t,e){return Math.max(e.anchor,e.head)>t.content.size?null:kd(n,t.resolve(e.anchor),t.resolve(e.head))}function zD(n,t){let e=n.firstChild.marks,i=t.firstChild.marks,r=e,s=i,o,a,l;for(let u=0;u<i.length;u++)r=i[u].removeFromSet(r);for(let u=0;u<e.length;u++)s=e[u].removeFromSet(s);if(r.length==1&&s.length==0)a=r[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(r.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<t.childCount;u++)c.push(l(t.child(u)));if(b.from(c).eq(n))return{mark:a,type:o}}function UD(n,t,e,i,r){if(e-t<=r.pos-i.pos||ad(i,!0,!1)<r.pos)return!1;let s=n.resolve(t);if(!i.parent.isTextblock){let a=s.nodeAfter;return a!=null&&e==t+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=n.resolve(ad(s,!0,!0));return!o.parent.isTextblock||o.pos>e||ad(o,!0,!1)<e?!1:i.parent.content.cut(i.parentOffset).eq(o.parent.content)}function ad(n,t,e){let i=n.depth,r=t?n.end():n.pos;for(;i>0&&(t||n.indexAfter(i)==n.node(i).childCount);)i--,r++,t=!1;if(e){let s=n.node(i).maybeChild(n.indexAfter(i));for(;s&&!s.isLeaf;)s=s.firstChild,r++}return r}function HD(n,t,e,i,r){let s=n.findDiffStart(t,e);if(s==null)return null;let{a:o,b:a}=n.findDiffEnd(t,e+n.size,e+t.size);if(r=="end"){let l=Math.max(0,s-Math.min(o,a));i-=o+l-s}if(o<s&&n.size<t.size){let l=i<=s&&i>=o?s-i:0;s-=l,s&&s<t.size&&S0(t.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=i<=s&&i>=a?s-i:0;s-=l,s&&s<n.size&&S0(n.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function S0(n){if(n.length!=2)return!1;let t=n.charCodeAt(0),e=n.charCodeAt(1);return t>=56320&&t<=57343&&e>=55296&&e<=56319}var cl=class{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new bd,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(A0),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=M0(this),E0(this),this.nodeViews=k0(this),this.docView=s0(this.state.doc,x0(this),od(this),this.dom,this),this.domObserver=new xd(this,(i,r,s,o)=>jD(this,i,r,s,o)),this.domObserver.start(),pD(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&wd(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(A0),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let i in this._props)e[i]=this._props[i];e.state=this.state;for(let i in t)e[i]=t[i];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){var i;let r=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(ty(this),o=!0),this.state=t;let a=r.plugins!=t.plugins||this._props.plugins!=e.plugins;if(a||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let f=k0(this);qD(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||e.handleDOMEvents!=this._props.handleDOMEvents)&&wd(this),this.editable=M0(this),E0(this);let l=od(this),c=x0(this),u=r.plugins!=t.plugins&&!r.doc.eq(t.doc)?"reset":t.scrollToSelection>r.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(t.doc,c,l);(d||!t.selection.eq(r.selection))&&(o=!0);let h=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&T1(this);if(o){this.domObserver.stop();let f=d&&(Be||Ae)&&!this.composing&&!r.selection.empty&&!t.selection.empty&&GD(r.selection,t.selection);if(d){let p=Ae?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=ED(this)),(s||!this.docView.update(t.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=s0(t.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&X1(this))?sn(this,f):(z0(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),!((i=this.dragging)===null||i===void 0)&&i.node&&!r.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,r),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&R1(h)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",e=>e(this)))if(this.state.selection instanceof A){let e=this.docView.domAfterPos(this.state.selection.from);e.nodeType==1&&Xm(this,e.getBoundingClientRect(),t)}else Xm(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let i=this.directPlugins[e];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let i=this.state.plugins[e];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let e=0;e<this.pluginViews.length;e++){let i=this.pluginViews[e];i.update&&i.update(this,t)}}updateDraggedNode(t,e){let i=t.node,r=-1;if(this.state.doc.nodeAt(i.from)==i.node)r=i.from;else{let s=i.from+(this.state.doc.content.size-e.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==i.node&&(r=s)}this.dragging=new sl(t.slice,t.move,r<0?void 0:A.create(this.state.doc,r))}someProp(t,e){let i=this._props&&this._props[t],r;if(i!=null&&(r=e?e(i):i))return r;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[t];if(a!=null&&(r=e?e(a):a))return r}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[t];if(a!=null&&(r=e?e(a):a))return r}}hasFocus(){if(Be){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&N1(this.dom),sn(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let e=this.dom.parentNode;e;e=e.parentNode)if(e.nodeType==9||e.nodeType==11&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return t||document}updateRoot(){this._root=null}posAtCoords(t){return B1(this,t)}coordsAtPos(t,e=1){return F0(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,i=-1){let r=this.docView.posFromDOM(t,e,i);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(t,e){return H1(this,e||this.state,t)}pasteHTML(t,e){return ro(this,"",t,!1,e||new ClipboardEvent("paste"))}pasteText(t,e){return ro(this,t,null,!0,e||new ClipboardEvent("paste"))}destroy(){this.docView&&(gD(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],od(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,w1())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return yD(this,t)}dispatch(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){let t=this.domSelection();return t?Ne&&this.root.nodeType===11&&E1(this.dom.ownerDocument)==this.dom&&FD(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}};function x0(n){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(n.editable),n.someProp("attributes",e=>{if(typeof e=="function"&&(e=e(n.state)),e)for(let i in e)i=="class"?t.class+=" "+e[i]:i=="style"?t.style=(t.style?t.style+";":"")+e[i]:!t[i]&&i!="contenteditable"&&i!="nodeName"&&(t[i]=String(e[i]))}),t.translate||(t.translate="no"),[Ft.node(0,n.state.doc.content.size,t)]}function E0(n){if(n.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),n.cursorWrapper={dom:t,deco:Ft.widget(n.state.selection.from,t,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function M0(n){return!n.someProp("editable",t=>t(n.state)===!1)}function GD(n,t){let e=Math.min(n.$anchor.sharedDepth(n.head),t.$anchor.sharedDepth(t.head));return n.$anchor.start(e)!=t.$anchor.start(e)}function k0(n){let t=Object.create(null);function e(i){for(let r in i)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=i[r])}return n.someProp("nodeViews",e),n.someProp("markViews",e),t}function qD(n,t){let e=0,i=0;for(let r in n){if(n[r]!=t[r])return!0;e++}for(let r in t)i++;return e!=i}function A0(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var WD=["ol",0],KD=["ul",0],JD=["li",0],ay={attrs:{order:{default:1,validate:"number"}},parseDOM:[{tag:"ol",getAttrs(n){return{order:n.hasAttribute("start")?+n.getAttribute("start"):1}}}],toDOM(n){return n.attrs.order==1?WD:["ol",{start:n.attrs.order},0]}},ly={parseDOM:[{tag:"ul"}],toDOM(){return KD}},cy={parseDOM:[{tag:"li"}],toDOM(){return JD},defining:!0};function uy(n,t=null){return function(e,i){let{$from:r,$to:s}=e.selection,o=r.blockRange(s);if(!o)return!1;let a=i?e.tr:null;return YD(a,o,n,t)?(i&&i(a.scrollIntoView()),!0):!1}}function YD(n,t,e,i=null){let r=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(e)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=o.resolve(t.start-2);s=new li(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new li(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),r=!0}let a=yr(s,e,i,t);return a?(n&&ZD(n,t,a,r,e),!0):!1}function ZD(n,t,e,i,r){let s=b.empty;for(let u=e.length-1;u>=0;u--)s=b.from(e[u].type.create(e[u].attrs,s));n.step(new ge(t.start-(i?2:0),t.end,t.start,t.end,new x(s,0,0),e.length,!0));let o=0;for(let u=0;u<e.length;u++)e[u].type==r&&(o=u+1);let a=e.length-o,l=t.start+e.length-(i?2:0),c=t.parent;for(let u=t.startIndex,d=t.endIndex,h=!0;u<d;u++,h=!1)!h&&Cn(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function dy(n,t){return function(e,i){let{$from:r,$to:s,node:o}=e.selection;if(o&&o.isBlock||r.depth<2||!r.sameParent(s))return!1;let a=r.node(-1);if(a.type!=n)return!1;if(r.parent.content.size==0&&r.node(-1).childCount==r.indexAfter(-1)){if(r.depth==3||r.node(-3).type!=n||r.index(-2)!=r.node(-2).childCount-1)return!1;if(i){let d=b.empty,h=r.index(-1)?1:r.index(-2)?2:3;for(let C=r.depth-h;C>=r.depth-3;C--)d=b.from(r.node(C).copy(d));let f=r.indexAfter(-1)<r.node(-2).childCount?1:r.indexAfter(-2)<r.node(-3).childCount?2:3;d=d.append(b.from(n.createAndFill()));let p=r.before(r.depth-(h-1)),g=e.tr.replace(p,r.after(-f),new x(d,4-h,0)),y=-1;g.doc.nodesBetween(p,g.doc.content.size,(C,B)=>{if(y>-1)return!1;C.isTextblock&&C.content.size==0&&(y=B+1)}),y>-1&&g.setSelection(F.near(g.doc.resolve(y))),i(g.scrollIntoView())}return!0}let l=s.pos==r.end()?a.contentMatchAt(0).defaultType:null,c=e.tr.delete(r.pos,s.pos),u=l?[t?{type:n,attrs:t}:null,{type:l}]:void 0;return Cn(c.doc,r.pos,2,u)?(i&&i(c.split(r.pos,2,u).scrollIntoView()),!0):!1}}function Rd(n){return function(t,e){let{$from:i,$to:r}=t.selection,s=i.blockRange(r,o=>o.childCount>0&&o.firstChild.type==n);return s?e?i.node(s.depth-1).type==n?QD(t,e,n,s):XD(t,e,s):!0:!1}}function QD(n,t,e,i){let r=n.tr,s=i.end,o=i.$to.end(i.depth);s<o&&(r.step(new ge(s-1,o,s,o,new x(b.from(e.create(null,i.parent.copy())),1,0),1,!0)),i=new li(r.doc.resolve(i.$from.pos),r.doc.resolve(o),i.depth));let a=di(i);if(a==null)return!1;r.lift(i,a);let l=r.mapping.map(s,-1)-1;return hi(r.doc,l)&&r.join(l),t(r.scrollIntoView()),!0}function XD(n,t,e){let i=n.tr,r=e.parent;for(let f=e.end,p=e.endIndex-1,g=e.startIndex;p>g;p--)f-=r.child(p).nodeSize,i.delete(f-1,f+1);let s=i.doc.resolve(e.start),o=s.nodeAfter;if(i.mapping.map(e.end)!=e.start+s.nodeAfter.nodeSize)return!1;let a=e.startIndex==0,l=e.endIndex==r.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?b.empty:b.from(r))))return!1;let d=s.pos,h=d+o.nodeSize;return i.step(new ge(d-(a?1:0),h+(l?1:0),d+1,h-1,new x((a?b.empty:b.from(r.copy(b.empty))).append(l?b.empty:b.from(r.copy(b.empty))),a?0:1,l?0:1),a?0:1)),t(i.scrollIntoView()),!0}function Nd(n){return function(t,e){let{$from:i,$to:r}=t.selection,s=i.blockRange(r,c=>c.childCount>0&&c.firstChild.type==n);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=n)return!1;if(e){let c=l.lastChild&&l.lastChild.type==a.type,u=b.from(c?n.create():null),d=new x(b.from(n.create(null,b.from(a.type.create(null,u)))),c?3:1,0),h=s.start,f=s.end;e(t.tr.step(new ge(h-(c?3:1),f,h,f,d,1,!0)).scrollIntoView())}return!0}}var tS={attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(n){return{href:n.getAttribute("href"),title:n.getAttribute("title"),target:n.getAttribute("target")}}}],toDOM(n){let{href:t,title:e,target:i}=n.attrs;return["a",{href:t,title:e,target:i},0]}},nS={parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM(){return["em",0]}},iS={parseDOM:[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(n)&&null}],toDOM(){return["strong",0]}},rS={parseDOM:[{tag:"code"}],toDOM(){return["code",0]}},sS={parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM(){return["u",0]}},oS={parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM(){return["s",0]}},aS={attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:n=>({color:n})}],toDOM(n){let{color:t}=n.attrs;return["span",{style:`color:${t};`},0]}},lS={attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:n=>({backgroundColor:n})}],toDOM(n){let{backgroundColor:t}=n.attrs;return["span",{style:`background-color:${t};`},0]}},cS={attrs:{},parseDOM:[{tag:"sup"},{style:"vertical-align=super"}],toDOM(){return["sup",0]}},uS={attrs:{},parseDOM:[{tag:"sub"},{style:"vertical-align=sub"}],toDOM(){return["sub",0]}},dS={link:tS,em:nS,strong:iS,code:rS,u:sS,s:oS,text_color:aS,text_background_color:lS,sup:cS,sub:uS},hS={content:"block+"},fS={group:"inline"},pS={content:"inline*",group:"block",attrs:{align:{default:null},indent:{default:null}},parseDOM:[{tag:"p",getAttrs(n){let{textAlign:t}=n.style,e=n.getAttribute("align")||t||null,i=n.getAttribute("data-indent")||null;return{align:e,indent:parseInt(i,10)||null}}}],toDOM(n){let{align:t,indent:e}=n.attrs,i={textAlign:t!=="left"?t:null,marginLeft:e!==null?`${e*40}px`:null};return["p",{style:Fa(i)||null,"data-indent":e??null},0]}},gS={content:"block+",group:"block",defining:!0,attrs:{indent:{default:null}},parseDOM:[{tag:"blockquote",getAttrs(n){let t=n.getAttribute("data-indent")||null;return{indent:parseInt(t,10)||null}}}],toDOM(n){let{indent:t}=n.attrs,e={marginLeft:t!==null?`${t*40}px`:null};return["blockquote",{style:Fa(e)||null,"data-indent":t??null},0]}},mS={group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["hr"]}},yS={attrs:{level:{default:1},align:{default:null},indent:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(n){let{textAlign:t}=n.style,e=n.getAttribute("align")||t||null,i=n.getAttribute("data-indent")||null;return{level:1,align:e,indent:parseInt(i,10)||null}}},{tag:"h2",getAttrs(n){let{textAlign:t}=n.style,e=n.getAttribute("align")||t||null,i=n.getAttribute("data-indent")||null;return{level:2,align:e,indent:parseInt(i,10)||null}}},{tag:"h3",getAttrs(n){let{textAlign:t}=n.style,e=n.getAttribute("align")||t||null,i=n.getAttribute("data-indent")||null;return{level:3,align:e,indent:parseInt(i,10)||null}}},{tag:"h4",getAttrs(n){let{textAlign:t}=n.style,e=n.getAttribute("align")||t||null,i=n.getAttribute("data-indent")||null;return{level:4,align:e,indent:parseInt(i,10)||null}}},{tag:"h5",getAttrs(n){let{textAlign:t}=n.style,e=n.getAttribute("align")||t||null,i=n.getAttribute("data-indent")||null;return{level:5,align:e,indent:parseInt(i,10)||null}}},{tag:"h6",getAttrs(n){let{textAlign:t}=n.style,e=n.getAttribute("align")||t||null,i=n.getAttribute("data-indent")||null;return{level:6,align:e,indent:parseInt(i,10)||null}}}],toDOM(n){let{level:t,align:e,indent:i}=n.attrs,r={textAlign:e!=="left"?e:null,marginLeft:i!==null?`${i*40}px`:null},o={style:Fa(r)||null,"data-indent":i??null};return[`h${t}`,o,0]}},vS={content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM(){return["pre",["code",0]]}},_S={inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}},bS={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(n){return{src:n.getAttribute("src"),title:n.getAttribute("title"),alt:n.getAttribute("alt"),width:n.getAttribute("width")}}}],toDOM(n){let{src:t,alt:e,title:i,width:r}=n.attrs;return["img",{src:t,alt:e,title:i,width:r}]}},wS=$(D({},cy),{content:"paragraph block*"}),CS=$(D({},ay),{content:"list_item+",group:"block"}),DS=$(D({},ly),{content:"list_item+",group:"block"}),SS={doc:hS,text:fS,paragraph:pS,blockquote:gS,horizontal_rule:mS,heading:yS,hard_break:_S,code_block:vS,image:bS,list_item:wS,ordered_list:CS,bullet_list:DS},An=new Ua({marks:dS,nodes:SS});var fy=(n,t)=>n.selection.empty?!1:(t&&t(n.tr.deleteSelection().scrollIntoView()),!0);function xS(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("backward",n):e.parentOffset>0)?null:e}var ES=(n,t,e)=>{let i=xS(n,e);if(!i)return!1;let r=py(i);if(!r){let o=i.blockRange(),a=o&&di(o);return a==null?!1:(t&&t(n.tr.lift(o,a).scrollIntoView()),!0)}let s=r.nodeBefore;if(yy(n,r,t,-1))return!0;if(i.parent.content.size==0&&(Er(s,"end")||A.isSelectable(s)))for(let o=i.depth;;o--){let a=Ja(n.doc,i.before(o),i.after(o),x.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=n.tr.step(a);l.setSelection(Er(s,"end")?F.findFrom(l.doc.resolve(l.mapping.map(r.pos,-1)),-1):A.create(l.doc,r.pos-s.nodeSize)),t(l.scrollIntoView())}return!0}if(o==1||i.node(o-1).childCount>1)break}return s.isAtom&&r.depth==i.depth-1?(t&&t(n.tr.delete(r.pos-s.nodeSize,r.pos).scrollIntoView()),!0):!1};function Er(n,t,e=!1){for(let i=n;i;i=t=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(e&&i.childCount!=1)return!1}return!1}var MS=(n,t,e)=>{let{$head:i,empty:r}=n.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("backward",n):i.parentOffset>0)return!1;s=py(i)}let o=s&&s.nodeBefore;return!o||!A.isSelectable(o)?!1:(t&&t(n.tr.setSelection(A.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function py(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){if(n.index(t)>0)return n.doc.resolve(n.before(t+1));if(n.node(t).type.spec.isolating)break}return null}function kS(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("forward",n):e.parentOffset<e.parent.content.size)?null:e}var AS=(n,t,e)=>{let i=kS(n,e);if(!i)return!1;let r=gy(i);if(!r)return!1;let s=r.nodeAfter;if(yy(n,r,t,1))return!0;if(i.parent.content.size==0&&(Er(s,"start")||A.isSelectable(s))){let o=Ja(n.doc,i.before(),i.after(),x.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=n.tr.step(o);a.setSelection(Er(s,"start")?F.findFrom(a.doc.resolve(a.mapping.map(r.pos)),1):A.create(a.doc,a.mapping.map(r.pos))),t(a.scrollIntoView())}return!0}}return s.isAtom&&r.depth==i.depth-1?(t&&t(n.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),!0):!1},OS=(n,t,e)=>{let{$head:i,empty:r}=n.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;s=gy(i)}let o=s&&s.nodeAfter;return!o||!A.isSelectable(o)?!1:(t&&t(n.tr.setSelection(A.create(n.doc,s.pos)).scrollIntoView()),!0)};function gy(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){let e=n.node(t);if(n.index(t)+1<e.childCount)return n.doc.resolve(n.after(t+1));if(e.type.spec.isolating)break}return null}var my=(n,t)=>{let{$from:e,$to:i}=n.selection,r=e.blockRange(i),s=r&&di(r);return s==null?!1:(t&&t(n.tr.lift(r,s).scrollIntoView()),!0)},Fd=(n,t)=>{let{$head:e,$anchor:i}=n.selection;return!e.parent.type.spec.code||!e.sameParent(i)?!1:(t&&t(n.tr.insertText(`
`).scrollIntoView()),!0)};function Ld(n){for(let t=0;t<n.edgeCount;t++){let{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}var Vd=(n,t)=>{let{$head:e,$anchor:i}=n.selection;if(!e.parent.type.spec.code||!e.sameParent(i))return!1;let r=e.node(-1),s=e.indexAfter(-1),o=Ld(r.contentMatchAt(s));if(!o||!r.canReplaceWith(s,s,o))return!1;if(t){let a=e.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(F.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},Bd=(n,t)=>{let e=n.selection,{$from:i,$to:r}=e;if(e instanceof Je||i.parent.inlineContent||r.parent.inlineContent)return!1;let s=Ld(r.parent.contentMatchAt(r.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,a=n.tr.insert(o,s.createAndFill());a.setSelection(J.create(a.doc,o+1)),t(a.scrollIntoView())}return!0},$d=(n,t)=>{let{$cursor:e}=n.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let s=e.before();if(Cn(n.doc,s))return t&&t(n.tr.split(s).scrollIntoView()),!0}let i=e.blockRange(),r=i&&di(i);return r==null?!1:(t&&t(n.tr.lift(i,r).scrollIntoView()),!0)};function IS(n){return(t,e)=>{let{$from:i,$to:r}=t.selection;if(t.selection instanceof A&&t.selection.node.isBlock)return!i.parentOffset||!Cn(t.doc,i.pos)?!1:(e&&e(t.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let f=i.depth;;f--)if(i.node(f).isBlock){l=i.end(f)==i.pos+(i.depth-f),c=i.start(f)==i.pos-(i.depth-f),a=Ld(i.node(f-1).contentMatchAt(i.indexAfter(f-1)));let g=n&&n(r.parent,l,i);s.unshift(g||(l&&a?{type:a}:null)),o=f;break}else{if(f==1)return!1;s.unshift(null)}let u=t.tr;(t.selection instanceof J||t.selection instanceof Je)&&u.deleteSelection();let d=u.mapping.map(i.pos),h=Cn(u.doc,d,s.length,s);if(h||(s[0]=a?{type:a}:null,h=Cn(u.doc,d,s.length,s)),u.split(d,s.length,s),!l&&c&&i.node(o).type!=a){let f=u.mapping.map(i.before(o)),p=u.doc.resolve(f);a&&i.node(o-1).canReplaceWith(p.index(),p.index()+1,a)&&u.setNodeMarkup(u.mapping.map(i.before(o)),a)}return e&&e(u.scrollIntoView()),!0}}var jd=IS();var TS=(n,t)=>(t&&t(n.tr.setSelection(new Je(n.doc))),!0);function RS(n,t,e){let i=t.nodeBefore,r=t.nodeAfter,s=t.index();return!i||!r||!i.type.compatibleContent(r.type)?!1:!i.content.size&&t.parent.canReplace(s-1,s)?(e&&e(n.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(r.isTextblock||hi(n.doc,t.pos))?!1:(e&&e(n.tr.join(t.pos).scrollIntoView()),!0)}function yy(n,t,e,i){let r=t.nodeBefore,s=t.nodeAfter,o,a,l=r.type.spec.isolating||s.type.spec.isolating;if(!l&&RS(n,t,e))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(o=(a=r.contentMatchAt(r.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(e){let f=t.pos+s.nodeSize,p=b.empty;for(let C=o.length-1;C>=0;C--)p=b.from(o[C].create(null,p));p=b.from(r.copy(p));let g=n.tr.step(new ge(t.pos-1,f,t.pos,f,new x(p,1,0),o.length,!0)),y=g.doc.resolve(f+2*o.length);y.nodeAfter&&y.nodeAfter.type==r.type&&hi(g.doc,y.pos)&&g.join(y.pos),e(g.scrollIntoView())}return!0}let u=s.type.spec.isolating||i>0&&l?null:F.findFrom(t,1),d=u&&u.$from.blockRange(u.$to),h=d&&di(d);if(h!=null&&h>=t.depth)return e&&e(n.tr.lift(d,h).scrollIntoView()),!0;if(c&&Er(s,"start",!0)&&Er(r,"end")){let f=r,p=[];for(;p.push(f),!f.isTextblock;)f=f.lastChild;let g=s,y=1;for(;!g.isTextblock;g=g.firstChild)y++;if(f.canReplace(f.childCount,f.childCount,g.content)){if(e){let C=b.empty;for(let W=p.length-1;W>=0;W--)C=b.from(p[W].copy(C));let B=n.tr.step(new ge(t.pos-p.length,t.pos+s.nodeSize,t.pos+y,t.pos+s.nodeSize-y,new x(C,p.length,0),0,!0));e(B.scrollIntoView())}return!0}}return!1}function vy(n){return function(t,e){let i=t.selection,r=n<0?i.$from:i.$to,s=r.depth;for(;r.node(s).isInline;){if(!s)return!1;s--}return r.node(s).isTextblock?(e&&e(t.tr.setSelection(J.create(t.doc,n<0?r.start(s):r.end(s)))),!0):!1}}var NS=vy(-1),PS=vy(1);function _y(n,t=null){return function(e,i){let{$from:r,$to:s}=e.selection,o=r.blockRange(s),a=o&&yr(o,n,t);return a?(i&&i(e.tr.wrap(o,a).scrollIntoView()),!0):!1}}function hl(n,t=null){return function(e,i){let r=!1;for(let s=0;s<e.selection.ranges.length&&!r;s++){let{$from:{pos:o},$to:{pos:a}}=e.selection.ranges[s];e.doc.nodesBetween(o,a,(l,c)=>{if(r)return!1;if(!(!l.isTextblock||l.hasMarkup(n,t)))if(l.type==n)r=!0;else{let u=e.doc.resolve(c),d=u.index();r=u.parent.canReplaceWith(d,d+1,n)}})}if(!r)return!1;if(i){let s=e.tr;for(let o=0;o<e.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=e.selection.ranges[o];s.setBlockType(a,l,n,t)}i(s.scrollIntoView())}return!0}}function FS(n,t,e,i){for(let r=0;r<t.length;r++){let{$from:s,$to:o}=t[r],a=s.depth==0?n.inlineContent&&n.type.allowsMarkType(e):!1;if(n.nodesBetween(s.pos,o.pos,(l,c)=>{if(a||!i&&l.isAtom&&l.isInline&&c>=s.pos&&c+l.nodeSize<=o.pos)return!1;a=l.inlineContent&&l.type.allowsMarkType(e)}),a)return!0}return!1}function LS(n){let t=[];for(let e=0;e<n.length;e++){let{$from:i,$to:r}=n[e];i.doc.nodesBetween(i.pos,r.pos,(s,o)=>{if(s.isAtom&&s.content.size&&s.isInline&&o>=i.pos&&o+s.nodeSize<=r.pos)return o+1>i.pos&&t.push(new _r(i,i.doc.resolve(o+1))),i=i.doc.resolve(o+1+s.content.size),!1}),i.pos<r.pos&&t.push(new _r(i,r))}return t}function Ci(n,t=null,e){let i=(e&&e.removeWhenPresent)!==!1,r=(e&&e.enterInlineAtoms)!==!1;return function(s,o){let{empty:a,$cursor:l,ranges:c}=s.selection;if(a&&!l||!FS(s.doc,c,n,r))return!1;if(o)if(l)n.isInSet(s.storedMarks||l.marks())?o(s.tr.removeStoredMark(n)):o(s.tr.addStoredMark(n.create(t)));else{let u,d=s.tr;r||(c=LS(c)),i?u=!c.some(h=>s.doc.rangeHasMark(h.$from.pos,h.$to.pos,n)):u=!c.every(h=>{let f=!1;return d.doc.nodesBetween(h.$from.pos,h.$to.pos,(p,g,y)=>{if(f)return!1;f=!n.isInSet(p.marks)&&!!y&&y.type.allowsMarkType(n)&&!(p.isText&&/^\s*$/.test(p.textBetween(Math.max(0,h.$from.pos-g),Math.min(p.nodeSize,h.$to.pos-g))))}),!f});for(let h=0;h<c.length;h++){let{$from:f,$to:p}=c[h];if(!u)d.removeMark(f.pos,p.pos,n);else{let g=f.pos,y=p.pos,C=f.nodeAfter,B=p.nodeBefore,W=C&&C.isText?/^\s*/.exec(C.text)[0].length:0,ae=B&&B.isText?/\s*$/.exec(B.text)[0].length:0;g+W<y&&(g+=W,y-=ae),d.addMark(g,y,n.create(t))}}o(d.scrollIntoView())}return!0}}function Mr(...n){return function(t,e,i){for(let r=0;r<n.length;r++)if(n[r](t,e,i))return!0;return!1}}var Pd=Mr(fy,ES,MS),hy=Mr(fy,AS,OS),on={Enter:Mr(Fd,Bd,$d,jd),"Mod-Enter":Vd,Backspace:Pd,"Mod-Backspace":Pd,"Shift-Backspace":Pd,Delete:hy,"Mod-Delete":hy,"Mod-a":TS},by={"Ctrl-h":on.Backspace,"Alt-Backspace":on["Mod-Backspace"],"Ctrl-d":on.Delete,"Ctrl-Alt-Backspace":on["Mod-Delete"],"Alt-Delete":on["Mod-Delete"],"Alt-d":on["Mod-Delete"],"Ctrl-a":NS,"Ctrl-e":PS};for(let n in on)by[n]=on[n];var VS=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,wy=VS?by:on;var ut=class{constructor(t,e,i={}){this.match=t,this.match=t,this.handler=typeof e=="string"?BS(e):e,this.undoable=i.undoable!==!1,this.inCode=i.inCode||!1}};function BS(n){return function(t,e,i,r){let s=n;if(e[1]){let o=e[0].lastIndexOf(e[1]);s+=e[0].slice(o+e[1].length),i+=o;let a=i-r;a>0&&(s=e[0].slice(o-a,o)+s,i=r)}return t.tr.insertText(s,i,r)}}var $S=500;function Dy({rules:n}){let t=new Me({state:{init(){return null},apply(e,i){let r=e.getMeta(this);return r||(e.selectionSet||e.docChanged?null:i)}},props:{handleTextInput(e,i,r,s){return Cy(e,i,r,s,n,t)},handleDOMEvents:{compositionend:e=>{setTimeout(()=>{let{$cursor:i}=e.state.selection;i&&Cy(e,i.pos,i.pos,"",n,t)})}}},isInputRules:!0});return t}function Cy(n,t,e,i,r,s){if(n.composing)return!1;let o=n.state,a=o.doc.resolve(t),l=a.parent.textBetween(Math.max(0,a.parentOffset-$S),a.parentOffset,null,"\uFFFC")+i;for(let c=0;c<r.length;c++){let u=r[c];if(a.parent.type.spec.code){if(!u.inCode)continue}else if(u.inCode==="only")continue;let d=u.match.exec(l),h=d&&u.handler(o,d,t-(d[0].length-i.length),e);if(h)return u.undoable&&h.setMeta(s,{transform:h,from:t,to:e,text:i}),n.dispatch(h),!0}return!1}var Sy=new ut(/--$/,"\u2014"),xy=new ut(/\.\.\.$/,"\u2026"),jS=new ut(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201C"),zS=new ut(/"$/,"\u201D"),US=new ut(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),HS=new ut(/'$/,"\u2019"),Ey=[jS,zS,US,HS];function fl(n,t,e=null,i){return new ut(n,(r,s,o,a)=>{let l=e instanceof Function?e(s):e,c=r.tr.delete(o,a),u=c.doc.resolve(o),d=u.blockRange(),h=d&&yr(d,t,l);if(!h)return null;c.wrap(d,h);let f=c.doc.resolve(o-1).nodeBefore;return f&&f.type==t&&hi(c.doc,o-1)&&(!i||i(s,f))&&c.join(o-1),c})}function zd(n,t,e=null){return new ut(n,(i,r,s,o)=>{let a=i.doc.resolve(s),l=e instanceof Function?e(r):e;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),t)?i.tr.delete(s,o).setBlockType(s,s,t,l):null})}var pl=(n,t)=>{let{from:e,$from:i,to:r,empty:s}=n.selection;return s?!!t.isInSet(n.storedMarks||i.marks()):n.doc.rangeHasMark(e,r,t)},GS=(n,t)=>{for(let e=t.depth;e>0;e-=1)if(t.node(e).type===n)return t.node(e).type;return null},Ud=(n,t,e={})=>{let{selection:i}=n,{$from:r,to:s}=i,o=GS(t,r);return!Object.entries(e).length||!o?!!o:s<=r.end()&&r.parent.hasMarkup(t,e)},My=n=>{let t=[],{selection:e,storedMarks:i}=n,{from:r,to:s,empty:o,$from:a}=e;return o?t=i||a.marks():n.doc.nodesBetween(r,s,l=>{t=[...t,...l.marks]}),t},Hd=n=>{let t=[],{selection:{from:e,to:i}}=n;return n.doc.nodesBetween(e,i,r=>{t.push(r)}),t},Gd=(n,t,e)=>{for(let i of t){let{$from:r,$to:s}=i,o=r.depth===0?n.type.allowsMarkType(e):!1;if(n.nodesBetween(r.pos,s.pos,a=>o?!1:(o=a.inlineContent&&a.type.allowsMarkType(e),!0)),o)return!0}return!1},qd=(n,t,e)=>new ut(n,(i,r,s,o)=>{let{tr:a}=i,l=s,c=o,[u,,d]=r,h=u.search(/\S/);if(d){let f=s+u.indexOf(d),p=f+d.length;p<o&&a.delete(p,o),f>s&&a.delete(s+h,f),c=s+d.length+h}return a.addMark(l,c,t.create(e)),a.removeStoredMark(t),a}),ky=(n,t)=>{let{$from:e}=n.selection;for(let i=e.depth;i>=0;i-=1){let r=e.index(i);if(e.node(i).canReplaceWith(r,r,t))return!0}return!1};var Ay=()=>(n,t)=>{let{doc:e,selection:i,tr:r,schema:s}=n,{$head:{pos:o},from:a,to:l}=i,c=s.marks.link;if(a===l){let u=e.resolve(o),d=o-u.textOffset,h=d+u.parent.child(u.index()).nodeSize;r.removeMark(d,h,c)}else r.removeMark(a,l,c);return r.docChanged?(t?.(r),!0):!1},Wd=(n,t={})=>(e,i)=>{let{tr:r,selection:s}=e,{empty:o,ranges:a,$from:l,$to:c}=s;if(o&&s instanceof J){let{$cursor:u}=s;if(!u||!Gd(e.doc,a,n)||(r.addStoredMark(n.create(t)),!r.storedMarksSet))return!1;i?.(r)}else{if(r.addMark(l.pos,c.pos,n.create(t)),!r.docChanged)return!1;i?.(r.scrollIntoView())}return!0},Oy=n=>(t,e)=>{let{tr:i,selection:r,storedMarks:s,doc:o}=t,{empty:a,ranges:l}=r;if(a&&r instanceof J){let{$cursor:c}=r;if(!c||!Gd(t.doc,l,n))return!1;if(n.isInSet(s||c.marks()))return i.removeStoredMark(n),e?.(i),!0}else{for(let c of l){let{$from:u,$to:d}=c;o.rangeHasMark(u.pos,d.pos,n)&&i.removeMark(u.pos,d.pos,n)}if(!i.docChanged)return!1;e?.(i.scrollIntoView())}return!1};var gl=200,Ce=function(){};Ce.prototype.append=function(t){return t.length?(t=Ce.from(t),!this.length&&t||t.length<gl&&this.leafAppend(t)||this.length<gl&&t.leafPrepend(this)||this.appendInner(t)):this};Ce.prototype.prepend=function(t){return t.length?Ce.from(t).append(this):this};Ce.prototype.appendInner=function(t){return new qS(this,t)};Ce.prototype.slice=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.length),t>=e?Ce.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))};Ce.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Ce.prototype.forEach=function(t,e,i){e===void 0&&(e=0),i===void 0&&(i=this.length),e<=i?this.forEachInner(t,e,i,0):this.forEachInvertedInner(t,e,i,0)};Ce.prototype.map=function(t,e,i){e===void 0&&(e=0),i===void 0&&(i=this.length);var r=[];return this.forEach(function(s,o){return r.push(t(s,o))},e,i),r};Ce.from=function(t){return t instanceof Ce?t:t&&t.length?new Iy(t):Ce.empty};var Iy=function(n){function t(i){n.call(this),this.values=i}n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t;var e={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(r,s){return r==0&&s==this.length?this:new t(this.values.slice(r,s))},t.prototype.getInner=function(r){return this.values[r]},t.prototype.forEachInner=function(r,s,o,a){for(var l=s;l<o;l++)if(r(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,o,a){for(var l=s-1;l>=o;l--)if(r(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(r){if(this.length+r.length<=gl)return new t(this.values.concat(r.flatten()))},t.prototype.leafPrepend=function(r){if(this.length+r.length<=gl)return new t(r.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(t.prototype,e),t}(Ce);Ce.empty=new Iy([]);var qS=function(n){function t(e,i){n.call(this),this.left=e,this.right=i,this.length=e.length+i.length,this.depth=Math.max(e.depth,i.depth)+1}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},t.prototype.forEachInner=function(i,r,s,o){var a=this.left.length;if(r<a&&this.left.forEachInner(i,r,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(i,Math.max(r-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},t.prototype.forEachInvertedInner=function(i,r,s,o){var a=this.left.length;if(r>a&&this.right.forEachInvertedInner(i,r-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(i,Math.min(r,a),s,o)===!1)return!1},t.prototype.sliceInner=function(i,r){if(i==0&&r==this.length)return this;var s=this.left.length;return r<=s?this.left.slice(i,r):i>=s?this.right.slice(i-s,r-s):this.left.slice(i,s).append(this.right.slice(0,r-s))},t.prototype.leafAppend=function(i){var r=this.right.leafAppend(i);if(r)return new t(this.left,r)},t.prototype.leafPrepend=function(i){var r=this.left.leafPrepend(i);if(r)return new t(r,this.right)},t.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new t(this.left,new t(this.right,i)):new t(this,i)},t}(Ce),Kd=Ce;var WS=500,Si=class n{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let r,s;e&&(r=this.remapping(i,this.items.length),s=r.maps.length);let o=t.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){r||(r=this.remapping(i,h+1),s=r.maps.length),s--,u.push(d);return}if(r){u.push(new Lt(d.map));let f=d.step.map(r.slice(s)),p;f&&o.maybeStep(f).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new Lt(p,void 0,void 0,c.length+u.length))),s--,p&&r.appendMap(p,s)}else o.maybeStep(d.step);if(d.selection)return a=r?d.selection.map(r.slice(s)):d.selection,l=new n(this.items.slice(0,i).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(t,e,i,r){let s=[],o=this.eventCount,a=this.items,l=!r&&a.length?a.get(a.length-1):null;for(let u=0;u<t.steps.length;u++){let d=t.steps[u].invert(t.docs[u]),h=new Lt(t.mapping.maps[u],d,e),f;(f=l&&l.merge(h))&&(h=f,u?s.pop():a=a.slice(0,a.length-1)),s.push(h),e&&(o++,e=void 0),r||(l=h)}let c=o-i.depth;return c>JS&&(a=KS(a,c),o-=c),new n(a.append(s),o)}remapping(t,e){let i=new Ks;return this.items.forEach((r,s)=>{let o=r.mirrorOffset!=null&&s-r.mirrorOffset>=t?i.maps.length-r.mirrorOffset:void 0;i.appendMap(r.map,o)},t,e),i}addMaps(t){return this.eventCount==0?this:new n(this.items.append(t.map(e=>new Lt(e))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let i=[],r=Math.max(0,this.items.length-e),s=t.mapping,o=t.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},r);let l=e;this.items.forEach(h=>{let f=s.getMirror(--l);if(f==null)return;o=Math.min(o,f);let p=s.maps[f];if(h.step){let g=t.steps[f].invert(t.docs[f]),y=h.selection&&h.selection.map(s.slice(l+1,f));y&&a++,i.push(new Lt(p,g,y))}else i.push(new Lt(p))},r);let c=[];for(let h=e;h<o;h++)c.push(new Lt(s.maps[h]));let u=this.items.slice(0,r).append(c).append(i),d=new n(u,a);return d.emptyItemCount()>WS&&(d=d.compress(this.items.length-i.length)),d}emptyItemCount(){let t=0;return this.items.forEach(e=>{e.step||t++}),t}compress(t=this.items.length){let e=this.remapping(0,t),i=e.maps.length,r=[],s=0;return this.items.forEach((o,a)=>{if(a>=t)r.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(e.slice(i)),c=l&&l.getMap();if(i--,c&&e.appendMap(c,i),l){let u=o.selection&&o.selection.map(e.slice(i));u&&s++;let d=new Lt(c.invert(),l,u),h,f=r.length-1;(h=r.length&&r[f].merge(d))?r[f]=h:r.push(d)}}else o.map&&i--},this.items.length,0),new n(Kd.from(r.reverse()),s)}};Si.empty=new Si(Kd.empty,0);function KS(n,t){let e;return n.forEach((i,r)=>{if(i.selection&&t--==0)return e=r,!1}),n.slice(e)}var Lt=class n{constructor(t,e,i,r){this.map=t,this.step=e,this.selection=i,this.mirrorOffset=r}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new n(e.getMap().invert(),e,this.selection)}}},Vt=class{constructor(t,e,i,r,s){this.done=t,this.undone=e,this.prevRanges=i,this.prevTime=r,this.prevComposition=s}},JS=20;function YS(n,t,e,i){let r=e.getMeta(Di),s;if(r)return r.historyState;e.getMeta(XS)&&(n=new Vt(n.done,n.undone,null,0,-1));let o=e.getMeta("appendedTransaction");if(e.steps.length==0)return n;if(o&&o.getMeta(Di))return o.getMeta(Di).redo?new Vt(n.done.addTransform(e,void 0,i,ml(t)),n.undone,Ty(e.mapping.maps),n.prevTime,n.prevComposition):new Vt(n.done,n.undone.addTransform(e,void 0,i,ml(t)),null,n.prevTime,n.prevComposition);if(e.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=e.getMeta("composition"),l=n.prevTime==0||!o&&n.prevComposition!=a&&(n.prevTime<(e.time||0)-i.newGroupDelay||!ZS(e,n.prevRanges)),c=o?Jd(n.prevRanges,e.mapping):Ty(e.mapping.maps);return new Vt(n.done.addTransform(e,l?t.selection.getBookmark():void 0,i,ml(t)),Si.empty,c,e.time,a??n.prevComposition)}else return(s=e.getMeta("rebased"))?new Vt(n.done.rebased(e,s),n.undone.rebased(e,s),Jd(n.prevRanges,e.mapping),n.prevTime,n.prevComposition):new Vt(n.done.addMaps(e.mapping.maps),n.undone.addMaps(e.mapping.maps),Jd(n.prevRanges,e.mapping),n.prevTime,n.prevComposition)}function ZS(n,t){if(!t)return!1;if(!n.docChanged)return!0;let e=!1;return n.mapping.maps[0].forEach((i,r)=>{for(let s=0;s<t.length;s+=2)i<=t[s+1]&&r>=t[s]&&(e=!0)}),e}function Ty(n){let t=[];for(let e=n.length-1;e>=0&&t.length==0;e--)n[e].forEach((i,r,s,o)=>t.push(s,o));return t}function Jd(n,t){if(!n)return null;let e=[];for(let i=0;i<n.length;i+=2){let r=t.map(n[i],1),s=t.map(n[i+1],-1);r<=s&&e.push(r,s)}return e}function QS(n,t,e){let i=ml(t),r=Di.get(t).spec.config,s=(e?n.undone:n.done).popEvent(t,i);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(e?n.done:n.undone).addTransform(s.transform,t.selection.getBookmark(),r,i),l=new Vt(e?a:s.remaining,e?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Di,{redo:e,historyState:l})}var Yd=!1,Ry=null;function ml(n){let t=n.plugins;if(Ry!=t){Yd=!1,Ry=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){Yd=!0;break}}return Yd}var Di=new Ye("history"),XS=new Ye("closeHistory");function Ny(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Me({key:Di,state:{init(){return new Vt(Si.empty,Si.empty,null,0,-1)},apply(t,e,i){return YS(e,i,t,n)}},config:n,props:{handleDOMEvents:{beforeinput(t,e){let i=e.inputType,r=i=="historyUndo"?vl:i=="historyRedo"?lo:null;return r?(e.preventDefault(),r(t.state,t.dispatch)):!1}}}})}function yl(n,t){return(e,i)=>{let r=Di.getState(e);if(!r||(n?r.undone:r.done).eventCount==0)return!1;if(i){let s=QS(r,e,n);s&&i(t?s.scrollIntoView():s)}return!0}}var vl=yl(!1,!0),lo=yl(!0,!0),nR=yl(!1,!1),iR=yl(!0,!1);var an={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},bl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ex=typeof navigator<"u"&&/Mac/.test(navigator.platform),tx=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(fe=0;fe<10;fe++)an[48+fe]=an[96+fe]=String(fe);var fe;for(fe=1;fe<=24;fe++)an[fe+111]="F"+fe;var fe;for(fe=65;fe<=90;fe++)an[fe]=String.fromCharCode(fe+32),bl[fe]=String.fromCharCode(fe);var fe;for(_l in an)bl.hasOwnProperty(_l)||(bl[_l]=an[_l]);var _l;function Py(n){var t=ex&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||tx&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",e=!t&&n.key||(n.shiftKey?bl:an)[n.keyCode]||n.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}var nx=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function ix(n){let t=n.split(/-(?!$)/),e=t[t.length-1];e=="Space"&&(e=" ");let i,r,s,o;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))nx?o=!0:r=!0;else throw new Error("Unrecognized modifier name: "+l)}return i&&(e="Alt-"+e),r&&(e="Ctrl-"+e),o&&(e="Meta-"+e),s&&(e="Shift-"+e),e}function rx(n){let t=Object.create(null);for(let e in n)t[ix(e)]=n[e];return t}function Zd(n,t,e=!0){return t.altKey&&(n="Alt-"+n),t.ctrlKey&&(n="Ctrl-"+n),t.metaKey&&(n="Meta-"+n),e&&t.shiftKey&&(n="Shift-"+n),n}function co(n){return new Me({props:{handleKeyDown:sx(n)}})}function sx(n){let t=rx(n);return function(e,i){let r=Py(i),s,o=t[Zd(r,i)];if(o&&o(e.state,e.dispatch,e))return!0;if(r.length==1&&r!=" "){if(i.shiftKey){let a=t[Zd(r,i,!1)];if(a&&a(e.state,e.dispatch,e))return!0}if((i.shiftKey||i.altKey||i.metaKey||r.charCodeAt(0)>127)&&(s=an[i.keyCode])&&s!=r){let a=t[Zd(s,i)];if(a&&a(e.state,e.dispatch,e))return!0}}return!1}}var ox=["imgEl"],ax=n=>({"NgxEditor__Resizer--Active":n});function lx(n,t){if(n&1){let e=Se();v(0,"span",4)(1,"span",5),R("mousedown",function(r){Q(e);let s=M();return X(s.startResizing(r,"left"))}),_(),v(2,"span",6),R("mousedown",function(r){Q(e);let s=M();return X(s.startResizing(r,"right"))}),_(),v(3,"span",7),R("mousedown",function(r){Q(e);let s=M();return X(s.startResizing(r,"left"))}),_(),v(4,"span",8),R("mousedown",function(r){Q(e);let s=M();return X(s.startResizing(r,"right"))}),_()()}}var cx=["ngxEditor"],ux=["*"];function dx(n,t){if(n&1&&(v(0,"div",12),k(1),j(2,"async"),_()),n&2){let e=M(2);S(),tt(" ",U(2,1,(e.href.errors==null?null:e.href.errors.pattern)&&e.getLabel("enterValidUrl"))," ")}}function hx(n,t){if(n&1&&(v(0,"div",12),k(1),_()),n&2){let e=M(2);S(),tt(" ",(e.text.errors==null?null:e.text.errors.required)&&"This is required"," ")}}function fx(n,t){if(n&1&&(v(0,"div",4)(1,"div",5)(2,"label"),O(3,"input",13),k(4),j(5,"async"),_()()()),n&2){let e=M(2);S(4),tt(" ",U(5,1,e.getLabel("openInNewTab"))," ")}}function px(n,t){if(n&1){let e=Se();v(0,"div",2)(1,"form",3),R("ngSubmit",function(r){Q(e);let s=M();return X(s.insertLink(r))}),v(2,"div",4)(3,"div",5)(4,"label",6),k(5),j(6,"async"),_(),O(7,"input",7),ne(8,dx,3,3,"div",8),_()(),v(9,"div",4)(10,"div",5)(11,"label",6),k(12),j(13,"async"),_(),O(14,"input",9),ne(15,hx,2,1,"div",8),_()(),ne(16,fx,6,3,"div",10),v(17,"button",11),k(18),j(19,"async"),_()()()}if(n&2){let e=M();S(),E("formGroup",e.form),S(3),E("htmlFor",e.getId("link-popup-url")),S(),hn(U(6,12,e.getLabel("url"))),S(2),E("id",e.getId("link-popup-url")),S(),E("ngIf",e.href.touched&&e.href.invalid),S(3),E("htmlFor",e.getId("link-popup-label")),S(),hn(U(13,14,e.getLabel("text"))),S(2),E("id",e.getId("link-popup-label")),S(),E("ngIf",e.text.touched&&e.text.invalid),S(),E("ngIf",e.options.showOpenInNewTab),S(),E("disabled",!e.form.valid),S(),hn(U(19,16,e.getLabel("insert")))}}var gx=(n,t)=>({"NgxEditor__Dropdown--Active":n,"NgxEditor--Disabled":t});function mx(n,t){if(n&1){let e=Se();v(0,"button",4),j(1,"async"),R("mousedown",function(r){let s=Q(e).$implicit,o=M(2);return X(o.onDropdownItemMouseClick(r,s))})("keydown.enter",function(r){let s=Q(e).$implicit,o=M(2);return X(o.onDropdownItemKeydown(r,s))})("keydown.space",function(r){let s=Q(e).$implicit,o=M(2);return X(o.onDropdownItemKeydown(r,s))}),k(2),j(3,"async"),_()}if(n&2){let e=t.$implicit,i=M(2);E("ngClass",_o(8,gx,e===i.activeItem,i.disabledItems.includes(e)))("ariaLabel",U(1,4,i.getName(e))),Fi("aria-selected",e===i.activeItem),S(2),tt(" ",U(3,6,i.getName(e))," ")}}function yx(n,t){if(n&1&&(v(0,"div",2),ne(1,mx,4,11,"button",3),_()),n&2){let e=M();S(),E("ngForOf",e.items)("ngForTrackBy",e.trackByIndex)}}function vx(n,t){if(n&1&&(v(0,"div",12),k(1),j(2,"async"),_()),n&2){let e=M(2);S(),tt(" ",U(2,1,(e.src.errors==null?null:e.src.errors.pattern)&&e.getLabel("enterValidUrl"))," ")}}function _x(n,t){if(n&1){let e=Se();v(0,"div",2)(1,"form",3),R("ngSubmit",function(r){Q(e);let s=M();return X(s.insertLink(r))}),v(2,"div",4)(3,"div",5)(4,"label",6),k(5),j(6,"async"),_(),O(7,"input",7),ne(8,vx,3,3,"div",8),_()(),v(9,"div",4)(10,"div",5)(11,"label",6),k(12),j(13,"async"),_(),O(14,"input",9),_()(),v(15,"div",4)(16,"div",5)(17,"label",6),k(18),j(19,"async"),_(),O(20,"input",10),_()(),v(21,"button",11),k(22),j(23,"async"),_()()()}if(n&2){let e=M();S(),E("formGroup",e.form),S(3),E("htmlFor",e.getId("image-popup-url")),S(),hn(U(6,13,e.getLabel("url"))),S(2),E("id",e.getId("image-popup-url")),S(),E("ngIf",e.src.touched&&e.src.invalid),S(3),E("htmlFor",e.getId("image-popup-label")),S(),hn(U(13,15,e.getLabel("altText"))),S(2),E("id",e.getId("image-popup-label")),S(3),E("htmlFor",e.getId("image-popup-title")),S(),hn(U(19,17,e.getLabel("title"))),S(2),E("id",e.getId("image-popup-title")),S(),E("disabled",!e.form.valid||!e.form.dirty),S(),hn(U(23,19,e.getLabel("insert")))}}var bx=(n,t)=>({backgroundColor:n,color:t}),wx=n=>({"NgxEditor__Color--Active":n});function Cx(n,t){if(n&1){let e=Se();v(0,"button",7),R("mousedown",function(r){let s=Q(e).$implicit,o=M(3);return X(o.onColorSelectMouseClick(r,s))})("keydown.enter",function(){let r=Q(e).$implicit,s=M(3);return X(s.onColorSelectKeydown(r))})("keydown.space",function(){let r=Q(e).$implicit,s=M(3);return X(s.onColorSelectKeydown(r))}),_()}if(n&2){let e=t.$implicit,i=M(3);E("ngStyle",_o(3,bx,e,i.getContrastYIQ(e)))("title",e)("ngClass",Kl(6,wx,i.activeColors.includes(e)))}}function Dx(n,t){if(n&1&&(v(0,"div",5),ne(1,Cx,1,8,"button",6),_()),n&2){let e=t.$implicit,i=M(2);S(),E("ngForOf",e)("ngForTrackBy",i.trackByIndex)}}function Sx(n,t){if(n&1){let e=Se();v(0,"div",2),ne(1,Dx,2,2,"div",3),v(2,"button",4),R("mousedown",function(r){Q(e);let s=M();return X(s.onRemoveMouseClick(r))})("keydown.enter",function(){Q(e);let r=M();return X(r.onRemoveKeydown())})("keydown.space",function(){Q(e);let r=M();return X(r.onRemoveKeydown())}),k(3),j(4,"async"),_()()}if(n&2){let e=M();S(),E("ngForOf",e.presets)("ngForTrackBy",e.trackByIndex),S(),E("disabled",!e.isActive),S(),tt(" ",U(4,4,e.getLabel("remove"))," ")}}var xx=(n,t)=>({"NgxEditor--Disabled":n,"NgxEditor__MenuBar--Reverse":t});function Ex(n,t){if(n&1&&O(0,"ngx-toggle-command",7),n&2){let e=M().$implicit,i=M(2);Ut(i.iconContainerClass),E("toolbarItem",e)}}function Mx(n,t){if(n&1&&O(0,"ngx-insert-command",7),n&2){let e=M().$implicit,i=M(2);Ut(i.iconContainerClass),E("toolbarItem",e)}}function kx(n,t){if(n&1&&(Li(0),O(1,"ngx-link",8),Vi()),n&2){let e=M().$implicit,i=M(2);S(),Ut(i.iconContainerClass),E("options",i.getLinkOptions(e))}}function Ax(n,t){if(n&1&&O(0,"ngx-image"),n&2){let e=M(3);Ut(e.iconContainerClass)}}function Ox(n,t){if(n&1&&O(0,"ngx-dropdown",10),n&2){let e=t.$implicit,i=M(4);Ut(i.dropdownContainerClass),E("group",e.key)("items",e.value)}}function Ix(n,t){if(n&1&&(Li(0),ne(1,Ox,1,4,"ngx-dropdown",9),j(2,"keyvalue"),Vi()),n&2){let e=M().$implicit,i=M(2);S(),E("ngForOf",U(2,2,i.getDropdownItems(e)))("ngForTrackBy",i.trackByIndex)}}function Tx(n,t){if(n&1&&O(0,"ngx-color-picker",11),n&2){let e=M(3);Ut(e.iconContainerClass),E("presets",e.presets)}}function Rx(n,t){if(n&1&&O(0,"ngx-color-picker",12),n&2){let e=M(3);Ut(e.iconContainerClass),E("presets",e.presets)}}function Nx(n,t){if(n&1&&O(0,"div"),n&2){let e=M(3);Ut(e.seperatorClass)}}function Px(n,t){if(n&1&&(Li(0),ne(1,Ex,1,3,"ngx-toggle-command",3)(2,Mx,1,3,"ngx-insert-command",3)(3,kx,2,3,"ng-container",2)(4,Ax,1,2,"ngx-image",4)(5,Ix,3,4,"ng-container",2)(6,Tx,1,3,"ngx-color-picker",5)(7,Rx,1,3,"ngx-color-picker",6)(8,Nx,1,2,"div",4),Vi()),n&2){let e=t.$implicit,i=t.last,r=M().last,s=M();S(),E("ngIf",s.toggleCommands.includes(e)),S(),E("ngIf",s.insertCommands.includes(e)),S(),E("ngIf",s.isLinkItem(e)),S(),E("ngIf",e==="image"),S(),E("ngIf",s.isDropDown(e)),S(),E("ngIf",e==="text_color"),S(),E("ngIf",e==="background_color"),S(),E("ngIf",i&&!r)}}function Fx(n,t){if(n&1&&(Li(0),ne(1,Px,9,8,"ng-container",1),Vi()),n&2){let e=t.$implicit,i=M();S(),E("ngForOf",e)("ngForTrackBy",i.trackByIndex)}}function Lx(n,t){if(n&1&&(Li(0),zh(1,13),Vi()),n&2){let e=M();S(),E("ngTemplateOutlet",e.customMenuRef)}}var Vx=(n=!0)=>new Me({key:new Ye("editable"),state:{init(){return n},apply(t,e){return t.getMeta("UPDATE_EDITABLE")??e}},props:{editable(t){return this.getState(t)},attributes(t){return this.getState(t)?null:{class:"NgxEditor__Content--Disabled"}}}}),Bx="NgxEditor__Placeholder",$x=n=>new Me({key:new Ye("placeholder"),state:{init(){return n??""},apply(t,e){return t.getMeta("UPDATE_PLACEHOLDER")??e}},props:{decorations(t){let{doc:e}=t,{textContent:i,childCount:r}=e,s=this.getState(t);if(!s||r>1)return Re.empty;let o=[],a=(l,c)=>{if(l.type.isBlock&&l.childCount===0&&i.length===0){let u=c,d=c+l.nodeSize,h=Ft.node(u,d,{class:Bx,"data-placeholder":s,"data-align":l.attrs.align??null});o.push(h)}return!1};return e.descendants(a),Re.create(e,o)}}}),jx=(n={})=>new Me({key:new Ye("attributes"),props:{attributes:n}}),zx=n=>new Me({key:new Ye("focus"),props:{handleDOMEvents:{focus:()=>(n(),!1)}}}),Ux=n=>new Me({key:new Ye("blur"),props:{handleDOMEvents:{blur:()=>(n(),!1)}}}),Hx=(()=>{class n{src;alt="";title="";outerWidth="";selected=!1;view;imageResize=new ye;imgEl;startResizing(e,i){e.preventDefault(),this.resizeImage(e,i)}resizeImage(e,i){let r=e.pageX,s=this.imgEl.nativeElement.clientWidth,o=i==="left",{width:a}=window.getComputedStyle(this.view.dom),l=parseInt(a,10),c=d=>{let f=d.pageX-r,p=o?s-f:s+f;p>l||p<20||(this.outerWidth=`${p}px`)},u=d=>{d.preventDefault(),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u),this.imageResize.emit()};document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=re({type:n,selectors:[["ngx-image-view"]],viewQuery:function(i,r){if(i&1&&Mt(ox,7),i&2){let s;pt(s=gt())&&(r.imgEl=s.first)}},inputs:{src:"src",alt:"alt",title:"title",outerWidth:"outerWidth",selected:"selected",view:"view"},outputs:{imageResize:"imageResize"},decls:4,vars:9,consts:[["imgEl",""],[1,"NgxEditor__ImageWrapper",3,"ngClass"],["class","NgxEditor__ResizeHandle",4,"ngIf"],[3,"src","alt","title"],[1,"NgxEditor__ResizeHandle"],[1,"NgxEditor__ResizeHandle--TL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--TR",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BR",3,"mousedown"]],template:function(i,r){i&1&&(v(0,"span",1),ne(1,lx,5,0,"span",2),O(2,"img",3,0),_()),i&2&&(Wl("width",r.outerWidth),E("ngClass",Kl(7,ax,r.selected)),S(),E("ngIf",r.selected),S(),E("src",r.src,Ih)("alt",r.alt)("title",r.title))},dependencies:[$r,Bn],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}"]})}return n})(),Qd=class{dom;view;getPos;applicationRef;imageComponentRef;resizeSubscription;node;updating=!1;constructor(t,e,i,r){this.applicationRef=r.get(Lr),this.imageComponentRef=tf(Hx,{environmentInjector:this.applicationRef.injector}),this.applicationRef.attachView(this.imageComponentRef.hostView),this.setNodeAttributes(t.attrs),this.imageComponentRef.instance.view=e,this.dom=this.imageComponentRef.location.nativeElement,this.view=e,this.node=t,this.getPos=i,this.resizeSubscription=this.imageComponentRef.instance.imageResize.subscribe(()=>{this.handleResize()})}computeChanges(t,e){return JSON.stringify(t)===JSON.stringify(e)}setNodeAttributes(t){this.imageComponentRef.instance.src=t.src,this.imageComponentRef.instance.alt=t.alt,this.imageComponentRef.instance.title=t.title,this.imageComponentRef.instance.outerWidth=t.width}handleResize=()=>{if(this.updating)return;let{state:t,dispatch:e}=this.view,{tr:i}=t,r=i.setNodeMarkup(this.getPos(),void 0,$(D({},this.node.attrs),{width:this.imageComponentRef.instance.outerWidth})),s=r.doc.resolve(this.getPos()),o=new A(s);r.setSelection(o),e(r)};update(t){return t.type!==this.node.type?!1:(this.node=t,this.computeChanges(this.node.attrs,t.attrs)&&(this.updating=!0,this.setNodeAttributes(t.attrs),this.updating=!1),!0)}ignoreMutation(){return!0}selectNode(){this.imageComponentRef.instance.selected=!0}deselectNode(){this.imageComponentRef.instance.selected=!1}destroy(){this.resizeSubscription.unsubscribe(),this.applicationRef.detachView(this.imageComponentRef.hostView)}},Gx=n=>new Me({key:new Ye("image-resize"),props:{nodeViews:{image:(t,e,i)=>new Qd(t,e,i,n)}}}),qx=/(?:https?:\/\/)?[\w-]+(?:\.[\w-]+)+\.?(?:\d+)?(?:\/\S*)?$/,Gy=n=>{let t=[];return n.forEach(e=>{if(e.isText){let i=e.text,r=0,s=qx.exec(i);if(s){let o=s.index,a=o+s[0].length,{link:l}=e.type.schema.marks;o>0&&t.push(e.cut(r,o));let c=i.slice(o,a);t.push(e.cut(o,a).mark(l.create({href:c}).addToSet(e.marks))),r=a}r<i.length&&t.push(e.cut(r))}else t.push(e.copy(Gy(e.content)))}),b.fromArray(t)},Wx=()=>new Me({key:new Ye("linkify"),props:{transformPasted:n=>new x(Gy(n.content),n.openStart,n.openEnd)}}),qy=n=>typeof n=="string",Kx=()=>window.trustedTypes,Wy=n=>Kx()?.isHTML(n)??!1,Ky=n=>qy(n)||Wy(n),Jy={type:"doc",content:[{type:"paragraph"}]},Ei=(n,t)=>{let e=t??An,i=e.nodeFromJSON(n),r=Xt.fromSchema(e).serializeFragment(i.content),s=document.createElement("div");return s.appendChild(r),s.innerHTML},Jx=(n,t,e)=>{let i=t??An,r=document.createElement("div");return r.innerHTML=n,wn.fromSchema(i).parse(r,e).toJSON()},ho=(n,t,e)=>{if(!n)return t.nodeFromJSON(Jy);if(!Ky(n))return t.nodeFromJSON(n);let i=Jx(n,t,e);return t.nodeFromJSON(i)},Yy=(()=>{class n{renderer;injector;elementRef;constructor(e,i,r){this.renderer=e,this.injector=i,this.elementRef=r}ngxEditor;editor;outputFormat;placeholder="Type Here...";focusOut=new ye;focusIn=new ye;unsubscribe=new Oe;onChange=()=>{};onTouched=()=>{};writeValue(e){!this.outputFormat&&Ky(e)&&(this.outputFormat="html"),this.editor.setContent(e??Jy)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.setMeta("UPDATE_EDITABLE",!e),this.renderer.setProperty(this.elementRef.nativeElement,"disabled",e)}handleChange(e){if(this.outputFormat==="html"){let i=Ei(e,this.editor.schema);this.onChange(i);return}this.onChange(e)}setMeta(e,i){let{dispatch:r,state:{tr:s}}=this.editor.view;r(s.setMeta(e,i))}setPlaceholder(e){this.setMeta("UPDATE_PLACEHOLDER",e)}registerPlugins(){this.editor.registerPlugin(Vx()),this.editor.registerPlugin($x(this.placeholder)),this.editor.registerPlugin(jx({class:"NgxEditor__Content"})),this.editor.registerPlugin(zx(()=>{this.focusIn.emit()})),this.editor.registerPlugin(Ux(()=>{this.focusOut.emit(),this.onTouched()})),this.editor.features.resizeImage&&this.editor.registerPlugin(Gx(this.injector)),this.editor.features.linkOnPaste&&this.editor.registerPlugin(Wx())}ngOnInit(){if(!this.editor)throw new pr("Required editor instance for initializing editor component");this.registerPlugins(),this.renderer.appendChild(this.ngxEditor.nativeElement,this.editor.view.dom),this.editor.valueChanges.pipe(yo(this.unsubscribe)).subscribe(e=>{this.handleChange(e)})}ngOnChanges(e){e.placeholder&&!e.placeholder.isFirstChange()&&this.setPlaceholder(e.placeholder.currentValue)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}static \u0275fac=function(i){return new(i||n)(w(ft),w(Ti),w(Ie))};static \u0275cmp=re({type:n,selectors:[["ngx-editor"]],viewQuery:function(i,r){if(i&1&&Mt(cx,7),i&2){let s;pt(s=gt())&&(r.ngxEditor=s.first)}},inputs:{editor:"editor",outputFormat:"outputFormat",placeholder:"placeholder"},outputs:{focusOut:"focusOut",focusIn:"focusIn"},features:[kt([{provide:dr,useExisting:jt(()=>n),multi:!0}]),Xe],ngContentSelectors:ux,decls:3,vars:0,consts:[["ngxEditor",""],[1,"NgxEditor"]],template:function(i,r){i&1&&(Uh(),v(0,"div",1,0),Hh(2),_())},styles:[`:root{--ngx-editor-border-radius: 4px;--ngx-editor-background-color: #fff;--ngx-editor-text-color: #000;--ngx-editor-placeholder-color: #6c757d;--ngx-editor-border-color: rgba(0, 0, 0, .2);--ngx-editor-wrapper-border-color: rgba(0, 0, 0, .2);--ngx-editor-menubar-bg-color: #fff;--ngx-editor-menubar-padding: 3px;--ngx-editor-menubar-height: 30px;--ngx-editor-blockquote-color: #ddd;--ngx-editor-blockquote-border-width: 3px;--ngx-editor-icon-size: 30px;--ngx-editor-popup-bg-color: #fff;--ngx-editor-popup-border-radius: 4px;--ngx-editor-popup-shadow: rgba(60, 64, 67, .15) 0px 2px 6px 2px;--ngx-editor-menu-item-border-radius: 2px;--ngx-editor-menu-item-active-color: #1a73e8;--ngx-editor-menu-item-hover-bg-color: #f1f1f1;--ngx-editor-menu-item-active-bg-color: #e8f0fe;--ngx-editor-seperator-color: #ccc;--ngx-editor-bubble-bg-color: #000;--ngx-editor-bubble-text-color: #fff;--ngx-editor-bubble-item-hover-color: #636262;--ngx-editor-bubble-seperator-color: #fff;--ngx-editor-focus-ring-color: #5e9ed6;--ngx-editor-error-color: red;--ngx-editor-click-pointer: default}.NgxEditor{background:var(--ngx-editor-background-color);color:var(--ngx-editor-text-color);background-clip:padding-box;border-radius:var(--ngx-editor-border-radius);border:1px solid var(--ngx-editor-border-color);position:relative}.NgxEditor--Disabled{opacity:.5!important;pointer-events:none!important}.NgxEditor__Placeholder:before{color:var(--ngx-editor-placeholder-color);opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:"liga" 0}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:var(--ngx-editor-blockquote-border-width) solid var(--ngx-editor-blockquote-color);margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid var(--ngx-editor-wrapper-border-color);border-radius:var(--ngx-editor-border-radius)}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:var(--ngx-editor-border-radius);border-top-right-radius:var(--ngx-editor-border-radius);border-bottom:1px solid var(--ngx-editor-border-color)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:var(--ngx-editor-menubar-padding);background-color:var(--ngx-editor-menubar-bg-color);gap:.25rem .1rem}.NgxEditor__MenuBar button:not(:disabled),.NgxEditor__MenuBar [role=button]:not(:disabled){cursor:var(--ngx-editor-click-pointer, default)}.NgxEditor__MenuItem{display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem.NgxEditor__MenuItem--IconContainer{display:flex;align-items:center;justify-content:center}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon{all:unset;appearance:none;height:var(--ngx-editor-icon-size);width:var(--ngx-editor-icon-size);transition:.2s ease-in-out;display:inline-flex;align-items:center;justify-content:center;border-radius:var(--ngx-editor-menu-item-border-radius)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:var(--ngx-editor-menu-item-active-bg-color);color:var(--ngx-editor-menu-item-active-color)}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{all:unset;appearance:none;display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:"";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;width:100%;top:calc(var(--ngx-editor-menubar-height) + 2px);display:flex;flex-direction:column}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{all:unset;appearance:none;padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:var(--ngx-editor-menu-item-active-color);background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__Popup{position:absolute;top:calc(var(--ngx-editor-menubar-height) + 2px);box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid var(--ngx-editor-seperator-color);margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:var(--ngx-editor-error-color)}
`],encapsulation:2})}return n})(),On=(()=>{class n{editor;customMenuRefChange=new Oe;setCustomMenuRef(e){this.customMenuRefChange.next(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bt=class{name;constructor(t){this.name=t}apply(){return(t,e)=>{let{schema:i}=t,r=i.marks[this.name];return r?Wd(r)(t,e):!1}}toggle(){return(t,e)=>{let{schema:i}=t,r=i.marks[this.name];return r?Ci(r)(t,e):!1}}isActive(t){let{schema:e}=t,i=e.marks[this.name];return i?pl(t,i):!1}canExecute(t){return this.toggle()(t)}},Xd=class{toggle(){return(t,e)=>{let{schema:i}=t,r=i.nodes.blockquote;return r?this.isActive(t)?my(t,e):_y(r)(t,e):!1}}isActive(t){let{schema:e}=t,i=e.nodes.blockquote;return i?Ud(t,i):!1}canExecute(t){return this.toggle()(t)}},eh=class{insert(){return(t,e)=>{let{schema:i,tr:r}=t,s=i.nodes.horizontal_rule;return s?(e(r.replaceSelectionWith(s.create()).scrollIntoView()),!0):!1}}canExecute(t){return ky(t,t.schema.nodes.horizontal_rule)}},Ar=class{isBulletList=!1;constructor(t=!1){this.isBulletList=t}getType(t){return this.isBulletList?t.nodes.bullet_list:t.nodes.ordered_list}toggle(){return(t,e)=>{let{schema:i}=t,r=this.getType(i);return r?this.isActive(t)?Rd(i.nodes.list_item)(t,e):uy(r)(t,e):!1}}isActive(t){let{schema:e}=t,i=this.getType(e);return i?Ud(t,i):!1}canExecute(t){return this.toggle()(t)}},ln=class{level;constructor(t){this.level=t}apply(){return(t,e)=>{let{schema:i}=t,r=i.nodes.heading;return r?hl(r)(t,e):!1}}toggle(){return(t,e)=>{let{schema:i,selection:r,doc:s}=t,o=i.nodes.heading;if(!o)return!1;let a=r.$from.before(1),c=s.nodeAt(a)?.attrs??{};return this.isActive(t)?hl(i.nodes.paragraph,c)(t,e):hl(o,$(D({},c),{level:this.level}))(t,e)}}isActive(t){let{schema:e}=t,i=Hd(t),r=e.nodes.heading;if(!r)return!1;let s=[r,e.nodes.text,e.nodes.blockquote];return!!i.filter(l=>s.includes(l.type)).find(l=>l.attrs.level===this.level)}canExecute(t){return this.toggle()(t)}},xi=class{align;constructor(t){this.align=t}toggle(){return(t,e)=>{let{doc:i,selection:r,tr:s,schema:o}=t,{from:a,to:l}=r,c=!1;return i.nodesBetween(a,l,(u,d)=>{let h=u.type;if([o.nodes.paragraph,o.nodes.heading].includes(h)){c=!0;let f=u.attrs.align===this.align?null:this.align;s.setNodeMarkup(d,h,$(D({},u.attrs),{align:f}))}return!0}),c?(s.docChanged&&e?.(s),!0):!1}}isActive(t){return!!Hd(t).find(r=>r.attrs.align===this.align)}canExecute(t){return this.toggle()(t)}},Yx={strict:!0},th=class{update(t){return(e,i)=>{let{schema:r,selection:s}=e,o=r.marks.link;return!o||s.empty?!1:Ci(o,t)(e,i)}}insert(t,e){return(i,r)=>{let{schema:s,tr:o}=i;if(!s.marks.link)return!1;let l={href:e.href,title:e.title??t,target:e.target??"_blank"},c=s.text(t,[s.marks.link.create(l)]);return o.replaceSelectionWith(c,!1).scrollIntoView(),o.docChanged?(r?.(o),!0):!1}}isActive(t,e=Yx){if(e.strict)return!0;let{schema:i}=t,r=i.marks.link;return r?pl(t,r):!1}remove(t,e){return Ay()(t,e)}canExecute(t){let e={href:""};return this.insert("Exec",e)(t)||this.update(e)(t)}},Zy=class{insert(t,e){return(i,r)=>{let{schema:s,tr:o,selection:a}=i,l=s.nodes.image;if(!l)return!1;let c=D({width:null,src:t},e);!c.width&&a instanceof A&&a.node.type===l&&(c.width=a.node.attrs.width),o.replaceSelectionWith(l.createAndFill(c));let u=o.doc.resolve(o.selection.anchor-o.selection.$anchor.nodeBefore.nodeSize);return o.setSelection(new A(u)).scrollIntoView(),o.docChanged?(r?.(o),!0):!1}}isActive(t){let{selection:e}=t;return e instanceof A?e.node.type.name==="image":!1}},kr=class{name;attrName;constructor(t,e="color"){this.name=t,this.attrName=e}apply(t){return(e,i)=>{let{schema:r,selection:s,doc:o}=e,a=r.marks[this.name];if(!a)return!1;let{from:l,to:c,empty:u}=s;if(!u&&l+1===c){let d=o.nodeAt(l);if(d?.isAtom&&!d.isText&&d.isLeaf)return!1}return Wd(a,t)(e,i)}}isActive(t){let{schema:e}=t,i=e.marks[this.name];return i?pl(t,i):!1}getActiveColors(t){if(!this.isActive(t))return[];let{schema:e}=t;return My(t).filter(s=>s.type===e.marks[this.name]).map(s=>s.attrs[this.attrName]).filter(Boolean)}remove(){return(t,e)=>{let{schema:i}=t,r=i.marks[this.name];return r?Oy(r)(t,e):!1}}canExecute(t){let e=this.name==="text_color"?{color:""}:{backgroundColor:""};return this.apply(e)(t)}},Zx=["link"],nh=class{insert(){return(t,e)=>{let{tr:i}=t,{ranges:r,empty:s}=i.selection;return s||(Object.entries(t.schema.marks).forEach(([o,a])=>{Zx.includes(o)||r.forEach(l=>{i.removeMark(l.$from.pos,l.$to.pos,a)})}),e(i)),!0}}canExecute(){return!0}},Qx=["paragraph","heading","blockquote"],Fy=0,Ly=10,Xx=(n,t,e)=>{let i=n.doc.nodeAt(t);if(!i)return!1;let r=i.attrs.indent??0,s=im(r+(e==="increase"?1:-1),Fy,Ly);if(s===r||s<Fy||s>Ly)return!1;let o=$(D({},i.attrs),{indent:s});return n.setNodeMarkup(t,i.type,o),!0},Or=class{method="increase";constructor(t){this.method=t}insert(){return(t,e)=>{let{tr:i,doc:r}=t,{from:s,to:o}=i.selection,a=!1;return r.nodesBetween(s,o,(l,c)=>{let u=l.type;return Qx.includes(u.name)?(a=Xx(i,c,this.method),!1):!l.type.name.includes("list")}),a?(i.docChanged&&e?.(i),!0):!1}}canExecute(t){return this.insert()(t)}},Cl=class{mode="undo";constructor(t){this.mode=t}insert(){return(t,e)=>this.mode==="undo"?vl(t,e):lo(t,e)}canExecute(t){return this.insert()(t)}},eE=new Bt("strong"),tE=new Bt("em"),nE=new Bt("code"),iE=new Bt("u"),rE=new Bt("s"),sE=new Xd,oE=new eh,aE=new nh,lE=new Ar(!0),cE=new Ar(!1),uE=new ln(1),dE=new ln(2),hE=new ln(3),fE=new ln(4),pE=new ln(5),gE=new ln(6),mE=new xi("left"),yE=new xi("center"),vE=new xi("right"),_E=new xi("justify"),bE=new th,wE=new Zy,CE=new kr("text_color","color"),DE=new kr("text_background_color","backgroundColor"),SE=new Or("increase"),xE=new Or("decrease"),EE=new Bt("sup"),ME=new Bt("sub"),kE=new Cl("undo"),AE=new Cl("redo"),Dl={bold:eE,italic:tE,code:nE,underline:iE,strike:rE,blockquote:sE,bullet_list:lE,ordered_list:cE,h1:uE,h2:dE,h3:hE,h4:fE,h5:pE,h6:gE,align_left:mE,align_center:yE,align_right:vE,align_justify:_E,superscript:EE,subscript:ME},Vy={horizontal_rule:oE,format_clear:aE,indent:SE,outdent:xE,undo:kE,redo:AE},uo=bE,By=wE,OE=CE,IE=DE,ih={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",indent:"Increase Indent",outdent:"Decrease Indent",superscript:"Superscript",subscript:"Subscript",undo:"Undo",redo:"Redo",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove",enterValidUrl:"Please enter a valid URL"},rh=class{locals=ih;constructor(t={}){this.locals=D(D({},ih),t)}get=t=>{let e=this.locals[t];return e?go(e)?e:I(e):I("")}},TE=`
  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />
`,RE=`
  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />
`,NE=`
<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
`,PE=`
<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>
`,FE=`
<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>
`,LE=`
<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>
`,VE=`
<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>
`,BE=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>
`,$E=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
`,jE=`
<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>
`,zE=`
<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
`,UE=`
<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>
`,HE=`
<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>
`,GE=`
<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>
`,qE=`
<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>
`,WE=`
<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>
`,KE=`
<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>
`,JE=`
  <g>
    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>
    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>
  </g>
`,YE=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>
`,ZE='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',QE='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',XE='<g><rect fill="none" height="20" width="20"/><path d="M17,6l-1,0v1h2v1l-3,0V6c0-0.55,0.45-1,1-1l1,0l0-1h-2V3l2,0c0.55,0,1,0.45,1,1v1C18,5.55,17.55,6,17,6z M5.63,16h1.9 l2.43-3.87h0.08L12.47,16h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,6h-1.9l3.09,4.8L5.63,16z"/></g>',eM='<g><rect fill="none" height="20" width="20"/><path d="M17,15l-1,0v1h2v1h-3v-2c0-0.55,0.45-1,1-1l1,0l0-1h-2v-1l2,0c0.55,0,1,0.45,1,1v1C18,14.55,17.55,15,17,15z M5.63,14h1.9 l2.43-3.87h0.08L12.47,14h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,4h-1.9l3.09,4.8L5.63,14z"/></g>',tM='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/>',nM='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/>',iM=20,rM=20,sM="currentColor",Qy={bold:TE,italic:RE,code:NE,underline:PE,strike:FE,ordered_list:LE,bullet_list:VE,blockquote:BE,link:$E,unlink:jE,image:zE,align_left:UE,align_center:HE,align_right:GE,align_justify:qE,text_color:WE,color_fill:KE,horizontal_rule:JE,format_clear:YE,indent:ZE,outdent:QE,superscript:XE,subscript:eM,undo:tM,redo:nM,path:"<path></path>"},sh=class{static get(t,e=sM){let i=Qy[t];return i&&(i.includes("<path")||i.includes("<g"))?`
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill=${e}
          height=${iM}
          width=${rM}
        >
          ${i}
        </svg>
      `:i}},oh=(()=>{class n{locals={};icons={};static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mi=(()=>{class n{config;constructor(e){this.config=e}get locals(){return new rh(this.config.locals)}getIcon(e){return this.config.icons[e]?this.config.icons[e]:sh.get(e)}static \u0275fac=function(i){return new(i||n)(H(oh,8))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$y=n=>({locals:n.locals??{},icons:n.icons??{}}),Ir=(()=>{class n{sanitizer;constructor(e){this.sanitizer=e}transform(e){return Wy(e)?e:this.sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(i){return new(i||n)(w(Hr,16))};static \u0275pipe=Ii({name:"sanitizeHtml",type:n,pure:!0})}return n})(),oM=(()=>{class n{ngxeService;menuService;toolbarItem;get name(){return this.toolbarItem}html;editorView;isActive=!1;disabled=!1;updateSubscription;constructor(e,i){this.ngxeService=e,this.menuService=i}toggle(){let{state:e,dispatch:i}=this.editorView;Dl[this.name].toggle()(e,i)}onMouseClick(e){e.preventDefault(),e.button===0&&this.toggle()}onKeydown(){this.toggle()}update=e=>{let{state:i}=e,r=Dl[this.name];this.isActive=r.isActive(i),this.disabled=!r.canExecute(i)};getTitle(e){return this.ngxeService.locals.get(e)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)(w(Mi),w(On))};static \u0275cmp=re({type:n,selectors:[["ngx-toggle-command"]],inputs:{toolbarItem:"toolbarItem"},decls:4,vars:14,consts:[["type","button",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"]],template:function(i,r){i&1&&(v(0,"button",0),j(1,"sanitizeHtml"),j(2,"async"),j(3,"async"),R("mousedown",function(o){return r.onMouseClick(o)})("keydown.enter",function(){return r.onKeydown()})("keydown.space",function(){return r.onKeydown()}),_()),i&2&&(Et("NgxEditor__MenuItem--Active",r.isActive)("NgxEditor--Disabled",r.disabled),E("disabled",r.disabled)("innerHTML",U(1,8,r.html),St)("title",U(2,10,r.getTitle(r.name)))("ariaLabel",U(3,12,r.getTitle(r.name))))},dependencies:[$n,Ir]})}return n})(),aM=(()=>{class n{ngxeService;menuService;toolbarItem;get name(){return this.toolbarItem}html;editorView;disabled=!1;updateSubscription;constructor(e,i){this.ngxeService=e,this.menuService=i}onMouseClick(e){e.preventDefault(),e.button===0&&this.insert()}onKeydown(){this.insert()}insert(){let{state:e,dispatch:i}=this.editorView;Vy[this.name].insert()(e,i)}update=e=>{let{state:i}=e,r=Vy[this.name];this.disabled=!r.canExecute(i)};getTitle(e){return this.ngxeService.locals.get(e)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)(w(Mi),w(On))};static \u0275cmp=re({type:n,selectors:[["ngx-insert-command"]],inputs:{toolbarItem:"toolbarItem"},decls:4,vars:12,consts:[[1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"]],template:function(i,r){i&1&&(v(0,"button",0),j(1,"sanitizeHtml"),j(2,"async"),j(3,"async"),R("mousedown",function(o){return r.onMouseClick(o)})("keydown.enter",function(){return r.onKeydown()})("keydown.space",function(){return r.onKeydown()}),_()),i&2&&(Et("NgxEditor--Disabled",r.disabled),E("disabled",r.disabled)("innerHTML",U(1,6,r.html),St)("title",U(2,8,r.getTitle(r.name)))("ariaLabel",U(3,10,r.getTitle(r.name))))},dependencies:[$n,Ir]})}return n})(),jy={showOpenInNewTab:!0},lM=(()=>{class n{el;ngxeService;menuService;options=jy;showPopup=!1;isActive=!1;canExecute=!0;componentId=Fu();form;editorView;updateSubscription;constructor(e,i,r){this.el=e,this.ngxeService=i,this.menuService=r}get icon(){return this.ngxeService.getIcon(this.isActive?"unlink":"link")}get title(){return this.ngxeService.locals.get(this.isActive?"removeLink":"insertLink")}get href(){return this.form.get("href")}get text(){return this.form.get("text")}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hidePopup()}getId(e){return`${e}-${this.componentId}`}getLabel(e){return this.ngxeService.locals.get(e)}hidePopup(){this.showPopup=!1,this.form.reset({href:"",text:"",openInNewTab:!0}),this.text.enable()}togglePopup(){let{state:e,dispatch:i}=this.editorView;if(this.isActive){uo.remove(e,i);return}this.showPopup=!this.showPopup,this.showPopup&&this.setText()}onTogglePopupMouseClick(e){e.button===0&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}setText=()=>{let{state:{selection:e,doc:i}}=this.editorView,{empty:r,from:s,to:o}=e,a=r?"":i.textBetween(s,o);a&&(this.text.patchValue(a),this.text.disable())};update=e=>{let{state:i}=e;this.isActive=uo.isActive(i,{strict:!1}),this.canExecute=uo.canExecute(i)};insertLink(e){e.preventDefault();let{text:i,href:r,openInNewTab:s}=this.form.getRawValue(),{dispatch:o,state:a}=this.editorView,{selection:l}=a,c;this.options.showOpenInNewTab&&(c=s?"_blank":"_self");let u={title:r,href:r,target:c};l.empty?(uo.insert(i,u)(a,o),this.editorView.focus()):uo.update(u)(a,o),this.hidePopup()}ngOnInit(){this.editorView=this.menuService.editor.view,this.form=new ii({href:new bt("",[_n.required,_n.pattern(this.menuService.editor.linkValidationPattern)]),text:new bt("",[_n.required]),openInNewTab:new bt(!0)}),this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)(w(Ie),w(Mi),w(On))};static \u0275cmp=re({type:n,selectors:[["ngx-link"]],hostBindings:function(i,r){i&1&&R("mousedown",function(o){return r.onDocumentClick(o)},!1,Fn)},inputs:{options:[2,"options","options",e=>D(D({},jy),e)]},features:[Fr],decls:5,vars:16,consts:[["type","button","aria-haspopup","dialog",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel","ariaExpanded"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"ngSubmit","formGroup"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label",3,"htmlFor"],["type","url","formControlName","href","autocomplete","off",3,"id"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","text","autocomplete","off",3,"id"],["class","NgxEditor__Popup--FormGroup",4,"ngIf"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"],["type","checkbox","formControlName","openInNewTab"]],template:function(i,r){i&1&&(v(0,"button",0),j(1,"sanitizeHtml"),j(2,"async"),j(3,"async"),R("mousedown",function(o){return r.onTogglePopupMouseClick(o)})("keydown.enter",function(){return r.onTogglePopupKeydown()})("keydown.space",function(){return r.onTogglePopupKeydown()}),_(),ne(4,px,20,18,"div",1)),i&2&&(Et("NgxEditor__MenuItem--Active",r.isActive||r.showPopup)("NgxEditor--Disabled",!r.canExecute),E("disabled",!r.canExecute)("innerHTML",U(1,10,r.icon),St)("title",U(2,12,r.title))("ariaLabel",U(3,14,r.title))("ariaExpanded",r.showPopup),S(4),E("ngIf",r.showPopup))},dependencies:[Bn,$s,ri,Iu,Vs,Bs,hr,fr,$n,Ir]})}return n})(),cM=(()=>{class n{ngxeService;menuService;el;editorView;updateSubscription;group;items;isDropdownOpen=!1;disabledItems=[];activeItem;constructor(e,i,r){this.ngxeService=e,this.menuService=i,this.el=r}get isSelected(){return!!(this.activeItem||this.isDropdownOpen)}get isDropdownDisabled(){return this.disabledItems.length===this.items.length}onDocumentClick(e){!this.el.nativeElement.contains(e)&&this.isDropdownOpen&&(this.isDropdownOpen=!1)}getName(e){return this.ngxeService.locals.get(e)}getIsDropdownActive(e){return this.activeItem===e}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}onToggleDropdownMouseClick(e){e.preventDefault(),e.button===0&&this.toggleDropdown()}onToggleDropdownKeydown(){this.toggleDropdown()}trackByIndex(e){return e}selectItem(e){let i=Dl[e],{state:r,dispatch:s}=this.editorView;i.toggle()(r,s),this.isDropdownOpen=!1}onDropdownItemMouseClick(e,i){e.preventDefault(),e.button===0&&this.selectItem(i)}onDropdownItemKeydown(e,i){e.preventDefault(),this.selectItem(i)}update=e=>{let{state:i}=e;this.disabledItems=[];let r=[];this.items.forEach(s=>{let o=Dl[s];o.isActive(i)&&r.push(s),o.canExecute(i)||this.disabledItems.push(s)}),r.length===1?[this.activeItem]=r:this.activeItem=null};ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)(w(Mi),w(On),w(Ie))};static \u0275cmp=re({type:n,selectors:[["ngx-dropdown"]],hostBindings:function(i,r){i&1&&R("mousedown",function(o){return r.onDocumentClick(o.target)},!1,Fn)},inputs:{group:"group",items:"items"},decls:5,vars:13,consts:[["type","button","aria-haspopup","listbox",1,"NgxEditor__Dropdown--Text",3,"mousedown","keydown.enter","keydown.space","disabled","ariaLabel","ariaExpanded"],["class","NgxEditor__Dropdown--DropdownMenu","role","listbox",4,"ngIf"],["role","listbox",1,"NgxEditor__Dropdown--DropdownMenu"],["type","button","class","NgxEditor__Dropdown--Item","role","option",3,"ngClass","ariaLabel","mousedown","keydown.enter","keydown.space",4,"ngFor","ngForOf","ngForTrackBy"],["type","button","role","option",1,"NgxEditor__Dropdown--Item",3,"mousedown","keydown.enter","keydown.space","ngClass","ariaLabel"]],template:function(i,r){i&1&&(v(0,"button",0),j(1,"async"),R("mousedown",function(o){return r.onToggleDropdownMouseClick(o)})("keydown.enter",function(){return r.onToggleDropdownKeydown()})("keydown.space",function(){return r.onToggleDropdownKeydown()}),k(2),j(3,"async"),_(),ne(4,yx,2,2,"div",1)),i&2&&(Et("NgxEditor__Dropdown--Selected",r.isSelected)("NgxEditor--Disabled",r.isDropdownDisabled),E("disabled",r.isDropdownDisabled)("ariaLabel",U(1,9,r.getName(r.activeItem||r.group)))("ariaExpanded",r.isDropdownOpen),S(2),tt(" ",U(3,11,r.getName(r.activeItem||r.group)),`
`),S(2),E("ngIf",r.isDropdownOpen))},dependencies:[$r,Ro,Bn,$n]})}return n})(),uM=(()=>{class n{el;ngxeService;menuService;showPopup=!1;isActive=!1;componentId=Fu();updateSubscription;form=new ii({src:new bt("",[_n.required,_n.pattern(`(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#
\r]*)?#?([^
\r]*)`)]),alt:new bt(""),title:new bt("")});editorView;constructor(e,i,r){this.el=e,this.ngxeService=i,this.menuService=r}get icon(){return this.ngxeService.getIcon("image")}get src(){return this.form.get("src")}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hideForm()}getId(e){return`${e}-${this.componentId}`}getLabel(e){return this.ngxeService.locals.get(e)}hideForm(){this.showPopup=!1,this.form.reset({src:"",alt:"",title:""})}togglePopup(){this.showPopup=!this.showPopup,this.showPopup&&this.fillForm()}onTogglePopupMouseClick(e){e.button===0&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}fillForm(){let{state:e}=this.editorView,{selection:i}=e;if(i instanceof A&&this.isActive){let{src:r,alt:s="",title:o=""}=i.node.attrs;this.form.setValue({src:r,alt:s,title:o})}}update=e=>{let{state:i}=e;this.isActive=By.isActive(i)};insertLink(e){e.preventDefault();let{src:i,alt:r,title:s}=this.form.getRawValue(),{dispatch:o,state:a}=this.editorView,l={alt:r,title:s};By.insert(i,l)(a,o),this.editorView.focus(),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)(w(Ie),w(Mi),w(On))};static \u0275cmp=re({type:n,selectors:[["ngx-image"]],hostBindings:function(i,r){i&1&&R("mousedown",function(o){return r.onDocumentClick(o)},!1,Fn)},decls:5,vars:13,consts:[["type","button","aria-haspopup","dialog",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","innerHTML","title","ariaLabel","ariaExpanded"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"ngSubmit","formGroup"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label",3,"htmlFor"],["type","url","formControlName","src","autocomplete","off",3,"id"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","alt","autocomplete","off",3,"id"],["type","text","formControlName","title","autocomplete","off",3,"id"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(i,r){i&1&&(v(0,"button",0),j(1,"sanitizeHtml"),j(2,"async"),j(3,"async"),R("mousedown",function(o){return r.onTogglePopupMouseClick(o)})("keydown.enter",function(){return r.onTogglePopupKeydown()})("keydown.space",function(){return r.onTogglePopupKeydown()}),_(),ne(4,_x,24,21,"div",1)),i&2&&(Et("NgxEditor__MenuItem--Active",r.isActive||r.showPopup),E("innerHTML",U(1,7,r.icon),St)("title",U(2,9,r.getLabel("insertImage")))("ariaLabel",U(3,11,r.getLabel("insertImage")))("ariaExpanded",r.showPopup),S(4),E("ngIf",r.showPopup))},dependencies:[Bn,$s,ri,Vs,Bs,hr,fr,$n,Ir]})}return n})(),dM=(()=>{class n{el;menuService;ngxeService;presets;type;constructor(e,i,r){this.el=e,this.menuService=i,this.ngxeService=r}get title(){return this.getLabel(this.type==="text_color"?"text_color":"background_color")}get icon(){return this.ngxeService.getIcon(this.type==="text_color"?"text_color":"color_fill")}get command(){return this.type==="text_color"?OE:IE}updateSubscription;editorView;showPopup=!1;isActive=!1;activeColors=[];canExecute=!0;getContrastYIQ(e){let i=e.replace("#",""),r=parseInt(i.substring(0,2),16),s=parseInt(i.substring(2,4),16),o=parseInt(i.substring(4,6),16);return(r*299+s*587+o*114)/1e3>=128?"black":"white"}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hidePopup()}hidePopup(){this.showPopup=!1}togglePopup(){this.showPopup=!this.showPopup}onTogglePopupMouseClick(e){e.preventDefault(),e.button===0&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}remove(){let{state:e,dispatch:i}=this.editorView;this.command.remove()(e,i),this.hidePopup()}onRemoveMouseClick(e){e.preventDefault(),e.button===0&&(e.preventDefault(),this.remove())}onRemoveKeydown(){this.remove()}trackByIndex(e){return e}selectColor(e){let{state:i,dispatch:r}=this.editorView;if(this.type==="text_color"){let s={color:e};this.command.apply(s)(i,r)}else{let s={backgroundColor:e};this.command.apply(s)(i,r)}this.editorView.hasFocus()||this.editorView.focus(),this.hidePopup()}onColorSelectMouseClick(e,i){e.preventDefault(),e.button===0&&this.selectColor(i)}onColorSelectKeydown(e){this.selectColor(e)}update=e=>{let{state:i}=e;this.canExecute=this.command.canExecute(i),this.isActive=this.command.isActive(i),this.activeColors=[],this.isActive&&(this.activeColors=this.command.getActiveColors(i))};getLabel(e){return this.ngxeService.locals.get(e)}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)(w(Ie),w(On),w(Mi))};static \u0275cmp=re({type:n,selectors:[["ngx-color-picker"]],hostBindings:function(i,r){i&1&&R("mousedown",function(o){return r.onDocumentClick(o)},!1,Fn)},inputs:{presets:"presets",type:"type"},decls:5,vars:15,consts:[["type","button",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],["class","NgxEditor__ColorContainer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__MenuItem--Button",3,"mousedown","keydown.enter","keydown.space","disabled"],[1,"NgxEditor__ColorContainer"],["class","NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown","keydown.enter","keydown.space",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Color",3,"mousedown","keydown.enter","keydown.space","ngStyle","title","ngClass"]],template:function(i,r){i&1&&(v(0,"button",0),j(1,"sanitizeHtml"),j(2,"async"),j(3,"async"),R("mousedown",function(o){return r.onTogglePopupMouseClick(o)})("keydown.enter",function(){return r.onTogglePopupKeydown()})("keydown.space",function(){return r.onTogglePopupKeydown()}),_(),ne(4,Sx,5,6,"div",1)),i&2&&(Et("NgxEditor__MenuItem--Active",r.isActive||r.showPopup)("NgxEditor--Disabled",!r.canExecute),E("disabled",!r.canExecute)("innerHTML",U(1,9,r.icon),St)("title",U(2,11,r.title))("ariaLabel",U(3,13,r.title)),S(4),E("ngIf",r.showPopup))},dependencies:[$r,Ro,Bn,Df,$n,Ir],styles:['@charset "UTF-8";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color[_ngcontent-%COMP%]:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color);outline-offset:1px}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:"\\2714";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}']})}return n})();var hM=[["bold","italic"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"]];var fM=["#b60205","#d93f0b","#fbca04","#0e8a16","#006b75","#1d76db","#0052cc","#5319e7","#e99695","#f9d0c4","#fef2c0","#c2e0c6","#bfdadc","#c5def5","#bfd4f2","#d4c5f9"],Xy=(()=>{class n{menuService;toolbar=hM;colorPresets=fM;disabled=!1;editor;customMenuRef=null;dropdownPlacement="bottom";toggleCommands=["bold","italic","underline","strike","code","blockquote","ordered_list","bullet_list","align_left","align_center","align_right","align_justify","superscript","subscript"];insertCommands=["horizontal_rule","format_clear","indent","outdent","undo","redo"];iconContainerClass=["NgxEditor__MenuItem","NgxEditor__MenuItem--IconContainer"];dropdownContainerClass=["NgxEditor__Dropdown"];seperatorClass=["NgxEditor__Seperator"];constructor(e){this.menuService=e}get presets(){let i=[];return this.colorPresets.forEach((r,s)=>{let o=Math.floor(s/8);i[o]||i.push([]),i[o].push(r)}),i}trackByIndex(e){return e}isDropDown(e){return!!e?.heading}getDropdownItems(e){return e}isLinkItem(e){return e==="link"?!0:typeof e=="object"&&typeof e?.link=="object"}isLinkWithOptions(e){return typeof e=="object"&&typeof e?.link=="object"}getLinkOptions(e){return e?.link}ngOnInit(){if(!this.editor)throw new pr("Required editor instance to initialize menu component");this.menuService.editor=this.editor}static \u0275fac=function(i){return new(i||n)(w(On))};static \u0275cmp=re({type:n,selectors:[["ngx-editor-menu"]],inputs:{toolbar:"toolbar",colorPresets:"colorPresets",disabled:"disabled",editor:"editor",customMenuRef:"customMenuRef",dropdownPlacement:"dropdownPlacement"},features:[kt([On])],decls:3,vars:7,consts:[[1,"NgxEditor__MenuBar",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"toolbarItem","class",4,"ngIf"],[3,"class",4,"ngIf"],["type","text_color",3,"class","presets",4,"ngIf"],["type","background_color",3,"class","presets",4,"ngIf"],[3,"toolbarItem"],[3,"options"],[3,"class","group","items",4,"ngFor","ngForOf","ngForTrackBy"],[3,"group","items"],["type","text_color",3,"presets"],["type","background_color",3,"presets"],[3,"ngTemplateOutlet"]],template:function(i,r){i&1&&(v(0,"div",0),ne(1,Fx,2,2,"ng-container",1)(2,Lx,2,1,"ng-container",2),_()),i&2&&(E("ngClass",_o(4,xx,r.disabled,r.dropdownPlacement==="top")),S(),E("ngForOf",r.toolbar)("ngForTrackBy",r.trackByIndex),S(),E("ngIf",r.customMenuRef))},dependencies:[$r,Ro,Bn,Sf,oM,aM,lM,cM,uM,dM,Mf]})}return n})();var pM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ht({type:n});static \u0275inj=dt({providers:[Ir],imports:[No,Pa]})}return n})(),wl=new te("NgxEditorConfig"),zy={locals:ih,icons:Qy},El=(()=>{class n{static forRoot(e=zy){return{ngModule:n,providers:[{provide:wl,useValue:e},{provide:oh,useFactory:$y,deps:[wl]}]}}static forChild(e=zy){return{ngModule:n,providers:[{provide:wl,useValue:e},{provide:oh,useFactory:$y,deps:[wl]},Mi]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ht({type:n});static \u0275inj=dt({imports:[No,pM]})}return n})(),gM=n=>n===null||n.length===0,Uy=n=>n!==null&&typeof n.length=="number",mM=n=>{if(!n)return!0;let{childCount:t,firstChild:e}=n;return!!(t===1&&e?.isTextblock&&e.content.size===0)},Sl=class{static required(t){return e=>{let i=t||An,r=ho(e.value,i);return mM(r)?{required:!0}:null}}static maxLength(t,e){return i=>{let r=e||An,o=ho(i.value,r).textContent;return Uy(o)&&o.length>t?{maxlength:{requiredLength:t,actualLength:o.length}}:null}}static minLength(t,e){return i=>{let r=e||An,o=ho(i.value,r).textContent;return gM(o)||!Uy(o)?null:o.length<t?{minlength:{requiredLength:t,actualLength:o.length}}:null}}},$e=(n,t=!1)=>(e,i)=>{let r=new Bt(n);return t?r.toggle()(e,i):r.apply()(e,i)},ah=class{view;state;tr;constructor(t){if(!t)throw new pr("Required view to initialize commands.");this.view=t,this.state=t.state,this.tr=this.view.state.tr}applyTrx=t=>{this.state=this.state.apply(t??this.tr),this.tr=this.state.tr,this.tr.setMeta("APPLIED_TRX",!0)};dispatch=t=>{this.applyTrx(t)};exec(){if(!this.tr.getMeta("APPLIED_TRX"))return!1;let t=!this.view.state.doc.eq(this.state.doc);this.view.updateState(this.state);let e=this.tr.setMeta("FORCE_EMIT",t);return this.view.dispatch(e),!0}focus(t="end"){let e=t==="start"?F.atStart(this.state.doc):F.atEnd(this.state.doc);return this.tr.setSelection(e),this.applyTrx(),this.view.focus(),this}scrollIntoView(){return this.tr.scrollIntoView(),this.applyTrx(),this}insertText(t){return this.tr.insertText(t),this.applyTrx(),this}insertNewLine(){return Mr(...[Fd,Bd,$d,jd])(this.state,this.dispatch),this}applyMark(t){return $e(t,!1)(this.state,this.dispatch),this}toggleMark(t){return $e(t,!0)(this.state,this.dispatch),this}bold(){return $e("strong")(this.state,this.dispatch),this}toggleBold(){return $e("strong",!0)(this.state,this.dispatch),this}italics(){return $e("em")(this.state,this.dispatch),this}toggleItalics(){return $e("em",!0)(this.state,this.dispatch),this}underline(){return $e("u")(this.state,this.dispatch),this}toggleUnderline(){return $e("u",!0)(this.state,this.dispatch),this}strike(){return $e("s")(this.state,this.dispatch),this}toggleStrike(){return $e("s",!0)(this.state,this.dispatch),this}code(){return $e("code")(this.state,this.dispatch),this}toggleCode(){return $e("code",!0)(this.state,this.dispatch),this}superscript(){return $e("sup")(this.state,this.dispatch),this}subscript(){return $e("sub")(this.state,this.dispatch),this}toggleOrderedList(){return new Ar(!1).toggle()(this.state,this.dispatch),this}toggleBulletList(){return new Ar(!0).toggle()(this.state,this.dispatch),this}toggleHeading(t){return new ln(t).toggle()(this.state,this.dispatch),this}insertLink(t,e){return new th().insert(t,e)(this.state,this.dispatch),this}updateLink(t){return new th().update(t)(this.state,this.dispatch),this}insertImage(t,e={}){return new Zy().insert(t,e)(this.state,this.dispatch),this}textColor(t){return new kr("text_color").apply({color:t})(this.state,this.dispatch),this}backgroundColor(t){return new kr("text_background_color").apply({backgroundColor:t})(this.state,this.dispatch),this}removeTextColor(){return new kr("text_color").remove()(this.state,this.dispatch),this}removeBackgroundColor(){return new kr("text_background_color").remove()(this.state,this.dispatch),this}align(t){return new xi(t).toggle()(this.state,this.dispatch),this}insertHTML(t){let{selection:e,schema:i,tr:r}=this.state,{from:s,to:o}=e,a=document.createElement("div");a.innerHTML=qy(t)?t.trim():t;let l=wn.fromSchema(i).parseSlice(a),c=r.replaceRange(s,o,l);return this.applyTrx(c),this}indent(){return new Or("increase").insert()(this.state,this.dispatch),this}outdent(){return new Or("decrease").insert()(this.state,this.dispatch),this}},yM=typeof navigator<"u"?/Mac/.test(navigator.platform):!1,vM=n=>fl(/^\s*>\s$/,n),_M=n=>fl(/^(?:\d+)\.\s$/,n,t=>({order:Number(t[1])}),(t,e)=>e.childCount+e.attrs.order===Number(t[1])),bM=n=>fl(/^\s*(?:[-+*])\s$/,n),wM=n=>zd(/^```$/,n),CM=(n,t)=>zd(new RegExp(`^(#{1,${t}})\\s$`),n,e=>({level:e[1].length})),DM=n=>qd(/(?:^|\s)(?:(\*\*|__)(?:([^*_]+))(\*\*|__))$/,n),SM=n=>qd(/(?:^|\s)(?:(\*|_)(?:([^*_]+))(\*|_))$/,n),xM=n=>{let t=Ey.concat(xy,Sy);return t.push(DM(n.marks.strong)),t.push(SM(n.marks.em)),t.push(vM(n.nodes.blockquote)),t.push(_M(n.nodes.ordered_list)),t.push(bM(n.nodes.bullet_list)),t.push(wM(n.nodes.code_block)),t.push(CM(n.nodes.heading,6)),Dy({rules:t})},EM=(n,t)=>{let e={};e["Mod-z"]=vl,yM?e["Shift-Mod-z"]=lo:e["Mod-y"]=lo;let i=[co({"Mod-b":Ci(n.marks.strong),"Mod-i":Ci(n.marks.em),"Mod-u":Ci(n.marks.u),"Mod-`":Ci(n.marks.code)}),co({Enter:dy(n.nodes.list_item),"Shift-Enter":Mr(Vd,(r,s)=>{let{tr:o}=r,a=n.nodes.hard_break;return s(o.replaceSelectionWith(a.create()).scrollIntoView()),!0}),"Mod-[":Rd(n.nodes.list_item),"Mod-]":Nd(n.nodes.list_item),Tab:Nd(n.nodes.list_item)}),co(wy)];return t.history&&i.push(co(e)),i},MM=(n,t)=>{let e=[];return t.keyboardShortcuts&&e.push(...EM(n,{history:t.history})),t.history&&e.push(Ny()),t.inputRules&&e.push(xM(n)),e},ev={linkOnPaste:!0,resizeImage:!0},Hy={content:null,history:!0,keyboardShortcuts:!0,inputRules:!0,schema:An,plugins:[],nodeViews:{},attributes:{},features:ev,handleScrollToSelection:null,linkValidationPattern:`(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#
\r]*)?#?([^
\r]*)|(mailto:.*[@].*)`},xl=class{options;view;constructor(t=Hy){this.options=D(D({},Hy),t),this.createEditor()}valueChangesSubject=new Oe;updateSubject=new Oe;get valueChanges(){return this.valueChangesSubject.asObservable()}get update(){return this.updateSubject.asObservable()}get schema(){return this.options.schema||An}get linkValidationPattern(){return this.options.linkValidationPattern}get commands(){return new ah(this.view)}get features(){return D(D({},ev),this.options.features)}handleTransactions(t){let e=this.view.state.apply(t);if(this.view.updateState(e),this.updateSubject.next(this.view),!t.docChanged&&!t.getMeta("FORCE_EMIT"))return;let i=e.doc.toJSON();this.valueChangesSubject.next(i)}createEditor(){let{options:t,schema:e}=this,{content:i=null,nodeViews:r}=t,{history:s=!0,keyboardShortcuts:o=!0,inputRules:a=!0}=t,l=ho(i,e,t.parseOptions),c=t.plugins??[],u=t.attributes??{},d=MM(e,{history:s,keyboardShortcuts:o,inputRules:a});this.view=new cl(null,{state:Qa.create({doc:l,schema:e,plugins:[...d,...c]}),nodeViews:r,dispatchTransaction:this.handleTransactions.bind(this),attributes:u,handleScrollToSelection:t.handleScrollToSelection})}setContent(t){if(nm(t))return;let{state:e}=this.view,{tr:i,doc:r}=e,s=ho(t,this.schema,this.options.parseOptions);i.replaceWith(0,e.doc.content.size,s),!r.eq(i.doc)&&i.docChanged&&this.view.dispatch(i)}registerPlugin(t){let{state:e}=this.view,i=[...e.plugins,t],r=e.reconfigure({plugins:i});this.view.updateState(r)}destroy(){this.view.destroy()}};var AM=["container"],OM=()=>[import("./chunk-2PODHDET.js").then(n=>n.FooterComponent)];function IM(n,t){if(n&1&&(v(0,"div",2,0),O(2,"div",3),_(),O(3,"app-footer",4)),n&2){let e=M();S(2),E("innerHTML",e.nutritionGuide,St)}}function TM(n,t){n&1&&(v(0,"div",5)(1,"div",6)(2,"div")(3,"ul")(4,"li"),Dt(),v(5,"svg",7),O(6,"path",8),_()(),In(),v(7,"li"),Dt(),v(8,"svg",7),O(9,"path",8),_()(),In(),v(10,"li"),Dt(),v(11,"svg",7),O(12,"path",8),_()(),In(),v(13,"li"),Dt(),v(14,"svg",7),O(15,"path",8),_()(),In(),v(16,"li"),Dt(),v(17,"svg",7),O(18,"path",8),_()(),In(),v(19,"li"),Dt(),v(20,"svg",7),O(21,"path",8),_()()()(),In(),v(22,"span"),k(23,"L\xE4dt..."),_()()())}var Ml=class n{constructor(t,e){this.supabase=t;this.sanitizer=e}div;isAdmin=!1;nutritionGuide="";ngOnInit(){this.setAdmins(),this.supabase.getNutritionGuide().then(t=>{let e=Ei(JSON.parse(t));this.nutritionGuide=this.sanitizer.bypassSecurityTrustHtml(e),this.observeContainerLoading()})}observeContainerLoading(){new MutationObserver(()=>{if(this.div){let e=this.div.nativeElement;e.style.height="0px",e.style.overflow="hidden",e.style.transition="height 2s ease-in-out",setTimeout(()=>{this.expandToFullHeight(e,!0)},50),window.addEventListener("resize",()=>this.expandToFullHeight(e,!1))}}).observe(document.body,{childList:!0,subtree:!0})}expandToFullHeight(t,e){if(e){let i=t.scrollHeight;t.style.height=`${i}px`}else t.style.height="auto"}setAdmins(){this.supabase.getSession().subscribe(t=>{(t.data.session?.user.email==="edon_malushaj@hotmail.com"||t.data.session?.user.email==="xxnicerdicerxx@gmail.com"||t.data.session?.user.email==="natachan6@gmail.com")&&(this.isAdmin=!0)})}static \u0275fac=function(e){return new(e||n)(w(Ve),w(Hr))};static \u0275cmp=re({type:n,selectors:[["app-nutrition-guide"]],viewQuery:function(e,i){if(e&1&&Mt(AM,5),e&2){let r;pt(r=gt())&&(i.div=r.first)}},standalone:!0,features:[xe],decls:4,vars:1,consts:[["container",""],[1e3,null],[1,"container"],[3,"innerHTML"],[1,"footer"],[1,"wrapper"],[1,"loader"],["fill","currentColor","viewBox","0 0 90 120"],["d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"]],template:function(e,i){e&1&&(ne(0,IM,4,1)(1,TM,24,0),Vh(2,0,OM,1,null,null,1,null,Lh)),e&2&&(S(2),Bh(i.nutritionGuide))},dependencies:[El],styles:['h1[_ngcontent-%COMP%]{color:#07001c;margin-top:50px;font-size:44px;font-weight:bolder;text-align:center}h2[_ngcontent-%COMP%]{color:#07001c;font-size:24px;font-weight:300;text-align:center}.container[_ngcontent-%COMP%]{background-color:#fff;max-width:90vw;border-radius:5px;padding:10px 20px;margin:50px auto}.container[_ngcontent-%COMP%]     img{max-width:100%!important}.wrapper[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.loader[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #23C4F8, #275EFE);--shadow: rgba(39, 94, 254, .28);--text: #6C7486;--page: rgba(255, 255, 255, .36);--page-fold: rgba(255, 255, 255, .52);--duration: 3s;width:200px;height:140px;position:relative}.loader[_ngcontent-%COMP%]:before, .loader[_ngcontent-%COMP%]:after{--r: -6deg;content:"";position:absolute;bottom:8px;width:120px;top:80%;box-shadow:0 16px 12px var(--shadow);transform:rotate(var(--r))}.loader[_ngcontent-%COMP%]:before{left:4px}.loader[_ngcontent-%COMP%]:after{--r: 6deg;right:4px}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:13px;position:relative;z-index:1;perspective:600px;box-shadow:0 4px 6px var(--shadow);background-image:var(--background)}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none;position:relative}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{--r: 180deg;--o: 0;--c: var(--page);position:absolute;top:10px;left:10px;transform-origin:100% 50%;color:var(--c);opacity:var(--o);transform:rotateY(var(--r));-webkit-animation:var(--duration) ease infinite;animation:var(--duration) ease infinite}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){--c: var(--page-fold);-webkit-animation-name:_ngcontent-%COMP%_page-2;animation-name:_ngcontent-%COMP%_page-2}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){--c: var(--page-fold);-webkit-animation-name:_ngcontent-%COMP%_page-3;animation-name:_ngcontent-%COMP%_page-3}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4){--c: var(--page-fold);-webkit-animation-name:_ngcontent-%COMP%_page-4;animation-name:_ngcontent-%COMP%_page-4}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5){--c: var(--page-fold);-webkit-animation-name:_ngcontent-%COMP%_page-5;animation-name:_ngcontent-%COMP%_page-5}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:90px;height:120px;display:block}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{--r: 0deg;--o: 1}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{--o: 1}.loader[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;left:0;right:0;top:100%;margin-top:20px;text-align:center;color:var(--text)}@keyframes _ngcontent-%COMP%_page-2{0%{transform:rotateY(180deg);opacity:0}20%{opacity:1}35%,to{opacity:0}50%,to{transform:rotateY(0)}}@keyframes _ngcontent-%COMP%_page-3{15%{transform:rotateY(180deg);opacity:0}35%{opacity:1}50%,to{opacity:0}65%,to{transform:rotateY(0)}}@keyframes _ngcontent-%COMP%_page-4{30%{transform:rotateY(180deg);opacity:0}50%{opacity:1}65%,to{opacity:0}80%,to{transform:rotateY(0)}}@keyframes _ngcontent-%COMP%_page-5{45%{transform:rotateY(180deg);opacity:0}65%{opacity:1}80%,to{opacity:0}95%,to{transform:rotateY(0)}}']})};var kl=class n{constructor(t,e){this.supabaseService=t;this.router=e}isAdmin=!1;editor;nutritionGuide={description:"",editor:"",commit_message:""};form=new ii({editorContent:new bt("",Sl.required())});toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"]];ngOnInit(){this.supabaseService.getSession().subscribe(t=>{t.data.session?.user.email==="edon_malushaj@hotmail.com"||t.data.session?.user.email==="xxnicerdicerxx@gmail.com"||t.data.session?.user.email==="natachan6@gmail.com"?this.isAdmin=!0:this.router.navigate(["/"])}),this.editor=new xl({keyboardShortcuts:!0}),this.supabaseService.getNutritionGuide().then(t=>{this.editor.setContent(JSON.parse(t))})}ngOnDestroy(){this.editor.destroy()}saveChanges(){return m(this,null,function*(){if(this.isAdmin)try{this.nutritionGuide.description=this.editor.view.state.doc.toJSON(),yield this.supabaseService.postNutritionGuide(this.nutritionGuide),alert("Ern\xE4hrungsguide wurde erfolgreich aktualisiert!"),this.nutritionGuide.commit_message=""}catch(t){console.error("Error saving changes:",t),alert("Fehler beim Speichern der \xC4nderungen.")}else alert("Nicht autorisiert, um \xC4nderungen vorzunehmen!")})}toHTML=Ei;String=String;static \u0275fac=function(e){return new(e||n)(w(Ve),w(qe))};static \u0275cmp=re({type:n,selectors:[["app-edit"]],standalone:!0,features:[xe],decls:11,vars:6,consts:[[3,"formGroup"],[1,"NgxEditor__Wrapper"],[1,"menu",3,"editor","toolbar"],["formControlName","editorContent",3,"editor"],[1,"input-container"],["type","text","id","input","required","",3,"ngModelChange","ngModel"],["for","input",1,"label"],[1,"underline"],[1,"save",3,"click","disabled"]],template:function(e,i){e&1&&(v(0,"form",0)(1,"div",1),O(2,"ngx-editor-menu",2)(3,"ngx-editor",3),_()(),v(4,"div",4)(5,"input",5),Wh("ngModelChange",function(s){return qh(i.nutritionGuide.commit_message,s)||(i.nutritionGuide.commit_message=s),s}),_(),v(6,"label",6),k(7,"Commit Message"),_(),O(8,"div",7),_(),v(9,"button",8),R("click",function(){return i.saveChanges()}),k(10,` Speichern
`),_()),e&2&&(E("formGroup",i.form),S(2),E("editor",i.editor)("toolbar",i.toolbar),S(),E("editor",i.editor),S(2),Gh("ngModel",i.nutritionGuide.commit_message),S(4),E("disabled",i.nutritionGuide.commit_message===""))},dependencies:[El,Yy,Xy,Pa,$s,ri,Vs,Bs,Pu,hr,fr,em,Nu],styles:[".NgxEditor__Wrapper[_ngcontent-%COMP%]{width:96.5%;margin:20px auto auto}.NgxEditor__Wrapper[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{position:sticky;top:0;z-index:2}.NgxEditor__Wrapper[_ngcontent-%COMP%]     .NgxEditor__ImageWrapper{max-width:100%!important}h1[_ngcontent-%COMP%]{text-align:left!important;margin:20px 0}h2[_ngcontent-%COMP%]{text-align:left;margin:20px 0}.save[_ngcontent-%COMP%]{padding:10px 20px;background-color:#2cbb2c;color:#fff;border:2px solid #3bbd3b;border-radius:5px;cursor:pointer;display:block;transition:all .3s;margin:20px auto 50px}.save[_ngcontent-%COMP%]:hover{background-color:#47a847}.save[_ngcontent-%COMP%]:disabled{background-color:#ccc;border:2px solid #aaa;cursor:not-allowed}.input-container[_ngcontent-%COMP%]{position:relative;margin:50px auto;width:60vw}.input-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{font-size:20px;width:100%;border:none;border-bottom:2px solid #ccc;padding:5px 0;background-color:transparent;outline:none}.input-container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;color:#ccc;transition:all .3s ease;pointer-events:none}.input-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus ~ .label[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:valid ~ .label[_ngcontent-%COMP%]{top:-20px;font-size:16px;color:#333}.input-container[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;height:2px;width:100%;background-color:#333;transform:scaleX(0);transition:all .3s ease}.input-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus ~ .underline[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:valid ~ .underline[_ngcontent-%COMP%]{transform:scaleX(1)}"]})};var RM=(n,t)=>t.id;function NM(n,t){if(n&1){let e=Se();v(0,"p",1),R("click",function(){let r=Q(e).$implicit,s=M();return X(s.openCommit(r))}),v(1,"span")(2,"span",2)(3,"b",3),k(4,"Commit Message:"),_(),k(5),_(),O(6,"br"),v(7,"b"),k(8,"Datum:"),_(),k(9),j(10,"date"),O(11,"br"),v(12,"b"),k(13,"Editor:"),_(),k(14),O(15,"br"),_(),v(16,"span",4),k(17," \u2023 "),_()()}if(n&2){let e=t.$implicit;S(5),tt(" ",e.commit_message," "),S(4),tt(" ",Kh(10,3,e.created_at,"dd.MM.yyyy HH:mm"),""),S(5),tt(" ",e.editor,"")}}var Al=class n{constructor(t,e){this.supabaseService=t;this.router=e}isAdmin=!1;changeHistory=[];ngOnInit(){this.supabaseService.getSession().subscribe(t=>{t.data.session?.user.email==="edon_malushaj@hotmail.com"||t.data.session?.user.email==="xxnicerdicerxx@gmail.com"||t.data.session?.user.email==="natachan6@gmail.com"?this.isAdmin=!0:this.router.navigate(["/"])}),this.supabaseService.getChangeHistory().then(t=>{this.changeHistory=t})}openCommit(t){this.router.navigate(["/commit/"+t.id+"/"+(t.id-1)])}static \u0275fac=function(e){return new(e||n)(w(Ve),w(qe))};static \u0275cmp=re({type:n,selectors:[["app-change-history"]],standalone:!0,features:[xe],decls:5,vars:0,consts:[[1,"container"],[3,"click"],[1,"commit-message"],[2,"font-weight","500"],[1,"open-commit"]],template:function(e,i){e&1&&(v(0,"div",0)(1,"h1"),k(2,"\xC4nderungshistorie"),_(),$h(3,NM,18,6,"p",null,RM),_()),e&2&&(S(3),jh(i.changeHistory))},dependencies:[Ef],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;max-width:90vw;border-radius:5px;padding:10px 20px;margin:50px auto}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:space-between;align-items:center;background-color:#a9a9a9;padding:5px 10px;border-radius:5px;transition:all .3s}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .commit-message[_ngcontent-%COMP%]{color:#fff;font-size:18px}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .open-commit[_ngcontent-%COMP%]{font-size:55px;color:#fff;padding:5px 10px;border-radius:5px}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{background-color:gray}"]})};var PM=["oldContent"],FM=["newContent"];function LM(n,t){n&1&&(v(0,"div")(1,"h2"),k(2,"Alte Version"),_(),v(3,"div",4,0),O(5,"div",null,0),_()(),v(7,"div")(8,"h2"),k(9,"Neue Version"),_(),v(10,"div",4,1),O(12,"div",null,1),_()())}function VM(n,t){if(n&1&&(v(0,"div",3)(1,"h1"),k(2,"Keine \xC4nderungen!"),_(),O(3,"div",5),_()),n&2){let e=M();S(3),E("innerHTML",e.newHtml,St)}}var Ol=class n{constructor(t,e){this.supabaseService=t;this.router=e}isAdmin=!1;firstId=0;secondId=0;oldHtml="";newHtml="";isSameHtml=!1;oldContent;newContent;ngOnInit(){let t=this.router.url.split("/");this.firstId=parseInt(t[2]),this.secondId=parseInt(t[3]),this.supabaseService.getSession().subscribe(e=>{e.data.session?.user.email==="edon_malushaj@hotmail.com"||e.data.session?.user.email==="xxnicerdicerxx@gmail.com"||e.data.session?.user.email==="natachan6@gmail.com"?this.isAdmin=!0:this.router.navigate(["/"])}),this.supabaseService.getCommitsToCompare(this.firstId,this.secondId).then(e=>{this.oldHtml=this.convert(e[0].description),this.newHtml=this.convert(e[1].description),this.highlightChanges()})}convert(t){return Ei(JSON.parse(t)).replace(/<img [^>]*>/g,"<img>")}highlightChanges(){let t=new DOMParser().parseFromString(this.oldHtml,"text/html"),e=new DOMParser().parseFromString(this.newHtml,"text/html"),i=Array.from(t.body.children),r=Array.from(e.body.children),s="",o="";i.forEach(a=>{r.find(c=>c.outerHTML===a.outerHTML)||a.classList.add("removed"),s+=a.outerHTML}),r.forEach(a=>{i.find(c=>c.outerHTML===a.outerHTML)||a.classList.add("added"),o+=a.outerHTML}),s===o?this.isSameHtml=!0:setTimeout(()=>{this.oldContent.nativeElement.innerHTML=s,this.newContent.nativeElement.innerHTML=o},0)}ngAfterViewInit(){this.syncScrolling()}syncScrolling(){let t=this.oldContent.nativeElement,e=this.newContent.nativeElement;function i(r){r.target===t?e.scrollTop=t.scrollTop:t.scrollTop=e.scrollTop}t.addEventListener("scroll",i),e.addEventListener("scroll",i)}static \u0275fac=function(e){return new(e||n)(w(Ve),w(qe))};static \u0275cmp=re({type:n,selectors:[["app-commit"]],viewQuery:function(e,i){if(e&1&&(Mt(PM,5),Mt(FM,5)),e&2){let r;pt(r=gt())&&(i.oldContent=r.first),pt(r=gt())&&(i.newContent=r.first)}},standalone:!0,features:[xe],decls:3,vars:1,consts:[["oldContent",""],["newContent",""],[1,"container"],[1,"no-changes-container"],[1,"version"],[3,"innerHTML"]],template:function(e,i){e&1&&(v(0,"div",2),ne(1,LM,14,0)(2,VM,4,1,"div",3),_()),e&2&&(S(),Ht(i.isSameHtml?2:1))},styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px;gap:20px}.no-changes-container[_ngcontent-%COMP%]{flex-direction:column}.no-changes-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#766565;border-bottom:1px solid #766565;padding-bottom:20px}.version[_ngcontent-%COMP%]{flex:1;border:1px solid #ccc;border-radius:5px;padding:15px;overflow:auto;max-height:90vh}  .added{background-color:#e6ffe6;color:#006400;font-weight:700}  .removed{background-color:#fdd6d6;color:#8b0000;font-weight:700}.line[_ngcontent-%COMP%]{padding:5px}"]})};var tv=[{path:"",component:Ml},{path:"edit",component:kl},{path:"change-history",component:Al},{path:"commit/:id/:prevId",component:Ol},{path:"login",component:wa}];var nv={providers:[Zh({eventCoalescing:!0}),wp(tv)]};var BM=["menu"];function $M(n,t){if(n&1){let e=Se();v(0,"img",12),R("click",function(){Q(e);let r=M(2);return X(r.toggleMenu())}),_()}}function jM(n,t){if(n&1){let e=Se();v(0,"img",13),R("click",function(){Q(e);let r=M(2);return X(r.toggleMenu())}),_()}}function zM(n,t){if(n&1){let e=Se();v(0,"div",11,0)(2,"a",14),R("click",function(){Q(e);let r=M(2);return X(r.routeTo(""))}),k(3,"Home"),_(),v(4,"a",14),R("click",function(){Q(e);let r=M(2);return X(r.routeTo("edit"))}),k(5,"Bearbeiten"),_(),v(6,"a",14),R("click",function(){Q(e);let r=M(2);return X(r.routeTo("change-history"))}),k(7,"\xC4nderungshistorie"),_(),v(8,"a",14),R("click",function(){Q(e);let r=M(2);return X(r.routeTo("login"))}),k(9,"Konto"),_()()}}function UM(n,t){if(n&1&&(v(0,"div",3)(1,"a",4),k(2,"Home"),_(),v(3,"a",5),k(4,"Bearbeiten"),_(),v(5,"a",6),k(6,"\xC4nderungshistorie"),_(),v(7,"a",7),k(8,"Konto"),_()(),v(9,"div",8),ne(10,$M,1,0,"img",9)(11,jM,1,0,"img",10)(12,zM,10,0,"div",11),_()),n&2){let e=M();S(10),Ht(e.showMenu?11:10),S(2),Ht(e.showMenu?12:-1)}}var Il=class n{constructor(t,e){this.supabase=t;this.router=e}menu;isAdmin=!1;showMenu=!1;ngOnInit(){this.supabase.getSession().subscribe(t=>{(t.data.session?.user.email==="edon_malushaj@hotmail.com"||t.data.session?.user.email==="xxnicerdicerxx@gmail.com"||t.data.session?.user.email==="natachan6@gmail.com")&&(this.isAdmin=!0)})}routeTo(t){this.router.navigate([t]),this.toggleMenu()}toggleMenu(){window.scrollTo(0,0),this.showMenu=!this.showMenu}onScrollEvent(t){this.menu&&this.menu.nativeElement&&!this.menu.nativeElement.contains(t.target)&&(this.showMenu=!1)}clickOutside(t){this.menu&&this.menu.nativeElement&&!this.menu.nativeElement.contains(t.target)&&(this.showMenu=!1)}static \u0275fac=function(e){return new(e||n)(w(Ve),w(qe))};static \u0275cmp=re({type:n,selectors:[["app-header"]],viewQuery:function(e,i){if(e&1&&Mt(BM,5),e&2){let r;pt(r=gt())&&(i.menu=r.first)}},hostBindings:function(e,i){e&1&&R("scroll",function(s){return i.onScrollEvent(s)},!1,Rh)("click",function(s){return i.clickOutside(s)},!1,Fn)},standalone:!0,features:[xe],decls:3,vars:1,consts:[["menu",""],[1,"header-container"],["src","assets/easynutrition_logo.png","alt","Logo","routerLink",""],[1,"routes"],["routerLink",""],["routerLink","edit"],["routerLink","change-history"],["routerLink","login"],[1,"routes-mobile"],["src","assets/menu.png","alt","Menu"],["src","assets/close.png","alt","Close",1,"close"],[1,"show-routes"],["src","assets/menu.png","alt","Menu",3,"click"],["src","assets/close.png","alt","Close",1,"close",3,"click"],[3,"click"]],template:function(e,i){e&1&&(v(0,"div",1),O(1,"img",2),ne(2,UM,13,2),_()),e&2&&(S(2),Ht(i.isAdmin?2:-1))},dependencies:[bp],styles:[".header-container[_ngcontent-%COMP%]{width:100%;height:100px;background-color:#fff;display:flex;align-items:center;justify-content:space-between}.header-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:20px;height:80px}.header-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{cursor:pointer}.header-container[_ngcontent-%COMP%]   .routes[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:20px}.header-container[_ngcontent-%COMP%]   .routes[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-size:20px;font-weight:500;margin-left:20px;transition:all .3s}.header-container[_ngcontent-%COMP%]   .routes[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer;color:#afafaf}.header-container[_ngcontent-%COMP%]   .routes-mobile[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 768px){.header-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:70px}.routes[_ngcontent-%COMP%]{display:none!important}.routes-mobile[_ngcontent-%COMP%]{display:flex!important;align-items:center;justify-content:space-between;margin-right:20px}.routes-mobile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:grayscale(40%);margin-left:20px;height:40px}.routes-mobile[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{height:28px;margin-right:4px}.routes-mobile[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-size:24px;font-weight:500;margin-left:20px;transition:all .3s;margin-bottom:10px}.routes-mobile[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer;color:#afafaf}.show-routes[_ngcontent-%COMP%]{z-index:3;position:fixed;top:100px;left:0;background-color:#fff;width:100%;display:flex;flex-direction:column;align-items:center;padding-bottom:10px;box-shadow:0 18px 14px #0000001a}}"]})};var Tl=class n{scrollToTop(t){window.scrollTo({top:0,behavior:t||"auto"})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=re({type:n,selectors:[["app-root"]],standalone:!0,features:[xe],decls:4,vars:0,consts:[[1,"scroll-to-top",3,"click"],[3,"activate"]],template:function(e,i){e&1&&(O(0,"app-header"),v(1,"div",0),R("click",function(){return i.scrollToTop("smooth")}),k(2,"\u21E7"),_(),v(3,"router-outlet",1),R("activate",function(){return i.scrollToTop()}),_())},dependencies:[Kc,Il],styles:[".scroll-to-top[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:1000;cursor:pointer;width:50px;height:50px;background:#007bff;color:#fff;border-radius:50%;text-align:center;font-size:30px;box-shadow:2px 2px 3px #0003;transition:all .3s;display:flex;justify-content:center;align-items:center}.scroll-to-top[_ngcontent-%COMP%]:hover{background:#0056b3;scale:1.05}"]})};Lf(Tl,nv).catch(n=>console.error(n));
